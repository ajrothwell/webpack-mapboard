(window.webpackJsonp=window.webpackJsonp||[]).push([[13],Array(258).concat([function(e,t,i){var n=i(281),o=i(376),r=i(377),a="[object Null]",s="[object Undefined]",l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?o(e):r(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"f",function(){return r}),i.d(t,"e",function(){return a}),i.d(t,"g",function(){return s}),i.d(t,"a",function(){return l}),i.d(t,"c",function(){return c}),i.d(t,"d",function(){return u});var n={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function o(e,t,i){if(!u(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");n&&p(n),o&&d(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=t||{},r.geometry=e,r}function r(e,t,i){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!c(e[0])||!c(e[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:e},t,i)}function a(e,t,i){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!c(e[0][1])||!c(e[0][1]))throw new Error("coordinates must contain numbers");return o({type:"LineString",coordinates:e},t,i)}function s(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var i=n[t||"kilometers"];if(!i)throw new Error(t+" units is invalid");return e*i}function l(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180}function c(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function u(e){return!!e&&e.constructor===Object}function p(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!c(e))throw new Error("bbox must only contain numbers")})}function d(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},,,,,,,,,,,,,,,,,,,function(e,t,i){var n=i(282).Symbol;e.exports=n},function(e,t,i){var n=i(300),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();e.exports=r},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,i){var n=i(299),o=i(305);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,i){var n=i(418);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(10)(n,o);n.locals&&(e.exports=n.locals)},,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"b",function(){return l});var n=i(261);function o(e,t,i){if(null!==e)for(var n,r,a,s,l,c,u,p,d=0,h=0,f=e.type,m="FeatureCollection"===f,y="Feature"===f,g=m?e.features.length:1,v=0;v<g;v++){l=(p=!!(u=m?e.features[v].geometry:y?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var _=0,x=0;if(null!==(s=p?u.geometries[b]:u)){c=s.coordinates;var w=s.type;switch(d=!i||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,h,v,_,x))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],h,v,_,x))return!1;h++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(r=0;r<c[n].length-d;r++){if(!1===t(c[n][r],h,v,_,x))return!1;h++}"MultiLineString"===w&&_++,"Polygon"===w&&x++}"Polygon"===w&&_++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for("MultiPolygon"===w&&(x=0),r=0;r<c[n].length;r++){for(a=0;a<c[n][r].length-d;a++){if(!1===t(c[n][r][a],h,v,_,x))return!1;h++}x++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===o(s.geometries[n],t,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(e,t){var i,n,o,r,a,s,l,c,u,p,d=0,h="FeatureCollection"===e.type,f="Feature"===e.type,m=h?e.features.length:1;for(i=0;i<m;i++){for(s=h?e.features[i].geometry:f?e.geometry:e,c=h?e.features[i].properties:f?e.properties:{},u=h?e.features[i].bbox:f?e.bbox:void 0,p=h?e.features[i].id:f?e.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(r,d,c,u,p))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===t(r.geometries[n],d,c,u,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,u,p))return!1;d++}}function a(e,t,i){var n=i;return r(e,function(e,o,r,a,s){n=0===o&&void 0===i?e:t(n,e,o,r,a,s)}),n}function s(e,t){r(e,function(e,i,o,r,a){var s,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(Object(n.b)(e,o,{bbox:r,id:a}),i,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<e.coordinates.length;c++){var u={type:s,coordinates:e.coordinates[c]};if(!1===t(Object(n.b)(u,o),i,c))return!1}})}function l(e,t,i){var r=i,a=!1;return function(e,t){s(e,function(e,i,r){var a=0;if(e.geometry){var s,l=e.geometry.type;if("Point"!==l&&"MultiPoint"!==l)return!1!==o(e,function(o,l,c,u,p){if(void 0!==s){var d=Object(n.e)([s,o],e.properties);if(!1===t(d,i,r,p,a))return!1;a++,s=o}else s=o})&&void 0}})}(e,function(e,n,o,s,l){r=!1===a&&void 0===i?e:t(r,e,n,o,s,l),a=!0}),r}},function(e,t,i){var n=i(298);e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},function(e,t,i){var n=i(374),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,i){var n=i(258),o=i(262),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==a||t==s||t==r||t==l}},function(e,t,i){(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,i(4))},function(e,t,i){var n=i(302),o=i(383),r=i(384);e.exports=function(e,t){return r(o(e,t,n),e+"")}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},function(e,t,i){var n=i(283),o=i(284),r=i(306),a=i(262);e.exports=function(e,t,i){if(!a(i))return!1;var s=typeof t;return!!("number"==s?o(i)&&r(t,i.length):"string"==s&&t in i)&&n(i[t],e)}},function(e,t){var i=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}},function(e,t){var i=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?i:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,i){var n=i(389),o=i(390),r=i(308),a=i(392),s=i(306),l=i(394),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var i=r(e),u=!i&&o(e),p=!i&&!u&&a(e),d=!i&&!u&&!p&&l(e),h=i||u||p||d,f=h?n(e.length,String):[],m=f.length;for(var y in e)!t&&!c.call(e,y)||h&&("length"==y||p&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,m))||f.push(y);return f}},function(e,t){var i=Array.isArray;e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var i=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}},function(e,t,i){var n=i(258),o=i(259),r=i(401),a="[object DOMException]",s="[object Error]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==s||t==a||"string"==typeof e.message&&"string"==typeof e.name&&!r(e)}},function(e,t){e.exports=function(e,t){return function(i){return e(t(i))}}},function(e,t){e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}},function(e,t){e.exports=/<%=([\s\S]+?)%>/g},function(e,t,i){var n=i(413);e.exports=function(e){return null==e?"":n(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){(function(e){(function(t,i,n,o,r,a,s,l,c,u,p,d){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l;var h="default"in c?c.default:c;function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m(e,t){return e(t={exports:{}},t.exports),t.exports}u=u&&u.hasOwnProperty("default")?u.default:u,p=p&&p.hasOwnProperty("default")?p.default:p,d=d&&d.hasOwnProperty("default")?d.default:d;var y=m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z";t.definition={prefix:"far",iconName:"dot-circle",icon:[512,512,i,"f192",n]},t.faDotCircle=t.definition,t.prefix="far",t.iconName="dot-circle",t.width=512,t.height=512,t.ligatures=i,t.unicode="f192",t.svgPathData=n});f(y),y.definition;var g=y.faDotCircle,v=(y.prefix,y.iconName,y.width,y.height,y.ligatures,y.unicode,y.svgPathData,m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z";t.definition={prefix:"fas",iconName:"search",icon:[512,512,i,"f002",n]},t.faSearch=t.definition,t.prefix="fas",t.iconName="search",t.width=512,t.height=512,t.ligatures=i,t.unicode="f002",t.svgPathData=n}));f(v),v.definition;var b=v.faSearch,_=(v.prefix,v.iconName,v.width,v.height,v.ligatures,v.unicode,v.svgPathData,m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z";t.definition={prefix:"fas",iconName:"times",icon:[352,512,i,"f00d",n]},t.faTimes=t.definition,t.prefix="fas",t.iconName="times",t.width=352,t.height=512,t.ligatures=i,t.unicode="f00d",t.svgPathData=n}));f(_),_.definition;var x=_.faTimes,w=(_.prefix,_.iconName,_.width,_.height,_.ligatures,_.unicode,_.svgPathData,m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z";t.definition={prefix:"fas",iconName:"map-marker-alt",icon:[384,512,i,"f3c5",n]},t.faMapMarkerAlt=t.definition,t.prefix="fas",t.iconName="map-marker-alt",t.width=384,t.height=512,t.ligatures=i,t.unicode="f3c5",t.svgPathData=n}));f(w),w.definition;var C=w.faMapMarkerAlt,S=(w.prefix,w.iconName,w.width,w.height,w.ligatures,w.unicode,w.svgPathData,m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z";t.definition={prefix:"fas",iconName:"caret-left",icon:[192,512,i,"f0d9",n]},t.faCaretLeft=t.definition,t.prefix="fas",t.iconName="caret-left",t.width=192,t.height=512,t.ligatures=i,t.unicode="f0d9",t.svgPathData=n}));f(S),S.definition;var M=S.faCaretLeft,E=(S.prefix,S.iconName,S.width,S.height,S.ligatures,S.unicode,S.svgPathData,m(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=[],n="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z";t.definition={prefix:"fas",iconName:"caret-right",icon:[192,512,i,"f0da",n]},t.faCaretRight=t.definition,t.prefix="fas",t.iconName="caret-right",t.width=192,t.height=512,t.ligatures=i,t.unicode="f0da",t.svgPathData=n}));f(E),E.definition;var k=E.faCaretRight;function T(e,t,i){for(var n=Object.keys(i).filter(function(e){return e.startsWith("l-")}).map(function(e){return e.slice(2)}),o=function(){var i=a[r],n="l-"+i;t.on(i,function(t){e.$emit(n,t)})},r=0,a=n;r<a.length;r+=1)o()}E.prefix,E.iconName,E.width,E.height,E.ligatures,E.unicode,E.svgPathData,function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .map-container { height: 100%; } .map-container-type2 { height: calc(100vh - 109px); } .map { height: 100%; } @media (max-width: 749px) { .map-container { height: 300px; } } /* @media screen and (max-width: 40em) { */ @media screen and (max-width: 750px) { .map-container-type2 { height: calc(100vh - 141px); } } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.mapContainerClass},[t("div",{ref:"map",staticClass:"map",attrs:{id:"map"}}),this._v(" "),t("div",[this._t("default")],2)])},staticRenderFns:[],name:"Map_",props:["center","zoom","zoomControlPosition","minZoom","maxZoom"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement();e.zoomControl.setPosition(this.$props.zoomControlPosition),this.$store.commit("setMap",{map:e}),this.setMapView(this.center),this.$nextTick(function(){e.attributionControl.setPrefix('<a target="_blank" href="//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx">City of Philadelphia | CityGeo</a>')});for(var t=0,i=this.$children;t<i.length;t+=1){var n=i[t];n.parentMounted(this,n.$props)}T(this,this.$leafletElement,this._events),this.$config.map.clickToIdentifyFeatures&&e.on("click",this.identifyFeatures)},watch:{center:function(e){this.setMapView(e)},zoom:function(e){e&&(this.$leafletElement.setZoom(e),this.$store.commit("setMapZoom",e))},mapBounds:function(e){console.log("watch nextBounds is firing, nextBounds:",e,"this.$leafletElement:",this.$leafletElement),this.setMapBounds(e)},fullScreenMapEnabled:function(){this.$leafletElement.invalidateSize()},webMapDisplayedLayers:function(e){for(var t=[],i=0,n=this.intersectingFeatures;i<n.length;i+=1){var o=n[i];t.push(o.feature.layerName)}console.log("map.vue watch nextWebMapDisplayedLayers:",e,"intersectingLayers:",t);for(var r=0,a=t;r<a.length;r+=1){var s=a[r];if(!e.includes(s))return void this.$store.commit("setIntersectingFeatures",[])}}},computed:{mapContainerClass:function(){return this.$config.map.containerClass?this.$config.map.containerClass:"map-container"},fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},mapBounds:function(){return this.$store.state.map.bounds},webMapDisplayedLayers:function(){return this.$store.state.map.webMapDisplayedLayers},intersectingFeatures:function(){return this.$store.state.map.intersectingFeatures}},methods:{createLeafletElement:function(){var e=this.$props,t=(e.zoomControlPosition,function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(i[n]=e[n]);return i}(e,["zoomControlPosition"]));return new c.Map(this.$refs.map,t)},childDidMount:function(e){e.addTo(this.$leafletElement)},setMapView:function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=this.zoom),0!==e.length){var i=e[0],n=e[1],o=new c.LatLng(n,i);this.$leafletElement.setView(o,t)}},setMapBounds:function(e){e._northEast&&this.$leafletElement.fitBounds([[e._northEast.lat,e._northEast.lng],[e._southWest.lat,e._southWest.lng]])},identifyFeatures:function(e){var t,i=this.$leafletElement,n=new c.LatLngBounds(e.latlng,e.latlng),o=[];for(var r in i._layers){var a=i._layers[r];if(a._layers)for(var s in a._layers){var l=a._layers[s];if(l.feature){var u=void 0;"Polygon"===(t=l.feature.geometry.type)||"MultiPolygon"===t?l.contains(e.latlng)&&this.checkForDuplicates(r,l,o):"LineString"===t?(u=l.getBounds())&&n.intersects(u)&&this.checkForDuplicates(r,l,o):"Point"===t&&(u=new c.LatLngBounds(l._latlng,l._latlng))&&n.intersects(u)&&this.checkForDuplicates(r,l,o)}}}this.$store.commit("setPopupCoords",e.latlng),this.$store.commit("setIntersectingFeatures",o)},checkForDuplicates:function(e,t,i){for(var n=[],o=0;o<i.length;o++)n[o]=e+"_"+i[o].feature.id;n.includes(e+"_"+t.feature.id)||i.push(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var P={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[],name:"Control",props:["position"],methods:{createLeafletElement:function(e){return new(function(t){function i(e,i){t.call(this,i),this.el=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(){var t=this.el;return e.DomEvent.disableClickPropagation(t),e.DomEvent.disableScrollPropagation(t),t},i}(e.Control))(this.$el,{position:this.position})},parentMounted:function(e,t){var i=this.createLeafletElement(c);this.$leafletElement=i;var n=e.$leafletElement;i.addTo(n)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var O=c.geoJSON,N={name:"Geojson",props:["geojson","fillColor","color","weight","opacity","fillOpacity","data"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t),T(this,this.$leafletElement,this._events)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=this.$props,t=e.geojson,i=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(i[n]=e[n]);return i}(e,["geojson"]);return new O(t,i)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var F={name:"CircleMarker",props:["latlng","radius","fillColor","color","weight","opacity","fillOpacity","data","pane"],watch:{latlng:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)}},mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t),T(this,this.$leafletElement,this._events)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=this.$props,t=e.latlng,i=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(i[n]=e[n]);return i}(e,["latlng"]);return new c.CircleMarker(t,i)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .leaflet-fullleft { position: absolute; bottom: 0px; /* possible because the placeholder's parent is the map */ left: 0px; padding-bottom: 10px; z-index: 500; } .leaflet-fulltop { position: absolute; top: 10px; left: 0px; padding-bottom: 10px; z-index: 500; } .leaflet-centervert { /* position: relative; */ /* top: 100px; left: 0px; */ /* padding-top: 40%; */ padding-bottom: 30%; z-index: 500; } .leaflet-almostleft { position: absolute; bottom: 0px; left: 30px; padding-bottom: 10px; z-index: 500; } .leaflet-almostleft .leaflet-control { margin-bottom: 0px; } .leaflet-almostright { position: absolute; top: 0px; right: 60px; padding-bottom: 10px; z-index: 500; } .leaflet-almostright .leaflet-control { margin-top: 10px; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var A={name:"ControlCorner",props:["vSide","hSide"],render:function(e){},methods:{parentMounted:function(e){var t=e.$leafletElement;t._controlCorners[this.vSide+this.hSide]=c.DomUtil.create("div","leaflet-"+this.vSide+" leaflet-"+this.hSide,t._controlContainer)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var D={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[],name:"PopUp",mounted:function(){(this.$leafletElement=this.createLeafletElement()).on("remove",this.removePopup)},destroyed:function(){this.$leafletElement.removeFrom(this._map)},watch:{intersectingFeatures:function(e){(this.$leafletElement=this.createLeafletElement()).on("remove",this.removePopup)}},computed:{_map:function(){return this.$store.state.map.map},intersectingFeatures:function(){return this.$store.state.map.intersectingFeatures},popupCoords:function(){return this.$store.state.map.popupCoords}},methods:{removePopup:function(){this.$store.commit("setIntersectingFeatures",[])},createLeafletElement:function(){return c.popup({minWidth:300,offset:c.point(0,-24)}).setLatLng(this.popupCoords).setContent(this.$children[0].$el).openOn(this._map)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .leaflet-popup-content { margin-top: 8px; margin-bottom: 8px; } .pagination { margin-bottom: 0px; } .leaflet-popup-close-button { font-size: 24px !important; height: 24px !important; line-height: 24px !important; width: 24px !important; } .inline-div { display: inline-block; padding: 3px; } .current { font-weight: bold; } .popup-div { font-size: 14px; display: inline-block; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}(),function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var j={name:"Polygon",props:["latlngs","color","weight","fill","pane"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},watch:{latlngs:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)}},methods:{createLeafletElement:function(){return new c.Polygon(this.$props.latlngs,{color:this.$props.color,weight:this.$props.weight,fill:this.$props.fill,pane:this.$props.pane,"z-index":9999})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var z={name:"Polyline_",props:["latlngs","color","weight","pane"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},watch:{latlngs:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)}},methods:{createLeafletElement:function(){return new c.Polyline(this.$props.latlngs,{color:this.$props.color,weight:this.$props.weight,pane:this.$props.pane,"z-index":1e4})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var B,R={name:"EsriTiledMapLayer",props:["url","minZoom","maxZoom","zIndex","attribution"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&(e.addTo(t),t.attributionControl.removeAttribution("overwrite"),t.attributionControl.removeAttribution('<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;"></span>'))},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=Object.assign({},this.$props);return new o.tiledMapLayer(e)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t),t.attributionControl.removeAttribution("overwrite"),t.attributionControl.removeAttribution('<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;"></span>')}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .opacity_slider_control .ui-slider-range { background-image: none; background-color: #646464; height: 200px; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var V={name:"OpacitySlider",props:["layer","position","initialOpacity"],created:function(){var e=100*this.$props.initialOpacity;c.Control.opacitySlider=c.Control.extend({options:{position:"topright"},setOpacityLayer:function(e){B=e},onAdd:function(t){var i=c.DomUtil.create("div","opacity_slider_control");return $(i).slider({orientation:"vertical",range:"min",min:0,max:100,value:e,step:10,start:function(e,i){t.dragging.disable(),t.once("mousedown",function(e){t.dragging.enable()})},slide:function(e,t){var i=t.value/100;B.setOpacity(i)}}),$(i).click(function(e){e.stopPropagation()}),i}})},mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map;t&&this.$nextTick(function(){e.addTo(t.map)})},destroyed:function(){this.$leafletElement._map.removeControl(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=new c.Control.opacitySlider;return e.setPosition(this.$props.position),e.setOpacityLayer(this.$props.layer),e},parentMounted:function(e){e.$leafletElement.addControl(this.$leafletElement)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var G={render:function(){var e=this.$createElement;return(this._self._c||e)("opacity-slider",{attrs:{layer:this.$leafletElement,position:"topleft",initialOpacity:this.opacity}})},staticRenderFns:[],name:"EsriTiledOverlay",components:{OpacitySlider:V},props:["url","minZoom","maxZoom","zIndex","attribution","opacity"],created:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&(e.addTo(t),t.attributionControl.removeAttribution("overwrite"))},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},methods:{createLeafletElement:function(){var e=Object.assign({},this.$props);return new o.tiledMapLayer(e)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var W={render:function(){var e=this.$createElement;return(this._self._c||e)("opacity-slider",{attrs:{layer:this.$leafletElement,position:"topleft",initialOpacity:this.opacity}})},staticRenderFns:[],name:"EsriDynamicMapLayer",components:{OpacitySlider:V},props:{url:{},minZoom:{},maxZoom:{},zIndex:{},opacity:{default:1},layers:{},layerDefs:{},transparent:{}},created:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},computed:{},methods:{createLeafletElement:function(){var e=Object.assign({},this.$props);return new o.dynamicMapLayer(e)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /*# sourceMappingURL=FeatureLayer.vue.map */";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var J={name:"EsriFeatureLayer",props:["url","minZoom","maxZoom","zIndex","layerName","color","fillColor","fillOpacity","weight","style_","markerType","radius","interactive"],created:function(){var e=this.$leafletElement=this.createLeafletElement();console.log("leafletElement:",e);var t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=Object.assign({},this.$props),t=this.$store.state.map.map,i=e.layerName;t.getPane(i)||t.createPane(i);var n=e.style_;if(delete e.style_,e.style=n,"circleMarker"===e.markerType){e.pointToLayer=function(t,n){return c.circleMarker(n,{pane:i,color:e.color,fillColor:e.fillColor,fillOpacity:e.fillOpacity,weight:e.weight,radius:e.radius,interactive:e.interactive})}}return new o.featureLayer(e)},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};function U(){return"id-"+Math.random().toString(36).substring(7)}!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var H={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[],name:"WebMap",computed:{webmapId:function(){return this.$config.webmapId}},methods:{parentMounted:function(e){var t=this,i=this,n=this.$store.state.map.map,o="https://www.arcgis.com/sharing/rest/content/items/"+this.webmapId+"/data",a={dataType:"json",webmapId:this.webmapId},s=[];l.get(o,{params:a}).then(function(e){var o,a=e.data;o=t.$config.bundled?t.$webMap=r.webMap(t.webmapId,{map:n}):t.$webMap=L.esri.webMap(t.webmapId,{map:n}),i.$store.commit("setWebMap",o),o.on("load",function(){n.attributionControl.setPrefix('<a target="_blank" href="//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx">City of Philadelphia | CityGeo</a>');for(var e=["CityBasemap","CityBasemap_Labels"],t={},r=0,l=o.layers;r<l.length;r+=1){var c=l[r],u=c.title;if(!e.includes(u)&&u.includes("_")){var p=u.split("_")[1];c.layer.service?t[p]=c.layer.service.options.url.replace("https://","").replace("http://","").replace(/\/$/,"").toLowerCase():c.layer._layers&&(t[p]=c.layer._layers[Object.keys(c.layer._layers)[0]].service.options.url.replace("https://","").replace("http://","").replace(/\/$/,"").toLowerCase())}}i.$store.commit("setLayerUrls",t);for(var d=a.operationalLayers,h=function(){var e=m[f];if("CityBasemap"!==e.title){for(var t=void 0,i=0,n=d;i<n.length;i+=1){var o=n[i];o.title===e.title&&(t=o)}var r="https://www.arcgis.com/sharing/rest/content/items/"+t.itemId,a=U(),l={category:e.title.split("_")[0],title:e.title.split("_")[1],layer:e.layer,id:a,serviceItemId:null,rest:t,opacity:t.opacity,type:t.layerType,type2:e.type,legend:null,tags:null,tagsString:null};t.itemId?L.esri.request(r,{},function(e,t){if(e)s.push(l),s.sort(function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i<n?-1:i>n?1:0});else{var i=t.tags.map(function(e){return"string"==typeof e?e.toLowerCase():e}),n=Array.from(new Set(i));l.tags=n,l.tagsString=t.tags.join(),s.push(l),s.sort(function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i<n?-1:i>n?1:0})}}):(s.push(l),s.sort(function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i<n?-1:i>n?1:0}))}},f=0,m=o.layers;f<m.length;f+=1)h();for(var y=[""],g=0,v=s;g<v.length;g+=1){var b=v[g];y.includes(b.category)||y.push(b.category)}y.sort(function(e,t){var i=e.toLowerCase(),n=t.toLowerCase();return i<n?-1:i>n?1:0}),i.$store.commit("setWebMapLayersAndRest",s),i.$store.commit("setCategories",y),n.createPane("highlightOverlay")})},function(e){console.log("AXIOS ERROR WebMap.vue")})}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var q={name:"WebMapLayer",props:["layer","layerName","layerDefinition","opacity","type"],data:function(){return{geometryType:null}},watch:{opacity:function(e){this.changeOpacity(e)},geometryType:function(e){if("esriGeometryPoint"===e)if(this.$leafletElement.metadata)this.$leafletElement.on("click",function(e){L.DomEvent.stopPropagation(e)}),this.$leafletElement.on("click",this.clickHandler);else if(this.$leafletElement._layers[Object.keys(this.$leafletElement._layers)[0]].metadata)for(var t=0,i=Object.keys(this.$leafletElement._layers);t<i.length;t+=1){for(var n=i[t],o=0,r=Object.keys(this.$leafletElement._layers[n]._layers);o<r.length;o+=1){var a=r[o];this.$leafletElement._layers[n]._layers[a].options.bubblingMouseEvents=!1}this.$leafletElement._layers[n].on("click",function(e){L.DomEvent.stopPropagation(e)}),this.$leafletElement._layers[n].on("click",this.clickHandler)}}},computed:{scale:function(){return this.$store.state.map.scale}},created:function(){this.$leafletElement=this.layer;this.layer.metadata?this.layer.metadata(function(e,t){this.geometryType=t.geometryType},this):this.layer._layers[Object.keys(this.layer._layers)[0]].metadata&&this.layer._layers[Object.keys(this.layer._layers)[0]].metadata(function(e,t){this.geometryType=t.geometryType},this)},mounted:function(){var e=this.$store.state.map.map;e&&this.$leafletElement.addTo(e)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)},changeOpacity:function(e){var t;t=this.$leafletElement.legend?this.$leafletElement:this.$leafletElement._layers[Object.keys(this.$leafletElement._layers)[0]],"FL"!=this.$props.type?t.setOpacity(e):t.eachFeature(function(t){if(t._icon){var i=t._icon.attributes.style.nodeValue,n=i.slice(0,i.indexOf("; opacity")).concat("; opacity:",e,"; fill-opacity:",e,";");t._icon.attributes.style.nodeValue=n}else t._path&&(0===t.options.fillOpacity?t.setStyle({opacity:e}):0===t.options.opacity?t.setStyle({fillOpacity:e}):t.setStyle({opacity:e,fillOpacity:e}))})},clickHandler:function(e){var t,i=this.$store.state.map.map,n=new c.LatLngBounds(e.layer._latlng,e.layer._latlng),o=[];for(var r in i._layers){var a=i._layers[r];if(a._layers)for(var s in a._layers){var l=a._layers[s];if(l.feature){var u=void 0;"Polygon"===(t=l.feature.geometry.type)||"MultiPolygon"===t?l.contains(e.latlng)&&this.checkForDuplicates(r,l,o):"LineString"===t?(u=l.getBounds())&&n.intersects(u)&&this.checkForDuplicates(r,l,o):"Point"===t&&(u=new c.LatLngBounds(l._latlng,l._latlng))&&n.intersects(u)&&this.checkForDuplicates(r,l,o)}}}this.$store.commit("setPopupCoords",e.latlng),this.$store.commit("setIntersectingFeatures",o)},checkForDuplicates:function(e,t,i){for(var n=[],o=0;o<i.length;o++)n[o]=e+"_"+i[o].feature.id;n.includes(e+"_"+t.feature.id)||i.push(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var Z={props:{slots:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},beforeCreate:function(){},created:function(){},computed:{nullValue:function(){return(this.options||{}).nullValue}},methods:{evaluateSlot:function(e,t,i){var n,o=this;if(void 0===t&&(t=[]),void 0===i&&(i=""),!e)return e;if("function"===typeof e){var r=this.$store.state,a=this.$controller,s=e,l=this.item;n=l?s(r,l,a):s(r)}else n=e;if(!1===n);else if(!n)return i;for(var c=function(){var e=p[u],t=o.$config.transforms[e],i=void 0,r=t.globals;r&&(i=Object.keys(window).filter(function(e){return r.includes(e)}).reduce(function(e,t){return e[t]=window[t],e},{}));var a=t.transform;n=a(n,i)},u=0,p=t;u<p.length;u+=1)c();return n}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .legend { margin-left: 10px; } ul { list-style: none; margin-left: 0px; } ul ul { list-style: none; margin-left: 0px; } li { list-style: none; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var X={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"legend",domProps:{innerHTML:this._s(this.legendHtml)}})])},staticRenderFns:[],props:["layer","layerName","layerId","layerDefinition","legend","scales"],data:function(){return{legendHtml:"",options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"",container:null}}},created:function(){this.initialize()},watch:{scale:function(e){this.createLegend(e)},legend:function(){console.log("watch legend fired"),this.createLegend(this.scale)}},computed:{scale:function(){var e=this.$store.state.map.zoom+1,t=this.$props.scales[e];return t}},methods:{initialize:function(){var e;this.$props.layerDefinition&&(e=this.$props.layerDefinition.drawingInfo);var t={layerName:this.$props.layerName,layerId:this.$props.layerId,store:this.$store,drawingInfo:e};console.log("LegendBox initialize is running:",this.$props.layer,t);h.esri.legendControl(this.$props.layer,t)},createLegend:function(e){var t=this.$props.legend;console.log("METHOD createLegend running",e,t);var i="";if(1===t.layers.length){for(var n=t.layers[0],o="",r=0,a=n.legend;r<a.length;r+=1){var s=a[r],l=JSON.parse(JSON.stringify(s));l.label||(l.label=""),o+=h.Util.template(this.options.listRowTemplate,l)}i+=h.Util.template(this.options.layerTemplate,{layerName:n.layerName,legends:o})}else for(var c=0,u=t.layers;c<u.length;c+=1){var p=u[c],d="";if(parseFloat(e)>parseFloat(p.maxScale)&&parseFloat(e)<parseFloat(p.minScale))for(var f=0,m=p.legend;f<m.length;f+=1){var y=m[f],g=JSON.parse(JSON.stringify(y));d+=h.Util.template(this.options.listRowTemplate,g)}i+=h.Util.template(this.options.layerTemplate,{layerName:p.layerName,legends:d})}var v=h.Util.template(this.options.listTemplate,{layers:i});this.legendHtml=v}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .slider-wrapper { /*display: inline-block;*/ width: 250px; /*height: 50px;*/ /*padding-top: 3px; margin-bottom: 8px;*/ } .slider-wrapper input { /*padding-top: 3px; padding-bottom: 8px; margin-bottom: 8px;*/ width: 250px; /*height: 20px;*/ } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"slider-wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.opa,expression:"opa"}],staticClass:"slider",attrs:{type:"range",min:"1",max:"100",step:"1"},domProps:{value:e.opa},on:{__r:function(t){e.opa=t.target.value}}})])},staticRenderFns:[],props:["layer","layerName","layerId","opacity"],data:function(){return{opa:100*this.$props.opacity}},watch:{opa:function(e){var t={layerName:this.$props.layerName,opa:e/100};this.$store.commit("setWebMapLayersOpacity",t)}},created:function(){},computed:{},methods:{}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=' .sliderDiv[data-v-0e8eedb4] { height: 60px; } .flex[data-v-0e8eedb4] { margin-bottom: 16px; } .metadata-link[data-v-0e8eedb4] { display: inline-block; height: 10px; width: 10px; /*border: solid; border-width: 1px;*/ } .download-select[data-v-0e8eedb4] { width: 200px; } .div-row[data-v-0e8eedb4] { position: relative; margin-bottom: 12px; } /* input[type="checkbox"] { width: 25px; height: 25px; position: absolute; top: 50%; margin-top: -10px; margin-left: 32px; cursor: pointer; } */ a[data-v-0e8eedb4] { position: absolute; /* top: 50%; */ /* margin-top: -10px; */ /*margin-left: 25px;*/ } input[type=checkbox]+label[for][data-v-0e8eedb4] { font-size: 16px; } input[type=checkbox]+label[data-v-0e8eedb4]::before { position: absolute; margin-top: -12px; font-size: 30px; padding-right: 5px; } .disabled[data-v-0e8eedb4] { color: #d3d3d3 !important; } input[type=checkbox]+label.disabled[data-v-0e8eedb4]::before { color: #d3d3d3; } .label-text[data-v-0e8eedb4] { /* position: absolute; */ display: inline-block; /* margin-top: 4px; */ margin-left: 0px; padding-left: 30px; } .layer-name[data-v-0e8eedb4] { font-weight: normal; vertical-align: middle; display: inline-block; margin-left: 30px; margin-bottom: 6px; } .tag-title[data-v-0e8eedb4] { padding-left: 30px; font-weight: normal; font-style: italic; font-size: 14px; color: red; } .tag-holder[data-v-0e8eedb4] { /* display: inline-block; */ padding-left: 30px; font-weight: normal; font-size: 14px; color: red; } ';t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var K={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"div-row"},[e.bennyId?i("a",{attrs:{href:"http://metadata.phila.gov/#home/representationdetails/"+this.bennyId,target:"_blank"}},[i("span",[i("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:"info-circle"}})],1)]):e._e(),e._v(" "),i("input",{class:{disabled:e.shouldBeDisabled},attrs:{id:"checkbox-"+e.layerName,type:"checkbox",layerid:e.layerId},domProps:{checked:e.webMapActiveLayers.includes(e.layerName)},on:{click:e.checkboxToggle}}),e._v(" "),i("label",{class:{disabled:e.shouldBeDisabled,"label-text":!0},attrs:{for:"checkbox-"+e.layerName}},[i("div",{staticClass:"layer-name"},[e._v(e._s(e.layerName))])])]),e._v(" "),this.$store.state.map.webMapActiveLayers.includes(e.layerName)?i("legend-box",{attrs:{layer:e.layer,layerName:e.layerName,layerId:e.layerId,layerDefinition:e.layerDefinition,legend:e.legend,scales:this.$config.map.scales}}):e._e(),e._v(" "),this.$store.state.map.webMapActiveLayers.includes(e.layerName)?i("slider",{attrs:{layer:e.layer,layerName:e.layerName,layerId:e.layerId,opacity:e.opacity}}):e._e()],1)},staticRenderFns:[],_scopeId:"data-v-0e8eedb4",components:{LegendBox:X,Slider:Y},props:["layer","layerName","layerId","layerDefinition","opacity","legend","tags"],data:function(){return{opa:100*this.$props.opacity}},watch:{opa:function(e){var t={layerName:this.$props.layerName,opa:e/100};this.$store.commit("setWebMapLayersOpacity",t)},shouldBeDisabled:function(e){this.webMapActiveLayers.includes(this.$props.layerName)&&!0===e?this.removeFromWebMapDisplayedLayers():this.webMapActiveLayers.includes(this.$props.layerName)&&!1===e&&this.addToWebMapDisplayedLayers()}},computed:{matchingTags:function(){var e=[];if(null!==this.$props.tags&&""!==this.inputTagsFilter)for(var t=0,i=this.$props.tags;t<i.length;t+=1){var n=i[t];n.toLowerCase().includes(this.inputTagsFilter.toLowerCase())&&e.push(n)}return e},inputTagsFilter:function(){return this.$store.state.layers.inputTagsFilter},scale:function(){return this.$store.state.map.scale},shouldBeDisabled:function(){var e=this.$props.layerDefinition;return!!e&&(e.minScale?this.scale>e.minScale:void 0)},layerUrls:function(){return this.$store.state.layers.layerUrls},bennyEndpoints:function(){return this.$store.state.bennyEndpoints},url:function(){return this.layerUrls[this.$props.layerName]},bennyId:function(){return Object.keys(this.bennyEndpoints).length>0?this.bennyEndpoints[this.url]:" "},webMapUrlLayer:function(){return this.$store.state.map.webMapUrlLayer},webMapActiveLayers:function(){return this.$store.state.map.webMapActiveLayers},webMapDisplayedLayers:function(){return this.$store.state.map.webMapDisplayedLayers},webMapGeoJson:function(){return this.$store.state.map.webMapGeoJson}},methods:{trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},checkboxToggle:function(e){console.log("checkboxToggle",e.target,e.target.id,e.target.checked);var t=this.webMapUrlLayer,i=this.webMapActiveLayers,n=this.webMapDisplayedLayers,o=e.target.id.replace("checkbox-","");if(e.target.checked)console.log("target checked, targetReplace:",o),i.push(o),n.push(o),1===i.length&&this.$store.commit("setWebMapUrlLayer",o);else{console.log("target not checked");var r=i.indexOf(o);r>=0&&i.splice(r,1);var a=n.indexOf(o);a>=0&&n.splice(a,1),t===o&&this.$store.commit("setWebMapUrlLayer",null)}this.$store.commit("setWebMapActiveLayers",i),this.$store.commit("setWebMapDisplayedLayers",n)},removeFromWebMapDisplayedLayers:function(){var e=this.webMapDisplayedLayers,t=e.indexOf(this.$props.layerName);t>=0&&e.splice(t,1),this.$store.commit("setWebMapDisplayedLayers",e)},addToWebMapDisplayedLayers:function(){var e=this.webMapDisplayedLayers;e.push(this.$props.layerName),this.$store.commit("setWebMapDisplayedLayers",e)}}};function Q(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ee=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},te="object"==typeof ee&&ee&&ee.Object===Object&&ee,ie="object"==typeof self&&self&&self.Object===Object&&self,ne=te||ie||Function("return this")(),oe=function(){return ne.Date.now()},re=ne.Symbol,ae=Object.prototype,se=ae.hasOwnProperty,le=ae.toString,ce=re?re.toStringTag:void 0,ue=Object.prototype.toString,pe="[object Null]",de="[object Undefined]",he=re?re.toStringTag:void 0;function fe(e){return null==e?void 0===e?de:pe:he&&he in Object(e)?function(e){var t=se.call(e,ce),i=e[ce];try{e[ce]=void 0}catch(e){}var n=le.call(e);return t?e[ce]=i:delete e[ce],n}(e):function(e){return ue.call(e)}(e)}var me="[object Symbol]",ye=NaN,ge=/^\s+|\s+$/g,ve=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,_e=/^0o[0-7]+$/i,xe=parseInt;function we(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&fe(e)==me}(e))return ye;if(Q(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Q(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ge,"");var i=be.test(e);return i||_e.test(e)?xe(e.slice(2),i?2:8):ve.test(e)?ye:+e}var Ce="Expected a function",Se=Math.max,Me=Math.min;!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .pvm-search-control-form[data-v-08f7f6d2] { display: inline-block; } /* Container */ .pvm-search-control-container[data-v-08f7f6d2] { display: inline-block; border-radius: 2px; box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02); width: 305px; } .pvm-container-non-mobile[data-v-08f7f6d2] { height: 48px; } .pvm-container-mobile[data-v-08f7f6d2] { height: 38px; } /* Input */ .pvm-search-control-input[data-v-08f7f6d2] { display: inline-block; border: 0; padding: 15px; font-family: 'Montserrat', 'Tahoma', sans-serif; font-size: 16px; width: 250px; } .pvm-input-non-mobile[data-v-08f7f6d2] { height: 48px; } .pvm-input-mobile[data-v-08f7f6d2] { height: 38px; } /* Button */ .pvm-search-control-button[data-v-08f7f6d2] { display: inline-block; color: #fff; background: #2176d2; padding: 0px; width: 50px; } .pvm-button-non-mobile[data-v-08f7f6d2] { height: 48px; line-height: 48px; } .pvm-button-mobile[data-v-08f7f6d2] { height: 38px; line-height: 38px; padding-top: 1px; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"pvm-search-control-container "+this.containerClass,style:this.containerStyle},[i("form",{staticClass:"pvm-search-control-form",attrs:{autocomplete:"off",id:"search-form"},on:{submit:function(t){return t.preventDefault(),e.handleSearchFormSubmit(t)}}},[i("input",{class:"pvm-search-control-input "+this.inputClass,style:this.inputStyle,attrs:{id:e.inputID,placeholder:this.$props.placeholder||"Search the map",tabindex:"0"},domProps:{value:this.addressEntered},on:{keyup:e.didType}})]),e._v(" "),""!=this.addressEntered&&null!=this.addressEntered?i("button",{class:"pvm-search-control-button "+this.buttonClass,on:{click:e.handleFormX}},[i("font-awesome-icon",{attrs:{icon:"times"}})],1):e._e(),e._v(" "),i("button",{class:"pvm-search-control-button "+this.buttonClass,attrs:{name:"pvm-search-control-button",tabindex:"-1"},on:{click:this.handleSearchFormSubmit}},[i("font-awesome-icon",{attrs:{icon:"search"}})],1),e._v(" "),e._t("address-candidates-slot")],2)},staticRenderFns:[],_scopeId:"data-v-08f7f6d2",name:"MapAddressInput",props:["position","widthFromConfig","placeholder"],data:function(){var e={containerStyle:{width:"305px"},inputStyle:{width:"250px"},inputID:U(),addressEntered:null};return e},created:function(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()},watch:{addressEntered:function(e){this.handleWindowResize()}},computed:{map:function(){return this.$store.state.map.map},inputWidth:function(){return""===this.addressEntered||null===this.addressEntered?this.$props.widthFromConfig-55:this.$props.widthFromConfig-108},inputClass:function(){return this.isMobileOrTablet?"pvm-input-mobile":"pvm-input-non-mobile"},containerClass:function(){return this.isMobileOrTablet?"pvm-container-mobile":"pvm-container-non-mobile"},buttonClass:function(){return this.isMobileOrTablet?"pvm-button-mobile":"pvm-button-non-mobile"},addressAutocompleteEnabled:function(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet}},methods:{createLeafletElement:function(e){return new(function(t){function i(e,i){t.call(this,i),this.el=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(){var t=this.el;return e.DomEvent.disableClickPropagation(t),e.DomEvent.disableScrollPropagation(t),t},i}(e.Control))(this.$el,{position:this.position})},parentMounted:function(e,t){var i=this.createLeafletElement(c);this.$leafletElement=i;var n=this.map;i.addTo(n)},didType:function(e,t,i){var n,o,r,a,s,l,c=0,u=!1,p=!1,d=!0;if("function"!=typeof e)throw new TypeError(Ce);function h(t){var i=n,r=o;return n=o=void 0,c=t,a=e.apply(r,i)}function f(e){var i=e-l;return void 0===l||i>=t||i<0||p&&e-c>=r}function m(){var e=oe();if(f(e))return y(e);s=setTimeout(m,function(e){var i=t-(e-l);return p?Me(i,r-(e-c)):i}(e))}function y(e){return s=void 0,d&&n?h(e):(n=o=void 0,a)}function g(){var e=oe(),i=f(e);if(n=arguments,o=this,l=e,i){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?h(e):a}(l);if(p)return s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=we(t)||0,Q(i)&&(u=!!i.leading,r=(p="maxWait"in i)?Se(we(i.maxWait)||0,t):r,d="trailing"in i?!!i.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=o=s=void 0},g.flush=function(){return void 0===s?a:y(oe())},g}(function(e){var t=e.target.value;if(this.$data.addressEntered=t,this.addressAutocompleteEnabled){if("ArrowDown"===e.key)return void document.getElementById("address-candidate-list-0").focus();this.getCandidates(t),"Enter"!==e.key&&this.$store.commit("setShouldShowAddressCandidateList",!0)}},300),getCandidates:function(e){l.get("https://cqvfg1pm72.execute-api.us-east-1.amazonaws.com/dev/first-api-test/",{params:{address:e}}).then(this.didGetCandidates).catch(this.didGetCandidatesError)},didGetCandidates:function(e){var t=e.data.matches.map(function(e){return e.address});this.$store.commit("setCandidates",t)},didGetCandidatesError:function(e){console.log("error getting candidates",e),this.$store.commit("setCandidates",[])},handleFormX:function(){console.log("handleFormX is running"),this.$data.addressEntered="",this.$store.commit("setShouldShowAddressCandidateList",!1),this.$store.commit("setCandidates",[])},handleSearchFormSubmit:function(){var e;console.log("handleSearchFormSubmit is running"),e=this.addressAutocompleteEnabled?addressEntered:document.querySelector("#"+this.$data.inputID.toString()).value,this.$controller.handleSearchFormSubmit(e)},handleWindowResize:function(){var e=this.addressEntered;window.innerWidth>=850?(this.containerStyle.width=this.$props.widthFromConfig+"px",this.inputStyle.width=""===e||null===e?this.$props.widthFromConfig-55+"px":this.$props.widthFromConfig-108+"px"):window.innerWidth>=750?(this.containerStyle.width=this.$props.widthFromConfig-100+"px",this.inputStyle.width=""===e||null===e?this.$props.widthFromConfig-155+"px":this.$props.widthFromConfig-208+"px"):(this.containerStyle.width="300px",this.inputStyle.width=""===e||null===e?"245px":"192px")}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .list-group[data-v-01ba1c49] { height: 300px; width: 250px; overflow: auto; margin-top: 1px !important; } .list-group-full[data-v-01ba1c49] { height: 300px; width: 197px; overflow: auto; margin-top: 1px !important; } .list-group-mobile[data-v-01ba1c49] { height: 300px; width: 250px; overflow: auto; margin-top: 1px !important; } .list-group-mobile-full[data-v-01ba1c49] { height: 300px; width: 197px; overflow: auto; margin-top: 1px !important; } ul[data-v-01ba1c49] { list-style-type: none; margin-left: 0px; } .list-group-item[data-v-01ba1c49] { /* width: 237px; */ display: block; border-radius: 2px; box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02); border: 2; background-color: white; padding-top: 10px; padding-bottom: 10px; padding-left: 10px; font-family: 'Montserrat', 'Tahoma', sans-serif; font-size: 14px; font-weight: normal; } .list-group-item[data-v-01ba1c49]:hover { background-color: #ffefa2; font-weight: bold; } /*small*/ @media screen and (max-width: 39.9375em) { .list-group[data-v-01ba1c49] { width: 200px; } .list-group-mobile[data-v-01ba1c49] { width: 200px; } .list-group-full[data-v-01ba1c49] { width: 147px; } .list-group-mobile-full[data-v-01ba1c49] { width: 158px; } } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var ke={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:this.shouldShowAddressCandidateList,expression:"this.shouldShowAddressCandidateList"}],class:this.listGroupClass},[i("ul",e._l(e.candidates,function(t,n){return i("li",[i("a",{staticClass:"list-group-item",attrs:{href:e.createLink(t),tabindex:"-1",id:"address-candidate-list-"+n},on:{click:function(i){return e.closeAddressCandidateList(t)},keydown:e.maybeUsedArrow}},[e._v(" "+e._s(t)+" ")])])}),0)])},staticRenderFns:[],_scopeId:"data-v-01ba1c49",name:"MapAddressCandidateList",props:["position"],computed:{map:function(){return this.$store.state.map.map},candidates:function(){return this.$store.state.candidates},shouldShowAddressCandidateList:function(){return this.$store.state.shouldShowAddressCandidateList},activeTopic:function(){return this.$store.state.activeTopic},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},listGroupClass:function(){return this.isMobileOrTablet?this.addressAutocompleteEnabled?""===this.addressEntered||null===this.addressEntered?"list-group-mobile":"list-group-mobile-full":"list-group-mobile":this.addressAutocompleteEnabled?""===this.addressEntered||null===this.addressEntered?"list-group":"list-group-full":"list-group"},addressAutocompleteEnabled:function(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled}},watch:{shouldShowAddressCandidateList:function(e){!0===e&&this.createControl()}},methods:{createLink:function(e){return this.$store.state.activeTopic?"#/"+e+"/"+this.activeTopic:"#/"+e},createLeafletElement:function(e){return new(function(t){function i(e,i){t.call(this,i),this.el=e}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(){var t=this.el;return e.DomEvent.disableClickPropagation(t),e.DomEvent.disableScrollPropagation(t),t},i}(e.Control))(this.$el,{position:this.position})},createControl:function(){var e=this.createLeafletElement(c);this.$leafletElement=e;var t=this.map;e.addTo(t)},parentMounted:function(e,t){},maybeUsedArrow:function(e){var t,i,n=e.target.id,o=parseInt(n.substring(n.lastIndexOf("-")+1));t=o<this.candidates.length-1?o+1:o,i=0!==o?o-1:0,"ArrowDown"===e.key&&document.getElementById("address-candidate-list-"+t).focus(),"ArrowUp"===e.key&&document.getElementById("address-candidate-list-"+i).focus()},closeAddressCandidateList:function(e){this.$store.commit("setAddressEntered",e),this.$store.commit("setShouldShowAddressCandidateList",!1)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /* .fa-lg { vertical-align: -10%; } */ ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var $e={_scopeId:"data-v-106712ed",name:"VectorMarker",props:["latlng","markerColor","icon"],render:function(e){this.$props.latlng},mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},updated:function(){this.$leafletElement._map.removeLayer(this.$leafletElement);var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},methods:{createLeafletElement:function(){var e=new a({icon:this.$props.icon||"circle",markerColor:this.$props.markerColor||"#2176d2"});return new c.Marker(this.latlng,{icon:e})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var Te={name:"PngMarker",props:["icon","latlng","rotationAngle"],render:function(e){},mounted:function(){var e=c.Marker.prototype._initIcon,t=c.Marker.prototype._setPos,i="msTransform"===c.DomUtil.TRANSFORM;c.Marker.addInitHook(function(){var e=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;e&&(e=e[0]+"px "+e[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||e||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(e){e.target._applyRotation()})}),c.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(e){t.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[c.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[c.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[c.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}});var n=this.$leafletElement=this.createLeafletElement(),o=this.$store.state.map.map;o&&n.addTo(o)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},watch:{rotationAngle:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)},latlng:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)}},methods:{createLeafletElement:function(){var e=c.icon({iconUrl:this.icon,iconSize:[26,16],iconAnchor:[11,8]});return c.marker(this.latlng,{icon:e,rotationAngle:this.rotationAngle})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .button-image[data-v-24c2c164] { vertical-align: top; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Le=P.methods,Ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[t("button",{on:{click:this.handleImageryToggleButtonClick}},[t("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[t("img",{staticClass:"button-image",attrs:{src:this.toggleButtonImgSrc}})])])])},staticRenderFns:[],_scopeId:"data-v-24c2c164",name:"BasemapToggleControl",props:["position"],computed:{toggleButtonImgSrc:function(){return this.$store.state.map.shouldShowImagery?"images/basemap_small.png":"images/imagery_small.png"}},methods:Object.assign(Le,{handleImageryToggleButtonClick:function(e){var t=!this.$store.state.map.shouldShowImagery;this.$store.commit("setShouldShowImagery",t)}})};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /*# sourceMappingURL=BasemapSelectControl.vue.map */";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Pe=P.methods,Oe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.shouldShowImagery,expression:"shouldShowImagery"}]},[i("select",{attrs:{id:"year-select"},on:{change:e.handleImageryChange}},e._l(e.imageryTypes,function(t,n){return i("optgroup",{attrs:{label:t.label}},e._l(e.basemapsForImageryType(n),function(t){return i("option",{attrs:{"data-key":t.key}},[e._v(" "+e._s(t.label)+" ")])}),0)}),0)])},staticRenderFns:[],_scopeId:"data-v-48c5e6b4",name:"BasemapSelectControl",props:["position"],computed:{shouldShowImagery:function(){return this.$store.state.map.shouldShowImagery},imageryTypes:function(){return this.$config.map.imageryTypes},currentImagery:function(){return this.$store.state.map.imagery}},watch:{currentImagery:function(e){var t=e.replace(/\D/g,"");document.getElementById("year-select").value=t}},methods:Object.assign(Pe,{handleImageryChange:function(){var e=document.getElementById("year-select"),t=e.options[e.selectedIndex].parentElement.label,i=e.options[e.selectedIndex].value,n=t.toLowerCase()+i;this.$store.commit("setImagery",n)},basemapsForImageryType:function(e){for(var t=this.$config.map.basemaps,i=[],n=0,o=Object.keys(t);n<o.length;n+=1){var r=t[o[n]],a=r.type;if(a===e){var s=r.label;i.push({type:a,label:s})}}return i}})};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /* .toggle-tab { position: absolute; left: 0px; border-width: 1.3px; border-color: #CAC9C9; height: 48px; line-height: 58px; width:24px; background-color: white; display: inline-block; z-index: 500; */ /* border-left-style: solid; */ /* box-shadow: 2px 2px 7px grey; */ /* } */ .toggle-tab[data-v-10e5c930] { display: none; } .align-span[data-v-10e5c930] { margin-left: 6px; } @media screen and (min-width: 46.875em) { .toggle-tab[data-v-10e5c930] { position: absolute; left: 0px; border-width: 1.3px; border-style: solid; border-color: #CAC9C9; height: 48px; line-height: 56px; width:24px; background-color: white; display: inline-block; z-index: 500; opacity: 0.7; /* border-left-style: solid; */ /* box-shadow: 2px 2px 7px grey; */ } } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Ne={render:function(){var e=this.$createElement,t=this._self._c||e;return this.isMobileOrTablet?this._e():t("div",{staticClass:"toggle-tab",style:{top:this.buttonPosition},attrs:{id:"toggle-tab"},on:{click:this.handleFullScreenMapToggleButtonClick}},[t("span",{staticClass:"align-span"},[t("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:this.currentIcon}})],1)])},staticRenderFns:[],_scopeId:"data-v-10e5c930",name:"FullScreenMapToggleTab",data:function(){return{divHeight:0,buttonPosition:0}},mounted:function(){window.addEventListener("resize",this.setDivHeight),this.setDivHeight()},computed:{fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled:function(){return this.$store.state.fullScreenTopicsEnabled},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictometryActive:function(){return this.$store.state.pictometry.active},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},currentIcon:function(){return this.fullScreenMapEnabled?"caret-right":"caret-left"}},watch:{picOrCycloActive:function(e){this.setDivHeight()},fullScreenTopicsEnabled:function(){this.setDivHeight()}},methods:{setDivHeight:function(){var e=document.getElementById("map-tag"),t=window.getComputedStyle(e),i=parseFloat(t.getPropertyValue("height").replace("px",""));this.buttonPosition=(i-48)/2+"px"},handleFullScreenMapToggleButtonClick:function(e){var t=!this.$store.state.fullScreenMapEnabled;this.$store.commit("setFullScreenMapEnabled",t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .toggle-tab[data-v-78e67c74] { display: none; } .align-span[data-v-78e67c74] { margin-left: 14px; } @media screen and (min-width: 46.875em) { .toggle-tab[data-v-78e67c74] { position: absolute; bottom: 0px; border-width: 1.3px; border-style: solid; border-color: #CAC9C9; height: 24px; line-height: 16px; width:48px; background-color: white; display: inline-block; z-index: 500; opacity: 0.7; /* border-left-style: solid; */ /* box-shadow: 2px 2px 7px grey; */ } } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Fe={render:function(){var e=this.$createElement,t=this._self._c||e;return this.isMobileOrTablet?this._e():t("div",{staticClass:"toggle-tab",style:{left:this.buttonPosition},attrs:{id:"toggle-tab"},on:{click:this.handleFullScreenMapToggleButtonClick}},[t("span",{staticClass:"align-span"},[t("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:this.currentIcon}})],1)])},staticRenderFns:[],_scopeId:"data-v-78e67c74",name:"FullScreenMapToggleTabVertical",data:function(){return{divWidth:0,buttonPosition:0}},mounted:function(){window.addEventListener("resize",this.setDivWidth),this.setDivWidth()},computed:{fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled:function(){return this.$store.state.fullScreenTopicsEnabled},isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictometryActive:function(){return this.$store.state.pictometry.active},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},currentIcon:function(){return this.fullScreenMapEnabled?"caret-up":"caret-down"}},watch:{fullScreenTopicsEnabled:function(){this.setDivWidth()}},methods:{setDivWidth:function(){var e=document.getElementById("map-tag"),t=window.getComputedStyle(e),i=parseFloat(t.getPropertyValue("width").replace("px",""));this.buttonPosition=(i-48)/2+"px"},handleFullScreenMapToggleButtonClick:function(e){var t=!this.$store.state.fullScreenMapEnabled;this.$store.commit("setFullScreenMapEnabled",t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /*# sourceMappingURL=LocationControl.vue.map */";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Ae=P.methods,De={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[t("button",{on:{click:this.handleLocationButtonClick}},[t("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[t("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:["far","dot-circle"]}})],1)])])},staticRenderFns:[],_scopeId:"data-v-15e73008",name:"LocationControl",props:["position"],data:function(){return{locationOn:!1}},methods:Object.assign(Ae,{handleLocationButtonClick:function(e){this.$store.state.map.watchPositionOn?this.moveToPosition():(this.$store.commit("setWatchPositionOn",!0),navigator.geolocation.watchPosition(this.geofindSuccess,this.geofindError,{enableHighAccuracy:!0,timeout:1e3,maximumAge:0,distanceFilter:5}))},geofindSuccess:function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};this.$store.commit("setLocation",t),this.locationOn||(this.moveToPosition(),this.locationOn=!0)},moveToPosition:function(){var e=this.$store.state.map.map,t=this.$store.state.map.location;e.setView([t.lat,t.lng],19)},geofindError:function(){console.log("GeofindError")}})};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" /*# sourceMappingURL=MeasureControl.vue.map */";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var je={name:"MeasureControl",props:["position"],mounted:function(){this.$leafletElement=this.createLeafletElement()},destroyed:function(){this.$leafletElement._map.removeControl(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){var e=this.$props.position;return new s({position:e,primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet"})},parentMounted:function(e){e.$leafletElement.addControl(this.$leafletElement)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .legend { display: inline-block; padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,1); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; line-height: 18px; color: #555; } .legend-box { display: inline-block; width: 18px; height: 18px; opacity: 1; vertical-align: middle; margin-right: 4px; } .list-text { display: inline-block; vertical-align: middle; } .legend-list { list-style: none; padding-top: 2px; padding-left: 2px; margin-left: 0px; /*override standards*/ margin-bottom: 0; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var ze=P.methods,Be={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:this.shouldShowLegend,expression:"this.shouldShowLegend"}]},[i("div",{staticClass:"legend"},[i("ul",{staticClass:"legend-list"},e._l(this.keys,function(t){return i("li",{staticClass:"legend-listitem",style:"font-size:"+e.items[t]["font-size"]+";"},[i("div",{staticClass:"legend-box",style:"background-color:"+e.items[t]["background-color"]+"; border-color:"+e.items[t]["border-color"]+"; border-style:"+e.items[t]["border-style"]+"; border-width:"+e.items[t]["border-weight"]+"; width:"+e.items[t].width+"; height:"+e.items[t].height+";"}),e._v(" "),i("div",{staticClass:"list-text"},[e._v(" "+e._s(t)+" ")])])}),0)])])},staticRenderFns:[],name:"LegendControl",props:["position","options","items"],computed:{keys:function(){return Object.keys(this.$props.items)},activeTopic:function(){return this.$store.state.activeTopic},shouldShowImagery:function(){return this.$store.state.map.shouldShowImagery},shouldShowLegend:function(){var e=!0;return this.$props.options.topics.includes(this.activeTopic)||(e=!1),this.$props.options.showWithBaseMapOnly&&this.shouldShowImagery&&(e=!1),e}},methods:Object.assign(ze)};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .basetooltip { width: 32px; height: 32px; padding: 5px 13px; font: 20px/22px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,1); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .basetooltip2 { float: right; width: 80%; height: 32px; padding: 3px 10px; padding-right: 40px; font: 12px/14px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,1); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .basetooltip a { color: black } .basetooltip2 a { color: black } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Re=P.methods,Ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{class:"none"===this.basemap?"basetooltip":"basetooltip2",on:{mouseover:this.onMouseover,mouseout:this.onMouseout}},["pwd"===this.basemap?t("div",[this._v(" The property boundaries displayed on the map are for reference only and may not be used in place of recorded deeds or land surveys. Boundaries are generalized for ease of visualization. Source: Philadelphia Water ")]):"dor"===this.basemap?t("div",[this._v(" The property boundaries displayed on the map are for reference only and may not be used in place of recorded deeds or land surveys. Dimension lengths are calculated using the GIS feature. Source: Department of Records. ")]):t("div",[this._v(" i ")])])])},staticRenderFns:[],name:"BasemapTooltip",props:["position"],data:function(){return{basemap:"none"}},computed:{activeBasemap:function(){return this.$store.state.map.basemap},activeTopic:function(){return this.$store.state.activeTopic}},methods:Object.assign(Re,{onMouseover:function(){var e=this.activeBasemap,t=e;(e.includes("imagery")||e.includes("historic"))&&(t="deeds"===this.activeTopic||"zoning"===this.activeTopic?"dor":"pwd"),this.basemap=t},onMouseout:function(){this.basemap="none"}})};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=' /* <style lang="scss" scoped> */ .icon-div[data-v-0ccfd0f0] { margin: 10px; } .text-div[data-v-0ccfd0f0] { } .street-view-image[data-v-0ccfd0f0] { height: 40px; width: 73px; color: blue; } .openmaps-modal[data-v-0ccfd0f0] { color: rgb(15, 77, 144); width: 97%; height: 80%; padding: 20px; overflow: hidden; position: absolute; top: 70px; left: 10px; background: white; z-index:1000; opacity: 0.85; } /* .modal-content { overflow-y: auto; } */ .openmaps-modal.openmaps-modal--open[data-v-0ccfd0f0]{ z-index:1000; /* border-left: 3px solid color(ghost-gray); */ opacity: 1; } .openmaps-modal-content[data-v-0ccfd0f0]{ width: 95%; height: 85%; margin: 20px auto; overflow-y: auto; } .openmaps-modal-close[data-v-0ccfd0f0]{ position: absolute; top:15px; left:15px; background: white; height: 30px; width: 30px; } /* @include breakpoint(medium down) { .openmaps-modal{ position:fixed; width: 100%; height:calc(100vh - #{$header-height-mobile}); left:0; top: $header-height-mobile; background: $white; padding:10%; } .openmaps-modal-content{ width: 100%; } .openmaps-modal-close{ position: absolute; top:15px; left:15px; } } */ ';t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Ge={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{directives:[{name:"show",rawName:"v-show",value:"help"===e.modals.open,expression:"modals.open === 'help'"}],class:["openmaps-about","openmaps-modal"]},[i("div",{staticClass:"openmaps-modal-close",on:{click:e.closeModal}},[i("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[i("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:"times","aria-hidden":"true"}})],1)]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"openmaps-modal-content"},[i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".openmaps-category-card")},mouseleave:function(t){return e.removeHighlight(".openmaps-category-card")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:"filter","aria-hidden":"true"}})],1)]),e._v(" "),e._m(1)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".label-text")},mouseleave:function(t){return e.removeHighlight(".label-text")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:"check-square","aria-hidden":"true"}})],1)]),e._v(" "),e._m(2)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".label-text")},mouseleave:function(t){return e.removeHighlight(".label-text")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:["fal","square"],"aria-hidden":"true"}})],1)]),e._v(" "),e._m(3)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".label-text")},mouseleave:function(t){return e.removeHighlight(".label-text")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:"map-marker-alt","aria-hidden":"true"}})],1)]),e._v(" "),e._m(4)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".openmaps-category-card")},mouseleave:function(t){return e.removeHighlight(".openmaps-category-card")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:"search","aria-hidden":"true"}})],1)]),e._v(" "),e._m(5)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".openmaps-category-card")},mouseleave:function(t){return e.removeHighlight(".openmaps-category-card")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("img",{staticClass:"street-view-image",attrs:{src:"images/cyclomedia_blue.png"}})])]),e._v(" "),e._m(6)]),e._v(" "),i("div",{staticClass:"tour-tip",on:{mouseover:function(t){return e.highlight(".openmaps-category-card")},mouseleave:function(t){return e.removeHighlight(".openmaps-category-card")}}},[i("div",{staticClass:"icon-div"},[i("span",[i("font-awesome-icon",{staticClass:"fa-3x",attrs:{icon:"info-circle","aria-hidden":"true"}})],1)]),e._v(" "),e._m(7)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"text-center"},[t("b",[this._v("How to use OpenMaps")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Filter the list of layers available in the left panel.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("Type in the box for the first filter to filter by text. Select a category from the second filter to filter by category.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Toggle on and off map layers by clicking on the checkboxes in the layer panel.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("You can toggle on as many layers as you want, and they will all show on the map.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("If a checkbox is grayed out, zoom in further on the map and it will become active.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("Many of the layers will not show when the map is zoomed out too far.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Click on any feature that appears on the map to get a popup with that feature's info.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("If you have turned on overlapping layers, you will be able to click through multiple popups of info.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Search for an address or intersection.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("The map will move to the location that you have searched")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Toggle on and off street view")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("Half of the map panel will be taken up by the street view. If you are zoomed in far enough, circles will appear along the streets in the map. Click on a circle to change the street view location to that point.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-div"},[t("p",{staticClass:"tour-tip__action"},[t("b",[this._v("Learn more about and download data.")])]),this._v(" "),t("p",{staticClass:"tour-tip__result text-nopad"},[this._v("Click this icon to be linked to the metadata page for any dataset.")])])}],_scopeId:"data-v-0ccfd0f0",name:"ModalAbout",computed:{shouldBeOpen:function(){return"help"===this.route},modals:function(){return this.$store.state.modals}},methods:{closeModal:function(){var e=window.location.hash.split("/").slice(1);console.log("firstLocArr:",e);var t=e.indexOf("help");e=e.slice(t+1,t+2),console.log("firstLocArr:",e);for(var i="#",n=0,o=e;n<o.length;n+=1){i=i+"/"+o[n]}window.location.hash=i},highlight:function(e){document.querySelectorAll(e)[0]},removeHighlight:function(e){document.querySelectorAll(e)[0]}}},We=function(e,t,i,n,o){void 0===n&&(n=3857),this.baseUrl=e,this.username=t,this.password=i,this.srid=n,this.proxy=o};We.prototype.getRecordings=function(e,t){var i=e.getSouthWest(),n=e.getNorthEast(),o='<wfs:GetFeature service="WFS" version="1.1.0" resultType="results" outputFormat="text/xml; subtype=gml/3.1.1" xmlns:wfs="http://www.opengis.net/wfs">\n\t\t\t\t\t\t\t\t\t\t\t<wfs:Query typeName="atlas:Recording" srsName="EPSG:'+this.srid+'" xmlns:atlas="http://www.cyclomedia.com/atlas">\n\t\t\t\t\t\t\t\t\t\t\t\t<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc">\n\t\t\t\t\t\t    \t\t\t\t\t<ogc:And>\n\t\t\t\t\t\t      \t\t\t\t\t<ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t        <gml:Envelope srsName="EPSG:'+this.srid+'" xmlns:gml="http://www.opengis.net/gml">\n\t\t\t\t\t\t\t\t\t\t\t          <gml:lowerCorner>'+i.lng+" "+i.lat+"</gml:lowerCorner>\n\t\t\t\t\t\t\t\t\t\t\t          <gml:upperCorner>"+n.lng+" "+n.lat+"</gml:upperCorner>\n\t\t\t\t\t\t\t\t\t\t\t        </gml:Envelope>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t      <ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t        <ogc:PropertyName>expiredAt</ogc:PropertyName>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t    </ogc:And>\n\t\t\t\t\t\t\t\t\t\t\t  </ogc:Filter>\n\t\t\t\t\t\t\t\t\t\t\t </wfs:Query>\n\t\t\t\t\t\t\t\t\t\t\t</wfs:GetFeature>",r=(this.proxy||"")+this.baseUrl;p.ajax({url:r,data:o,type:"POST",contentType:"text/xml",headers:{Authorization:"Basic "+window.btoa(this.username+":"+this.password)},success:function(e){console.log("got recordings",e);var i=e.getElementsByTagNameNS("*","Recording"),n=[].slice.call(i);if(n.length<1)console.log("no cyclomedia recordings for bounds");else{var o=n.map(function(e){var t=e.getElementsByTagNameNS("*","imageId")[0].firstChild.data,i=e.getElementsByTagNameNS("*","pos")[0].firstChild.data.split(" ").map(parseFloat);return{imageId:t,lng:i[0],lat:i[1]}});t(o)}},error:function(e,t,i){console.log(e.status),console.log(i)}})},function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .inactive[data-v-461b7da4] { background-color: #ffffff; } .inactive[data-v-461b7da4]:hover { background-color: #ffffff; } .active[data-v-461b7da4] { background-color: rgb(243, 198, 19); } .active[data-v-461b7da4]:hover { background-color: rgb(243, 198, 19); } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Je={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[i("button",{staticClass:"cyclomedia-button",class:this.cyclomediaActive,on:{click:function(t){return t.preventDefault(),e.handleButtonClick(t)}}},[i("span",{staticClass:"button-state"},[i("img",{staticClass:"button-image",attrs:{src:e.imgSrc}})])])])},staticRenderFns:[],_scopeId:"data-v-461b7da4",name:"CyclomediaButton",extends:P,props:["link","imgSrc"],created:function(){this.$cyclomediaRecordingsClient=new We(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326)},computed:{cyclomediaInitialized:function(){return this.$store.state.cyclomedia.initialized},cyclomediaActive:function(){return this.$store.state.cyclomedia.active?"active":"inactive"}},methods:{handleButtonClick:function(e){this.cyclomediaInitialized||this.$store.commit("setCyclomediaInitialized",!0);var t=!this.$store.state.cyclomedia.active;this.$store.commit("setCyclomediaActive",t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var Ue={name:"Circle",props:["latlng","size","color","weight"],mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t),T(this,this.$leafletElement,this._events)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},render:function(e){},methods:{createLeafletElement:function(){return new c.Circle(this.latlng,this.size,{color:this.color,weight:this.weight})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var He={name:"CyclomediaRecordingCircle",mixins:[Ue],props:["imageId"]},qe=c.DivIcon.extend({options:{circleText:"",className:"svg-icon",circleAnchor:null,circleColor:null,circleOpacity:null,circleFillColor:"rgb(255,255,255)",circleFillOpacity:null,circleRatio:.5,circleWeight:null,color:"rgb(0,102,255)",fillColor:null,fillOpacity:.4,fontColor:"rgb(0, 0, 0)",fontOpacity:"1",fontSize:null,iconAnchor:null,iconSize:c.point(32,48),opacity:1,popupAnchor:null,weight:2},initialize:function(e){(e=c.Util.setOptions(this,e)).circleAnchor||(e.circleAnchor=c.point(Number(e.iconSize.x)/2,Number(e.iconSize.x)/2)),e.circleColor||(e.circleColor=e.color),e.circleFillOpacity||(e.circleFillOpacity=e.opacity),e.circleOpacity||(e.circleOpacity=e.opacity),e.circleWeight||(e.circleWeight=e.weight),e.fillColor||(e.fillColor=e.color),e.fontSize||(e.fontSize=Number(e.iconSize.x/4)),e.iconAnchor||(e.iconAnchor=c.point(Number(e.iconSize.x)/2,Number(e.iconSize.y))),e.popupAnchor||(e.popupAnchor=c.point(0,-.75*e.iconSize.y));this._createPath(),this._createCircle();e.html=this._createSVG()},_createCircle:function(){var e=Number(this.options.circleAnchor.x),t=Number(this.options.circleAnchor.y),i=this.options.iconSize.x/2*Number(this.options.circleRatio),n=this.options.circleFillColor.replace("rgb(","rgba(").replace(")",","+this.options.circleFillOpacity+")"),o=this.options.circleColor.replace("rgb(","rgba(").replace(")",","+this.options.circleOpacity+")"),r=this.options.circleWeight;return'<circle class="'+(this.options.className+"-circle")+'" cx="'+e+'" cy="'+t+'" r="'+i+'" fill="'+n+'" stroke="'+o+'" stroke-width="'+r+'"/>'},_createPathDescription:function(){var e=Number(this.options.iconSize.y),t=Number(this.options.iconSize.x),i=Number(this.options.weight),n=i/2;return"M "+n+" "+t/2+" "+("L "+t/2+" "+(e-i)+" ")+("L "+(t-n)+" "+t/2+" ")+("A "+t/4+" "+t/4+" 0 0 0 "+n+" "+t/2+" Z")},_createPath:function(){var e=this._createPathDescription(),t=this.options.weight,i=this.options.color.replace("rgb(","rgba(").replace(")",","+this.options.opacity+")"),n=this.options.fillColor.replace("rgb(","rgba(").replace(")",","+this.options.fillOpacity+")");return'<path class="'+(this.options.className+"-path")+'" d="'+e+'" stroke-width="'+t+'" stroke="'+i+'" fill="'+n+'"/>'},_createSVG:function(){var e=this._createPath(),t=this._createCircle(),i=this._createText();return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="'+(this.options.className+"-svg")+'" style="'+("width:"+this.options.iconSize.x+"; height:"+this.options.iconSize.y+";")+'">'+e+t+i+"</svg>"},_createText:function(){var e=this.options.fontSize+"px",t=Number(this.options.fontSize),i=Number(this.options.iconSize.x)/2,n=i+.35*t,o=this.options.circleText;return'<text text-anchor="middle" x="'+i+'" y="'+n+'" style="font-size: '+e+'" fill="'+this.options.fontColor.replace("rgb(","rgba(").replace(")",","+this.options.fontOpacity+")")+'">'+o+"</text>"}}),Ze=qe.extend({initialize:function(e){e=c.Util.setOptions(this,e);var t=c.point(Number(e.iconSize.x)/2,Number(e.iconSize.y)/2);return e.circleAnchor=t,e.circleRatio=0,e.className=e.className+"-noClick",qe.prototype.initialize.call(this,e),e},_createPathDescription:function(){var e=Number(this.options.iconSize.y),t=Number(this.options.iconSize.x),i=Number(this.options.weight);return"M "+i+" 0 "+("L "+t/2+" "+(e-i)+" ")+("L "+(t-i)+" 0 Z")}});!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .svg-icon-noClick-svg { pointer-events: none; } .svg-icon-noClick { pointer-events: none; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Xe={name:"SvgViewConeMarker",props:["latlng","rotationAngle","hFov"],render:function(e){},mounted:function(){var e=this.$leafletElement=this.createLeafletElement(),t=this.$store.state.map.map;t&&e.addTo(t)},destroyed:function(){this.$leafletElement._map.removeLayer(this.$leafletElement)},watch:{rotationAngle:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)},latlng:function(e){this.$leafletElement._map.removeLayer(this.$leafletElement);var t=this.$leafletElement=this.createLeafletElement(),i=this.$store.state.map.map;i&&t.addTo(i)}},computed:{coneCoords:function(){var e=57.29577951307855*this.hFov/2,t=Math.sin(e*Math.PI/180),i=[50*t,50*Math.sqrt(1-t*t)];return i}},methods:{createLeafletElement:function(){this.coneCoords;var e=new Ze({iconSize:c.point(this.coneCoords[0],this.coneCoords[1]),iconAnchor:[this.coneCoords[0]/2,this.coneCoords[1]]});return c.marker(this.latlng,{icon:e,rotationAngle:this.rotationAngle})},parentMounted:function(e){var t=e.$leafletElement;this.$leafletElement.addTo(t)}}},Ye={name:"cyclomediaMixin",computed:{cyclomediaActive:function(){return this.$store.state.cyclomedia.active},cyclomediaRecordings:function(){return this.$store.state.cyclomedia.recordings}},methods:{handleCyclomediaButtonClick:function(){this.updateCyclomediaRecordings()},handleCyclomediaRecordingClick:function(e){var t=e.latlng;console.log("handleCyclomediaRecordingClick is running, latlng:",t),this.$store.commit("setCyclomediaLatLngFromMap",t)},updateCyclomediaRecordings:function(){var e=this,t=this.$store.state.map.map,i=t.getZoom();if(!this.$store.state.cyclomedia.active||i<=18)this.$store.commit("setCyclomediaRecordings",[]);else{var n=t.getBounds();this.$cyclomediaRecordingsClient.getRecordings(n,function(t){e.$store.commit("setCyclomediaRecordings",t)})}}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" #cyclo-container { padding: 0px; height: 50%; display: none; } @media screen and (min-width: 46.875em) { #cyclo-container { display: block; } } #inCycloDiv { /* position: absolute; */ position: absolute; /* top: 0px; */ right: 0px; /* float: right; */ background-color: white; border: 0px solid; width: 30px; height: 30px; cursor:pointer; z-index: 10; } .popout-icon { margin-top: 8.5px; font-size: 15px; margin-left: 8.5px; } .panoramaViewerWindow { display: block; width: 100%; height:100%; } @media screen and (max-width: 46.875em) { .cyclo-container { display: none; } } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Ke={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.cycloContainerClass,attrs:{id:"cyclo-container"}},[!1===this.isMobileOrTablet&&!0===this.popoutAble?t("div",{style:{right:this.popoutPosition},attrs:{id:"inCycloDiv"},on:{click:this.popoutClicked}},[t("font-awesome-icon",{staticClass:"popout-icon",attrs:{icon:"external-link"}})],1):this._e(),this._v(" "),t("div",{ref:"cycloviewer",staticClass:"panoramaViewerWindow",attrs:{id:"cycloviewer"}})])},staticRenderFns:[],name:"CyclomediaWidget",data:function(){return{docWidth:0,divWidth:0,popoutPosition:0}},props:["screenPercent"],computed:{isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},popoutAble:function(){return!1!==this.$config.cyclomedia.popoutAble},cyclomediaInitialized:function(){return this.$store.state.cyclomedia.initialized},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictometryActive:function(){return this.$store.state.pictometry.active},cycloContainerClass:function(){return this.pictometryActive?"medium-16 large-16 columns mb-panel":"medium-24 large-24 columns mb-panel"},locForCyclo:function(){var e=this.$store.state.geocode.data;this.$store.state.map.map;if(e)return[e.geometry.coordinates[1],e.geometry.coordinates[0]]},latLngFromMap:function(){return this.$store.state.cyclomedia.latLngFromMap},mapCenter:function(){return this.$store.state.map.center},navBarOpen:function(){return this.$store.state.cyclomedia.navBarOpen},projection4326:function(){return"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"},projection2272:function(){return"+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"}},watch:{fullScreenMapEnabled:function(){this.setDivWidth()},locForCyclo:function(e){e&&this.setNewLocation(e)},latLngFromMap:function(e){this.cyclomediaInitialized&&(Array.isArray(e)?this.setNewLocation([e[1],e[0]]):this.setNewLocation([e.lat,e.lng]))},cyclomediaInitialized:function(){var e=this;StreetSmartApi.init({targetElement:this.$refs.cycloviewer,username:this.$config.cyclomedia.username,password:this.$config.cyclomedia.password,apiKey:this.$config.cyclomedia.apiKey,srs:"EPSG:2272",locale:"en-us",addressSettings:{locale:"en-us",database:"CMDatabase"}}).then(function(){var t=e.$store.state.cyclomedia.latLngFromMap;e.setNewLocation([t[0],t[1]])},function(e){}),window.addEventListener("resize",this.setDivWidth)},cyclomediaActive:function(e){this.setDivWidth(),!0===e&&this.setNewLocation(this.latLngFromMap)}},updated:function(){this.cyclomediaActive&&window.panoramaViewer&&window.panoramaViewer.rotateRight(1e-7),this.setDivWidth()},methods:{setDivWidth:function(){var e=document.body.clientWidth;this.docWidth=e;var t,i=document.getElementById("cyclo-container"),n=window.getComputedStyle(i),o=parseFloat(n.getPropertyValue("width").replace("px",""));this.divWidth=o,t=this.fullScreenMapEnabled?e-o+"px":e-(e/this.$props.screenPercent+o)+"px",this.popoutPosition=t},setNewLocation:function(e){var t=StreetSmartApi.ViewerType.PANORAMA,i=u(this.projection4326,this.projection2272,[e[1],e[0]]);StreetSmartApi.open(i[0]+","+i[1],{viewerType:t,srs:"EPSG:2272",panoramaViewer:{closable:!1,maximizable:!1}}).then(function(e){var t=this;if(e){for(var i=0;i<e.length;i++)e[i].getType()===StreetSmartApi.ViewerType.PANORAMA&&(window.panoramaViewer=e[i]);t.sendOrientationToStore(),window.panoramaViewer.toggleNavbarExpanded(t.navBarOpen),window.panoramaViewer.toggleButtonEnabled("panorama.elevation",!1),window.panoramaViewer.toggleButtonEnabled("panorama.reportBlurring",!1);for(var n=0,o=window.panoramaViewer.props.overlays;n<o.length;n+=1){var r=o[n];"surfaceCursorLayer"===r.id&&!0===r.visible&&window.panoramaViewer.toggleOverlay(r)}this.$config.cyclomedia.measurementAllowed&&"false"!==this.$config.cyclomedia.measurementAllowed||(StreetSmartApi.removeOverlay("measurementLayer"),window.panoramaViewer.toggleButtonEnabled("panorama.measure",!1)),window.panoramaViewer.on("VIEW_CHANGE",function(){window.panoramaViewer.props.orientation.yaw!==t.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==t.$store.state.cyclomedia.orientation.xyz?t.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&t.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())}),window.panoramaViewer.on("VIEW_LOAD_END",function(){window.panoramaViewer.props.orientation.yaw!==t.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==t.$store.state.cyclomedia.orientation.xyz?t.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&t.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())})}}.bind(this)).catch(function(e){})},sendOrientationToStore:function(){this.$store.commit("setCyclomediaYaw",window.panoramaViewer.props.orientation.yaw),this.$store.commit("setCyclomediaHFov",window.panoramaViewer.props.orientation.hFov);var e=[window.panoramaViewer.props.orientation.xyz[0],window.panoramaViewer.props.orientation.xyz[1]],t=u(this.projection2272,this.projection4326,e);this.$store.commit("setCyclomediaXyz",t)},popoutClicked:function(){var e=this.$store.state.map.map.getCenter();window.open("//cyclomedia.phila.gov/?"+e.lat+"&"+e.lng,"_blank"),this.$store.commit("setCyclomediaActive",!1)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" .inactive[data-v-651e14cc] { background-color: #ffffff; } .inactive[data-v-651e14cc]:hover { background-color: #ffffff; } .active[data-v-651e14cc] { background-color: rgb(243, 198, 19); } .active[data-v-651e14cc]:hover { background-color: rgb(243, 198, 19); } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var Qe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[i("button",{class:this.pictometryActive,on:{click:function(t){return t.preventDefault(),e.handleButtonClick(t)}}},[i("span",{staticClass:"button-state"},[i("img",{staticClass:"button-image",attrs:{src:e.imgSrc}})])])])},staticRenderFns:[],_scopeId:"data-v-651e14cc",name:"PictometryButton",extends:P,props:["link","imgSrc"],computed:{pictometryActive:function(){return this.$store.state.pictometry.active?"active":"inactive"}},methods:{handleButtonClick:function(e){this.$store.commit("setPictometryActive",!this.$store.state.pictometry.active)}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var et={name:"PictometryPngMarker",props:["icon","latlng","height","width"],render:function(e){},computed:{ipa:function(){return this.$store.state.pictometry.ipa}},mounted:function(){this.placeMarker(this.$props.latlng)},beforeDestroy:function(){this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds)},watch:{latlng:function(e){this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds),this.placeMarker(e)}},methods:{constructLocalUrl:function(e,t,i){return"https:"===window.location.protocol?"https://"+e+t+i:"http://"+e+t+i},placeMarker:function(e){var t,i=window.location.port;t=""!=i?window.location.hostname+":"+i:window.location.hostname;var n={type:this.ipa.SHAPE_TYPE.MARKER,center:{y:e[0],x:e[1]},markerImageHeight:this.$props.height,markerImageWidth:this.$props.width,markerOffsetX:this.$props.offsetX,markerOffsetY:this.$props.offsetY,markerImage:this.constructLocalUrl(t,"/",this.$props.icon),onShapeClick:"true"};this.ipa.addShapes([n],this.didAddShapes)},didAddShapes:function(e){for(var t=0;t<e.length;t++){if("false"===e[t].success)console.log(e[t].error);else this.$store.state.pictometry.pngMarkerIds.push(e[t].shapeId)}}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var tt={name:"PictometryViewCone",props:["latlng","rotationAngle","hFov"],render:function(e){},computed:{ipa:function(){return this.$store.state.pictometry.ipa},zoom:function(){return this.$store.state.pictometry.zoom},radius:function(){return{17:75,18:50,19:25,20:15,21:10,22:10,23:10,24:10}[this.zoom]}},mounted:function(){this.getViewConeLatLon()},beforeDestroy:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds)},watch:{radius:function(e){this.getViewConeLatLon()},rotationAngle:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds),this.getViewConeLatLon()},latlng:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds),this.getViewConeLatLon()}},methods:{getViewConeLatLon:function(){var e=this.latlng[0],t=this.latlng[1],i=6378137,n=this.radius,o=this.rotationAngle,r=180*parseFloat(this.hFov)/Math.PI,a=Math.cos((o+r/2)*Math.PI/180)*n,s=Math.sin((o+r/2)*Math.PI/180)*n,l=Math.cos((o-r/2)*Math.PI/180)*n,c=Math.sin((o-r/2)*Math.PI/180)*n,u=a/i,p=s/(i*Math.cos(Math.PI*e/180)),d=l/i,h=c/(i*Math.cos(Math.PI*e/180)),f=[{y:e,x:t,z:0},{y:e+180*u/Math.PI,x:t+180*p/Math.PI,z:0},{y:e+180*d/Math.PI,x:t+180*h/Math.PI,z:0}];this.placeViewCone(f)},placeViewCone:function(e){var t=this,i={type:this.ipa.SHAPE_TYPE.POLYGON,coordinates:e,strokeColor:"#00a0ee",strokeOpacity:.75,strokeWeight:2,fillColor:"#00a0ee",fillOpacity:.25,altitudeMode:this.ipa.ALTITUDE_MODE.RELATIVE_TO_GROUND};this.ipa.addShapes([i],function(e){for(var i=0;i<e.length;i++)if("false"===e[i].success)alert(e[i].error);else{var n=t.$store.state.pictometry.shapeIds;n.push(e[i].shapeId);n.slice(0,-1);t.ipa.removeShapes(n.slice(0,-1))}})}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),i=" header.site-header > .row[data-v-b47b60a8]:last-of-type { background: #2176d2; } #in-pict-div[data-v-b47b60a8] { position: absolute; top: 0px; right: 0px; background-color: white; border: 0px solid; width: 30px; height: 30px; cursor:pointer; /* float: right; */ /*display:none;*/ /*z-index: 2000000;*/ /*position: relative; top: 0px; right: 0px;*/ } .popout-icon[data-v-b47b60a8] { margin-top: 8.5px; font-size: 15px; margin-left: 8.5px; } #pict-container[data-v-b47b60a8] { padding: 0px; height: 50%; position: relative; display: none; } @media screen and (min-width: 46.875em) { #pict-container[data-v-b47b60a8] { display: block; } } /*#iframe-div { }*/ #pictometry-ipa[data-v-b47b60a8] { height: 100%; width: 100%; border: 0px; } #search-container[data-v-b47b60a8] { float: right; } #search-input[data-v-b47b60a8] { float: left; width: 400px; } #search-button[data-v-b47b60a8] { height: 2.78571rem; } #data-panel[data-v-b47b60a8] { background: #fff; padding-left: 12px; padding-right: 12px; height: 100%; } #data-panel > h1[data-v-b47b60a8] { color: #666; } #data-row-list > a[data-v-b47b60a8] { background: #f5f5f5; border: 1px solid #ddd; display: block; font-size: 18px; font-weight: normal; height: 70px; line-height: 45px; /*margin-left: 10px;*/ /*margin-right: 10px;*/ padding: 10px; /*vertical-align: middle;*/ /*text-align: middle;*/ box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); margin-bottom: 8px; } #data-row-list > a[data-v-b47b60a8]:hover { background: #fff; color: inherit; } #data-row-list .data-row-link-icon[data-v-b47b60a8] { padding-right: 30px; } .data-row[data-v-b47b60a8] { padding: 10px; margin-bottom: 10px; display: none; } .data-row table th[data-v-b47b60a8], .data-row table td[data-v-b47b60a8] { font-size: 15px; margin-left: 8.5px; } #pict-container[data-v-b47b60a8] { padding: 0px; height: 50%; position: relative; } /*#iframe-div { }*/ ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i)),e.appendChild(t)}}();var it={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.pictContainerClass,attrs:{id:"pict-container"}},[!1===this.isMobileOrTablet?t("div",{attrs:{id:"in-pict-div"},on:{click:this.popoutClicked}},[t("font-awesome-icon",{staticClass:"popout-icon",attrs:{icon:"external-link"}})],1):this._e(),this._v(" "),t("iframe",{ref:"pictometryIpa",attrs:{id:"pictometry-ipa",src:"#"}}),this._v(" "),t("div",[this._t("default")],2)])},staticRenderFns:[],_scopeId:"data-v-b47b60a8",name:"PictometryWidget",props:["apiKey","secretKey"],created:function(){this.$IFRAME_ID="pictometry-ipa"},mounted:function(){var e="https://pol.pictometry.com/ipa/v1/embed/host.php?apikey="+this.apiKey;p.getScript(e,this.init)},computed:{isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictContainerClass:function(){return this.cyclomediaActive?"medium-8 large-8 columns mb-panel":"medium-24 large-24 columns mb-panel"},mapCenter:function(){return this.$store.state.pictometry.map.center},mapZoom:function(){return this.$store.state.pictometry.map.zoom}},watch:{mapCenter:function(e){var t=e[0],i=e[1],n=this.mapZoom;this.$ipa&&this.$ipa.setLocation({x:t,y:i,zoom:n})},mapZoom:function(e){this.$ipa&&this.$ipa.setLocation({y:this.mapCenter.lat,x:this.mapCenter.lng,zoom:e})},cyclomediaActive:function(e){e?this.$ipa.showDashboard({zoom:!1,imageFilter:!1,layers:!1,nextPrevious:!1,tools:!1,annotations:!1,rotation:!1,clearMeasurements:!1,exportPdf:!1,dualPane:!1,imageDate:!1,panTool:!1,exportImage:!1,areaTool:!1,distanceTool:!1,heightTool:!1,locationTool:!1,elevationTool:!1,bearingTool:!1,slopeTool:!1,xyzTool:!1,identifyPoint:!1,identifyBox:!1}):this.$ipa.showDashboard({zoom:!0,imageFilter:!0,layers:!0,nextPrevious:!0,tools:!0,annotations:!0,rotation:!0,clearMeasurements:!0,exportPdf:!0,dualPane:!0,imageDate:!0,panTool:!0,exportImage:!0,areaTool:!0,distanceTool:!0,heightTool:!0,locationTool:!0,elevationTool:!0,bearingTool:!0,slopeTool:!0,xyzTool:!0,identifyPoint:!0,identifyBox:!0})}},methods:{popoutClicked:function(){var e=this.$store.state.map.map.getCenter();window.open("//pictometry.phila.gov/?"+e.lat+"&"+e.lng,"_blank"),this.$store.commit("setPictometryActive",!1)},init:function(){var e=new Date,t=Math.floor(e.getTime()/1e3),i="https://pol.pictometry.com/ipa/v1/load.php?apikey="+this.apiKey+"&ts="+t,n=d(i,this.secretKey),o=this.$IFRAME_ID,r=i+"&ds="+n+"&app_id="+o;this.$refs.pictometryIpa.setAttribute("src",r);var a=this.$ipa=new PictometryHost(o,"https://pol.pictometry.com/ipa/v1/load.php");this.$store.commit("setPictometryIpa",a),a.ready=this.ipaReady},ipaReady:function(){this.$ipa.setLocation({y:this.mapCenter.lat,x:this.mapCenter.lng,zoom:this.mapZoom});var e=this;this.$ipa.addListener("onendzoom",function(t){e.$store.commit("setPictometryZoom",t.level)})}}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var nt={map:{center:[-75.163471,39.953338],zoom:18}},ot={state:{activeTopic:"",shouldShowAddressCandidateList:!1,map:{location:{lat:null,lng:null},center:nt.map.center,bounds:{_northEast:{lat:null,lng:null},_southWest:{lat:null,lng:null}},zoom:nt.map.zoom,boundsBasedOnShape:null,map:null,basemap:"",imagery:"imagery2018",shouldShowImagery:!1,imageOverlay:null,imageOverlayOpacity:null,filters:[],watchPositionOn:!1},cyclomedia:{initialized:!1,navBarOpen:!1,latLngFromMap:null,orientation:{yaw:null,hFov:null,xyz:null},active:!1,recordings:[]},pictometry:{ipa:null,active:!1,shapeIds:[],pngMarkerIds:[],zoom:null,map:{center:nt.map.center,zoom:nt.map.zoom}}},mutations:{setWatchPositionOn:function(e,t){e.map.watchPositionOn=t},setLocation:function(e,t){e.map.location.lat=t.lat,e.map.location.lng=t.lng},setActiveTopic:function(e,t){e.activeTopic=t},setMapZoom:function(e,t){e.map.zoom=t},setImagery:function(e,t){e.map.imagery=t},setShouldShowImagery:function(e,t){e.map.shouldShowImagery=t},setShouldShowAddressCandidateList:function(e,t){e.shouldShowAddressCandidateList=t},setCyclomediaInitialized:function(e,t){e.cyclomedia.initialized=t},setPictometryActive:function(e,t){e.pictometry.active=t},setCyclomediaActive:function(e,t){e.cyclomedia.active=t},setCyclomediaYaw:function(e,t){e.cyclomedia.orientation.yaw=t},setCyclomediaHFov:function(e,t){e.cyclomedia.orientation.hFov=t},setCyclomediaXyz:function(e,t){e.cyclomedia.orientation.xyz=t},setCyclomediaRecordings:function(e,t){e.cyclomedia.recordings=t},setCyclomediaLatLngFromMap:function(e,t){e.cyclomedia.latLngFromMap=t},setCyclomediaNavBarOpen:function(e,t){e.cyclomedia.navBarOpen=t},setPictometryIpa:function(e,t){e.pictometry.ipa=t},setPictometryShapeIds:function(e,t){e.pictometry.shapeIds=t},setPictometryPngMarkerIds:function(e,t){e.pictometry.pngMarkerIds=t},setPictometryMapCenter:function(e,t){e.pictometry.map.center=t},setPictometryMapZoom:function(e,t){e.pictometry.map.zoom=t},setPictometryZoom:function(e,t){e.pictometry.zoom=t},setMap:function(e,t){e.map.map=t.map}}};i.dom.watch(),i.library.add(b,x,C,g,M,k),t.Map_=I,t.Control=P,t.Geojson=N,t.CircleMarker=F,t.ControlCorner=A,t.PopUp=D,t.PopUpContent={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[this.popupHtmlArray.length>1?i("div",{staticClass:"text-center"},[i("ul",{staticClass:"pagination text-center"},[i("li",{class:this.previousIsDisabled},["pagination-previous"!==this.previousIsDisabled?i("span",[e._v(" Previous ")]):e._e(),e._v(" "),"pagination-previous"===this.previousIsDisabled?i("a",{on:{click:function(t){return e.changePopup(e.currentPopup-1)}}},[e._v(" Previous ")]):e._e()]),e._v(" "),this.popupHtmlArrayLength<=9?i("div",{staticClass:"inline-div"},e._l(this.popupHtmlArray,function(t,n){return i("li",{class:e.isCurrent(n)},["current"===e.isCurrent(n)?i("span",[e._v(" "+e._s(n+1)+" ")]):e._e(),e._v(" "),"current"!==e.isCurrent(n)?i("a",{on:{click:function(t){return e.changePopup(n)}}},[e._v(" "+e._s(n+1)+" ")]):e._e()])}),0):e._e(),e._v(" "),this.popupHtmlArrayLength>=10?i("div",{staticClass:"inline-div popup-div"},[e._v(" "+e._s(e.currentPopup+1)+" of "+e._s(this.popupHtmlArrayLength)+" ")]):e._e(),e._v(" "),i("li",{class:this.nextIsDisabled},["pagination-next"!==this.nextIsDisabled?i("span",[e._v(" Next ")]):e._e(),e._v(" "),"pagination-next"===this.nextIsDisabled?i("a",{on:{click:function(t){return e.changePopup(e.currentPopup+1)}}},[e._v(" Next ")]):e._e()])])]):e._e(),e._v(" "),i("div",{domProps:{innerHTML:e._s(this.popupHtmlArray[this.currentPopup])}})])},staticRenderFns:[],name:"PopUpContent",data:function(){return{currentPopup:0}},mounted:function(){this.$store.commit("setSelectedPopupLayer",this.intersectingFeatures[0])},destroyed:function(){this.$store.commit("setSelectedPopupLayer",null)},watch:{popupHtmlArray:function(e){this.currentPopup=0,this.$store.commit("setSelectedPopupLayer",this.intersectingFeatures[0])}},methods:{changePopup:function(e){this.currentPopup=e,this.$store.commit("setSelectedPopupLayer",this.intersectingFeatures[e])},isCurrent:function(e){return e===this.currentPopup?"current inline-div":"inline-div"}},computed:{previousIsDisabled:function(){return 0===this.currentPopup?"pagination-previous disabled":"pagination-previous"},nextIsDisabled:function(){return this.currentPopup===this.popupHtmlArray.length-1?"pagination-next disabled":"pagination-next"},intersectingFeatures:function(){return this.$store.state.map.intersectingFeatures},popupHtmlArray:function(){var e=[];for(var t in this.$store.state.map.intersectingFeatures)e.push(this.$store.state.map.intersectingFeatures[t].feature.popupHtml);return e},popupHtmlArrayLength:function(){return this.popupHtmlArray.length}}},t.Polygon_=j,t.Polyline_=z,t.EsriTiledMapLayer=R,t.EsriTiledOverlay=G,t.EsriDynamicMapLayer=W,t.EsriFeatureLayer=J,t.EsriWebMap=H,t.EsriWebMapLayer=q,t.Checkbox=K,t.LegendBox=X,t.Slider=Y,t.TopicComponent=Z,t.MapAddressInput=Ee,t.MapAddressCandidateList=ke,t.OpacitySlider=V,t.VectorMarker=$e,t.PngMarker=Te,t.BasemapToggleControl=Ie,t.BasemapSelectControl=Oe,t.FullScreenMapToggleTab=Ne,t.FullScreenMapToggleTabVertical=Fe,t.LocationControl=De,t.MeasureControl=je,t.LegendControl=Be,t.BasemapTooltip=Ve,t.ModalAbout=Ge,t.CyclomediaButton=Je,t.CyclomediaRecordingCircle=He,t.CyclomediaRecordingsClient=We,t.SvgViewConeMarker=Xe,t.cyclomediaMixin=Ye,t.CyclomediaWidget=Ke,t.PictometryButton=Qe,t.pictometryMixin={name:"pictometryMixin",computed:{pictometryActive:function(){return this.$store.state.pictometry.active}}},t.PictometryPngMarker=et,t.PictometryViewCone=tt,t.PictometryWidget=it,t.PictometryLayer={name:"PictometryLayer",render:function(e){},computed:{ipa:function(){return this.$store.state.pictometry.ipa},activeTopic:function(){return this.$store.state.activeTopic}},mounted:function(){this.didActivateTopic(this.activeTopic)},beforeDestroy:function(){this.didDeactivateTopic(this.activeTopic)},watch:{activeTopic:function(e,t){this.didDeactivateTopic(t),this.didActivateTopic(e)}},methods:{didActivateTopic:function(e){switch(e){case"deeds":this.ipa.showLayer({id:114828,visible:!0});break;case"zoning":this.ipa.showLayer({id:112230,visible:!0});break;case"water":this.ipa.showLayer({id:108982,visible:!0});break;default:this.ipa.showLayer({id:113478,visible:!1}),this.ipa.showLayer({id:112230,visible:!1})}},didDeactivateTopic:function(e){switch(e){case"deeds":this.ipa.showLayer({id:114828,visible:!1});break;case"zoning":this.ipa.showLayer({id:112230,visible:!1});break;case"water":this.ipa.showLayer({id:108982,visible:!1});default:this.ipa.showLayer({id:113478,visible:!1}),this.ipa.showLayer({id:112230,visible:!1})}}}},t.pvmStore=ot,Object.defineProperty(t,"__esModule",{value:!0})})(t,i(2),i(36),i(98),i(357),i(367),i(368),i(15),i(39),i(97),i(294),i(295))}).call(this,i(4))},function(e,t,i){!function(e,t,i){"use strict";function n(e){for(var t,i=0,n=0,o=e.length,r=e[n];n<o-1;n++)t=e[n+1],i+=(t[0]-r[0])*(t[1]+r[1]),r=t;return i>=0}function o(e,t,i,n){var o=(n[0]-i[0])*(e[1]-i[1])-(n[1]-i[1])*(e[0]-i[0]),r=(t[0]-e[0])*(e[1]-i[1])-(t[1]-e[1])*(e[0]-i[0]),a=(n[1]-i[1])*(t[0]-e[0])-(n[0]-i[0])*(t[1]-e[1]);if(0!==a){var s=o/a,l=r/a;if(s>=0&&s<=1&&l>=0&&l<=1)return!0}return!1}function r(e,t){for(var i=0;i<e.length-1;i++)for(var n=0;n<t.length-1;n++)if(o(e[i],e[i+1],t[n],t[n+1]))return!0;return!1}function a(e,t){var i=r(e,t),n=function(e,t){for(var i=!1,n=-1,o=e.length,r=o-1;++n<o;r=n)(e[n][1]<=t[1]&&t[1]<e[r][1]||e[r][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[r][0]-e[n][0])*(t[1]-e[n][1])/(e[r][1]-e[n][1])+e[n][0]&&(i=!i);return i}(e,t[0]);return!(i||!n)}function s(e,t){var i={};return"number"==typeof e.x&&"number"==typeof e.y&&(i.type="Point",i.coordinates=[e.x,e.y]),e.points&&(i.type="MultiPoint",i.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(i.type="LineString",i.coordinates=e.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=e.paths.slice(0))),e.rings&&(i=function(e){for(var t,i,o=[],s=[],l=0;l<e.length;l++){var c=(function(e,t){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}((p=e[l].slice(0))[0],p[p.length-1])||p.push(p[0]),p);if(!(c.length<4))if(n(c)){var u=[c];o.push(u)}else s.push(c)}for(var p,d=[];s.length;){i=s.pop();var h=!1;for(t=o.length-1;t>=0;t--)if(a(o[t][0],i)){o[t].push(i),h=!0;break}h||d.push(i)}for(;d.length;){i=d.pop();var f=!1;for(t=o.length-1;t>=0;t--)if(r(o[t][0],i)){o[t].push(i),f=!0;break}f||o.push([i.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(e.rings.slice(0))),(e.geometry||e.attributes)&&(i.type="Feature",i.geometry=e.geometry?s(e.geometry):null,i.properties=e.attributes?function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(e.attributes):null,e.attributes&&(i.id=e.attributes[t]||e.attributes.OBJECTID||e.attributes.FID)),JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),i}t="default"in t?t.default:t,i="default"in i?i.default:i;var l=t.Class.extend({initialize:function(e,t){this._symbolJson=e,this.val=null,this._styles={},this._isDefault=!1,this._layerTransparency=1,t&&t.layerTransparency&&(this._layerTransparency=1-t.layerTransparency/100)},pixelValue:function(e){return 1.333*e},colorValue:function(e){return"rgb("+e[0]+","+e[1]+","+e[2]+")"},alphaValue:function(e){var t=e[3]/255;return t*this._layerTransparency},getSize:function(e,t){var i=e.properties,n=t.field,o=0,r=null;if(n){r=i[n];var a=t.minSize,s=t.maxSize,l=t.minDataValue,c=t.maxDataValue,u=t.normalizationField,p=i?parseFloat(i[u]):void 0;if(null===r||u&&(isNaN(p)||0===p))return null;isNaN(p)||(r/=p),null!==a&&null!==s&&null!==l&&null!==c&&(o=r<=l?a:r>=c?s:a+(r-l)/(c-l)*(s-a)),o=isNaN(o)?0:o}return o},getColor:function(e,t){if(!(e.properties&&t&&t.field&&t.stops))return null;var i,n,o,r,a=e.properties,s=a[t.field],l=t.normalizationField,c=a?parseFloat(a[l]):void 0;if(null===s||l&&(isNaN(c)||0===c))return null;if(isNaN(c)||(s/=c),s<=t.stops[0].value)return t.stops[0].color;var u=t.stops[t.stops.length-1];if(s>=u.value)return u.color;for(var p=0;p<t.stops.length;p++){var d=t.stops[p];if(d.value<=s)i=d.color,o=d.value;else if(d.value>s){n=d.color,r=d.value;break}}if(!isNaN(o)&&!isNaN(r)){var h=r-o;if(h>0){var f=(s-o)/h;if(f){var m=(r-s)/h;if(m){for(var y=[],g=0;g<4;g++)y[g]=Math.round(i[g]*m+n[g]*f);return y}return n}return i}}return null}}),c=t.Path.extend({initialize:function(e,i,n){t.setOptions(this,n),this._size=i,this._latlng=t.latLng(e),this._svgCanvasIncludes()},toGeoJSON:function(){return t.GeoJSON.getFeature(this,{type:"Point",coordinates:t.GeoJSON.latLngToCoords(this.getLatLng())})},_svgCanvasIncludes:function(){},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_update:function(){this._map&&this._updatePath()},_updatePath:function(){},setLatLng:function(e){return this._latlng=t.latLng(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setSize:function(e){return this._size=e,this.redraw()},getSize:function(){return this._size}}),u=c.extend({initialize:function(e,t,i){c.prototype.initialize.call(this,e,t,i)},_updatePath:function(){this._renderer._updateCrossMarker(this)},_svgCanvasIncludes:function(){t.Canvas.include({_updateCrossMarker:function(e){var t=e._point,i=e._size/2,n=this._ctx;n.beginPath(),n.moveTo(t.x,t.y+i),n.lineTo(t.x,t.y-i),this._fillStroke(n,e),n.moveTo(t.x-i,t.y),n.lineTo(t.x+i,t.y),this._fillStroke(n,e)}}),t.SVG.include({_updateCrossMarker:function(e){var i=e._point,n=e._size/2;t.Browser.vml&&(i._round(),n=Math.round(n));var o="M"+i.x+","+(i.y+n)+"L"+i.x+","+(i.y-n)+"M"+(i.x-n)+","+i.y+"L"+(i.x+n)+","+i.y;this._setPath(e,o)}})}}),p=c.extend({initialize:function(e,t,i){c.prototype.initialize.call(this,e,t,i)},_updatePath:function(){this._renderer._updateXMarker(this)},_svgCanvasIncludes:function(){t.Canvas.include({_updateXMarker:function(e){var t=e._point,i=e._size/2,n=this._ctx;n.beginPath(),n.moveTo(t.x+i,t.y+i),n.lineTo(t.x-i,t.y-i),this._fillStroke(n,e)}}),t.SVG.include({_updateXMarker:function(e){var i=e._point,n=e._size/2;t.Browser.vml&&(i._round(),n=Math.round(n));var o="M"+(i.x+n)+","+(i.y+n)+"L"+(i.x-n)+","+(i.y-n)+"M"+(i.x-n)+","+(i.y+n)+"L"+(i.x+n)+","+(i.y-n);this._setPath(e,o)}})}}),d=c.extend({options:{fill:!0},initialize:function(e,t,i){c.prototype.initialize.call(this,e,t,i)},_updatePath:function(){this._renderer._updateSquareMarker(this)},_svgCanvasIncludes:function(){t.Canvas.include({_updateSquareMarker:function(e){var t=e._point,i=e._size/2,n=this._ctx;n.beginPath(),n.moveTo(t.x+i,t.y+i),n.lineTo(t.x-i,t.y+i),n.lineTo(t.x-i,t.y-i),n.lineTo(t.x+i,t.y-i),n.closePath(),this._fillStroke(n,e)}}),t.SVG.include({_updateSquareMarker:function(e){var i=e._point,n=e._size/2;t.Browser.vml&&(i._round(),n=Math.round(n));var o="M"+(i.x+n)+","+(i.y+n)+"L"+(i.x-n)+","+(i.y+n)+"L"+(i.x-n)+","+(i.y-n)+"L"+(i.x+n)+","+(i.y-n);o+=t.Browser.svg?"z":"x",this._setPath(e,o)}})}}),h=c.extend({options:{fill:!0},initialize:function(e,t,i){c.prototype.initialize.call(this,e,t,i)},_updatePath:function(){this._renderer._updateDiamondMarker(this)},_svgCanvasIncludes:function(){t.Canvas.include({_updateDiamondMarker:function(e){var t=e._point,i=e._size/2,n=this._ctx;n.beginPath(),n.moveTo(t.x,t.y+i),n.lineTo(t.x-i,t.y),n.lineTo(t.x,t.y-i),n.lineTo(t.x+i,t.y),n.closePath(),this._fillStroke(n,e)}}),t.SVG.include({_updateDiamondMarker:function(e){var i=e._point,n=e._size/2;t.Browser.vml&&(i._round(),n=Math.round(n));var o="M"+i.x+","+(i.y+n)+"L"+(i.x-n)+","+i.y+"L"+i.x+","+(i.y-n)+"L"+(i.x+n)+","+i.y;o+=t.Browser.svg?"z":"x",this._setPath(e,o)}})}}),f=l.extend({statics:{MARKERTYPES:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSX","esriPMS"]},initialize:function(e,t){var i;if(l.prototype.initialize.call(this,e,t),t&&(this.serviceUrl=t.url),e)if("esriPMS"===e.type){var n=this._symbolJson.url;n&&"http://"===n.substr(0,7)||"https://"===n.substr(0,8)?(i=this.sanitize(n),this._iconUrl=i):(i=this.serviceUrl+"images/"+n,this._iconUrl=t&&t.token?i+"?token="+t.token:i),e.imageData&&(this._iconUrl="data:"+e.contentType+";base64,"+e.imageData),this._icons={},this.icon=this._createIcon(this._symbolJson)}else this._fillStyles()},sanitize:function(e){if(!e)return"";var t;try{t=(t=(t=(t=e.replace(/<br>/gi,"\n")).replace(/<p.*>/gi,"\n")).replace(/<a.*href='(.*?)'.*>(.*?)<\/a>/gi," $2 ($1) ")).replace(/<(?:.|\s)*?>/g,"")}catch(e){t=null}return t},_fillStyles:function(){this._symbolJson.outline&&this._symbolJson.size>0&&"esriSLSNull"!==this._symbolJson.outline.style?(this._styles.stroke=!0,this._styles.weight=this.pixelValue(this._symbolJson.outline.width),this._styles.color=this.colorValue(this._symbolJson.outline.color),this._styles.opacity=this.alphaValue(this._symbolJson.outline.color)):this._styles.stroke=!1,this._symbolJson.color?(this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):this._styles.fillOpacity=0,"esriSMSCircle"===this._symbolJson.style&&(this._styles.radius=this.pixelValue(this._symbolJson.size)/2)},_createIcon:function(e){var i=this.pixelValue(e.width),n=i;e.height&&(n=this.pixelValue(e.height));var o=i/2,r=n/2;e.xoffset&&(o+=this.pixelValue(e.xoffset)),e.yoffset&&(r+=this.pixelValue(e.yoffset));var a=t.icon({iconUrl:this._iconUrl,iconSize:[i,n],iconAnchor:[o,r]});return this._icons[e.width.toString()]=a,a},_getIcon:function(e){var t=this._icons[e.toString()];return t||(t=this._createIcon({width:e})),t},pointToLayer:function(e,i,n,o){var r=this._symbolJson.size||this._symbolJson.width;if(!this._isDefault){if(n.sizeInfo){var a=this.getSize(e,n.sizeInfo);a&&(r=a)}if(n.colorInfo){var s=this.getColor(e,n.colorInfo);s&&(this._styles.fillColor=this.colorValue(s),this._styles.fillOpacity=this.alphaValue(s))}}if("esriPMS"===this._symbolJson.type){var l=t.extend({},{icon:this._getIcon(r)},o);return t.marker(i,l)}switch(r=this.pixelValue(r),this._symbolJson.style){case"esriSMSSquare":return function(e,t,i){return new d(e,t,i)}(i,r,t.extend({},this._styles,o));case"esriSMSDiamond":return function(e,t,i){return new h(e,t,i)}(i,r,t.extend({},this._styles,o));case"esriSMSCross":return function(e,t,i){return new u(e,t,i)}(i,r,t.extend({},this._styles,o));case"esriSMSX":return function(e,t,i){return new p(e,t,i)}(i,r,t.extend({},this._styles,o))}return this._styles.radius=r/2,t.circleMarker(i,t.extend({},this._styles,o))}}),m=l.extend({statics:{LINETYPES:["esriSLSDash","esriSLSDot","esriSLSDashDotDot","esriSLSDashDot","esriSLSSolid"]},initialize:function(e,t){l.prototype.initialize.call(this,e,t),this._fillStyles()},_fillStyles:function(){if(this._styles.lineCap="butt",this._styles.lineJoin="miter",this._styles.fill=!1,this._styles.weight=0,!this._symbolJson)return this._styles;if(this._symbolJson.color&&(this._styles.color=this.colorValue(this._symbolJson.color),this._styles.opacity=this.alphaValue(this._symbolJson.color)),!isNaN(this._symbolJson.width)){this._styles.weight=this.pixelValue(this._symbolJson.width);var e=[];switch(this._symbolJson.style){case"esriSLSDash":e=[4,3];break;case"esriSLSDot":e=[1,3];break;case"esriSLSDashDot":e=[8,3,1,3];break;case"esriSLSDashDotDot":e=[8,3,1,3,1,3]}if(e.length>0){for(var t=0;t<e.length;t++)e[t]*=this._styles.weight;this._styles.dashArray=e.join(",")}}},style:function(e,t){if(!this._isDefault&&t){if(t.sizeInfo){var i=this.pixelValue(this.getSize(e,t.sizeInfo));i&&(this._styles.weight=i)}if(t.colorInfo){var n=this.getColor(e,t.colorInfo);n&&(this._styles.color=this.colorValue(n),this._styles.opacity=this.alphaValue(n))}}return this._styles}});function y(e,t){return new m(e,t)}var g=l.extend({statics:{POLYGONTYPES:["esriSFSSolid"]},initialize:function(e,t){l.prototype.initialize.call(this,e,t),e&&(e.outline&&"esriSLSNull"===e.outline.style?this._lineStyles={weight:0}:this._lineStyles=y(e.outline,t).style(),this._fillStyles())},_fillStyles:function(){if(this._lineStyles)if(0===this._lineStyles.weight)this._styles.stroke=!1;else for(var e in this._lineStyles)this._styles[e]=this._lineStyles[e];this._symbolJson&&(this._symbolJson.color&&g.POLYGONTYPES.indexOf(this._symbolJson.style>=0)?(this._styles.fill=!0,this._styles.fillColor=this.colorValue(this._symbolJson.color),this._styles.fillOpacity=this.alphaValue(this._symbolJson.color)):(this._styles.fill=!1,this._styles.fillOpacity=0))},style:function(e,t){if(!this._isDefault&&t&&t.colorInfo){var i=this.getColor(e,t.colorInfo);i&&(this._styles.fillColor=this.colorValue(i),this._styles.fillOpacity=this.alphaValue(i))}return this._styles}}),v=t.Class.extend({options:{proportionalPolygon:!1,clickable:!0},initialize:function(e,i){this._rendererJson=e,this._pointSymbols=!1,this._symbols=[],this._visualVariables=this._parseVisualVariables(e.visualVariables),t.Util.setOptions(this,i)},_parseVisualVariables:function(e){var t={};if(e)for(var i=0;i<e.length;i++)t[e[i].type]=e[i];return t},_createDefaultSymbol:function(){this._rendererJson.defaultSymbol&&(this._defaultSymbol=this._newSymbol(this._rendererJson.defaultSymbol),this._defaultSymbol._isDefault=!0)},_newSymbol:function(e){return"esriSMS"===e.type||"esriPMS"===e.type?(this._pointSymbols=!0,function(e,t){return new f(e,t)}(e,this.options)):"esriSLS"===e.type?y(e,this.options):"esriSFS"===e.type?function(e,t){return new g(e,t)}(e,this.options):void 0},_getSymbol:function(){},attachStylesToLayer:function(e){this._pointSymbols?e.options.pointToLayer=t.Util.bind(this.pointToLayer,this):(e.options.style=t.Util.bind(this.style,this),e._originalStyle=e.options.style)},pointToLayer:function(e,i){var n=this._getSymbol(e);return n&&n.pointToLayer?n.pointToLayer(e,i,this._visualVariables,this.options):t.circleMarker(i,{radius:0,opacity:0})},style:function(e){var t;this.options.userDefinedStyle&&(t=this.options.userDefinedStyle(e));var i=this._getSymbol(e);return i?this.mergeStyles(i.style(e,this._visualVariables),t):this.mergeStyles({opacity:0,fillOpacity:0},t)},mergeStyles:function(e,t){var i,n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if(t)for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}}),b=v.extend({initialize:function(e,t){v.prototype.initialize.call(this,e,t),this._field=this._rendererJson.field,this._rendererJson.normalizationType&&"esriNormalizeByField"===this._rendererJson.normalizationType&&(this._normalizationField=this._rendererJson.normalizationField),this._createSymbols()},_createSymbols:function(){var e,t=this._rendererJson.classBreakInfos;this._symbols=[];for(var i=t.length-1;i>=0;i--)(e=this.options.proportionalPolygon&&this._rendererJson.backgroundFillSymbol?this._newSymbol(this._rendererJson.backgroundFillSymbol):this._newSymbol(t[i].symbol)).val=t[i].classMaxValue,this._symbols.push(e);this._symbols.sort(function(e,t){return e.val>t.val?1:-1}),this._createDefaultSymbol(),this._maxValue=this._symbols[this._symbols.length-1].val},_getSymbol:function(e){var t=e.properties[this._field];if(this._normalizationField){var i=e.properties[this._normalizationField];if(isNaN(i)||0===i)return this._defaultSymbol;t/=i}if(t>this._maxValue)return this._defaultSymbol;for(var n=this._symbols[0],o=this._symbols.length-1;o>=0&&!(t>this._symbols[o].val);o--)n=this._symbols[o];return n}});function _(e,t){return new b(e,t)}var x=v.extend({initialize:function(e,t){v.prototype.initialize.call(this,e,t),this._field=this._rendererJson.field1,this._createSymbols()},_createSymbols:function(){for(var e,t=this._rendererJson.uniqueValueInfos,i=t.length-1;i>=0;i--)(e=this._newSymbol(t[i].symbol)).val=t[i].value,this._symbols.push(e);this._createDefaultSymbol()},_getSymbol:function(e){var t=e.properties[this._field];if(this._rendererJson.fieldDelimiter&&this._rendererJson.field2){var i=e.properties[this._rendererJson.field2];if(i){t+=this._rendererJson.fieldDelimiter+i;var n=e.properties[this._rendererJson.field3];n&&(t+=this._rendererJson.fieldDelimiter+n)}}for(var o=this._defaultSymbol,r=this._symbols.length-1;r>=0;r--)this._symbols[r].val==t&&(o=this._symbols[r]);return o}}),w=v.extend({initialize:function(e,t){v.prototype.initialize.call(this,e,t),this._createSymbol()},_createSymbol:function(){this._rendererJson.symbol&&this._symbols.push(this._newSymbol(this._rendererJson.symbol))},_getSymbol:function(){return this._symbols[0]}});function C(e,t){var i,n=e.drawingInfo.renderer,o={};switch(t.options.pane&&(o.pane=t.options.pane),e.drawingInfo.transparency&&(o.layerTransparency=e.drawingInfo.transparency),t.options.style&&(o.userDefinedStyle=t.options.style),n.type){case"classBreaks":if(function(e,t,i){if(i._hasProportionalSymbols=!1,"esriGeometryPolygon"===e&&(t.backgroundFillSymbol&&(i._hasProportionalSymbols=!0),t.classBreakInfos&&t.classBreakInfos.length)){var n=t.classBreakInfos[0].symbol;!n||"esriSMS"!==n.type&&"esriPMS"!==n.type||(i._hasProportionalSymbols=!0)}}(e.geometryType,n,t),t._hasProportionalSymbols){t._createPointLayer();var r=_(n,o);r.attachStylesToLayer(t._pointLayer),o.proportionalPolygon=!0}i=_(n,o);break;case"uniqueValue":console.log(n,o),i=function(e,t){return new x(e,t)}(n,o);break;default:i=function(e,t){return new w(e,t)}(n,o)}i.attachStylesToLayer(t)}var S=t.GeoJSON.extend({options:{data:{},opacity:1},initialize:function(e,i){var n,o;if(t.setOptions(this,i),this.data=this.options.data,this.opacity=this.options.opacity,this.popupInfo=null,this.labelingInfo=null,this._layers={},e)for(n=0,o=e.length;n<o;n++)this.addLayer(e[n]);"string"==typeof this.data?this._getFeatureCollection(this.data):this._parseFeatureCollection(this.data)},_getFeatureCollection:function(e){var i="https://www.arcgis.com/sharing/rest/content/items/"+e+"/data";t.esri.request(i,{},function(e,t){e?console.log(e):this._parseFeatureCollection(t)},this)},_parseFeatureCollection:function(e){var t,i,n=0;for(t=0,i=e.layers.length;t<i;t++)e.layers[t].featureSet.features.length>0&&(n=t);var o=e.layers[n].featureSet.features,r=e.layers[n].layerDefinition.geometryType,a=e.layers[n].layerDefinition.objectIdField,s=e.layers[n].layerDefinition||null;4326!==e.layers[n].layerDefinition.extent.spatialReference.wkid&&(102100!==e.layers[n].layerDefinition.extent.spatialReference.wkid&&console.error("[L.esri.WebMap] this wkid ("+e.layers[n].layerDefinition.extent.spatialReference.wkid+") is not supported."),o=this._projTo4326(o,r)),void 0!==e.layers[n].popupInfo&&(this.popupInfo=e.layers[n].popupInfo),void 0!==e.layers[n].layerDefinition.drawingInfo.labelingInfo&&(this.labelingInfo=e.layers[n].layerDefinition.drawingInfo.labelingInfo),console.log(e);var l=this._featureCollectionToGeoJSON(o,a);null!==s&&C(s,this),console.log(l),this.addData(l)},_projTo4326:function(e,i){var n,o;console.log("_project!");var r=[];for(n=0,o=e.length;n<o;n++){var a,s,l,c=e[n];if("esriGeometryPoint"===i)a=t.Projection.SphericalMercator.unproject(t.point(c.geometry.x,c.geometry.y)),c.geometry.x=a.lng,c.geometry.y=a.lat;else if("esriGeometryMultipoint"===i){var u;for(s=0,u=c.geometry.points.length;s<u;s++)a=t.Projection.SphericalMercator.unproject(t.point(c.geometry.points[s][0],c.geometry.points[s][1])),c.geometry.points[s][0]=a.lng,c.geometry.points[s][1]=a.lat}else if("esriGeometryPolyline"===i){var p,d;for(s=0,d=c.geometry.paths.length;s<d;s++)for(l=0,p=c.geometry.paths[s].length;l<p;l++)a=t.Projection.SphericalMercator.unproject(t.point(c.geometry.paths[s][l][0],c.geometry.paths[s][l][1])),c.geometry.paths[s][l][0]=a.lng,c.geometry.paths[s][l][1]=a.lat}else if("esriGeometryPolygon"===i){var h,f;for(s=0,f=c.geometry.rings.length;s<f;s++)for(l=0,h=c.geometry.rings[s].length;l<h;l++)a=t.Projection.SphericalMercator.unproject(t.point(c.geometry.rings[s][l][0],c.geometry.rings[s][l][1])),c.geometry.rings[s][l][0]=a.lng,c.geometry.rings[s][l][1]=a.lat}r.push(c)}return r},_featureCollectionToGeoJSON:function(e,t){var i,n,o={type:"FeatureCollection",features:[]},r=[];for(i=0,n=e.length;i<n;i++){var a=s(e[i],t);r.push(a)}return o.features=r,o}});function M(e,t){return new S(e,t)}var E=t.GeoJSON.extend({options:{url:"",data:{},opacity:1},initialize:function(e,i){var n,o;if(t.setOptions(this,i),this.url=this.options.url,this.layerDefinition=this.options.layerDefinition,this.locationInfo=this.options.locationInfo,this.opacity=this.options.opacity,this._layers={},e)for(n=0,o=e.length;n<o;n++)this.addLayer(e[n]);this._parseCSV(this.url,this.layerDefinition,this.locationInfo)},_parseCSV:function(e,t,n){i.csv(e,{latfield:n.latitudeFieldName,lonfield:n.longitudeFieldName},this),C(t,this)}}),k=t.GeoJSON.extend({options:{opacity:1,url:""},initialize:function(e,i){var n,o;if(t.setOptions(this,i),this.url=this.options.url,this.opacity=this.options.opacity,this.popupInfo=null,this.labelingInfo=null,this._layers={},e)for(n=0,o=e.length;n<o;n++)this.addLayer(e[n]);this._getKML(this.url)},_getKML:function(e){var i="http://utility.arcgis.com/sharing/kml?url="+e+'&model=simple&folders=&outSR=%7B"wkid"%3A4326%7D';t.esri.request(i,{},function(e,t){e?console.log(e):(console.log(t),this._parseFeatureCollection(t.featureCollection))},this)},_parseFeatureCollection:function(e){var t;for(console.log("_parseFeatureCollection"),t=0;t<3;t++)if(e.layers[t].featureSet.features.length>0){console.log(t);var i=e.layers[t].featureSet.features,n=e.layers[t].layerDefinition.objectIdField,o=this._featureCollectionToGeoJSON(i,n);void 0!==e.layers[t].popupInfo&&(this.popupInfo=e.layers[t].popupInfo),void 0!==e.layers[t].layerDefinition.drawingInfo.labelingInfo&&(this.labelingInfo=e.layers[t].layerDefinition.drawingInfo.labelingInfo),C(e.layers[t].layerDefinition,this),console.log(o),this.addData(o)}},_featureCollectionToGeoJSON:function(e,t){var i,n,o={type:"FeatureCollection",features:[]},r=[];for(i=0,n=e.length;i<n;i++){var a=s(e[i],t);r.push(a)}return o.features=r,o}}),$=t.DivIcon.extend({options:{iconSize:null,className:"esri-leaflet-webmap-labels",text:""},createIcon:function(e){var i=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(i.innerHTML='<div style="position: relative; left: -50%; text-shadow: 1px 1px 0px #fff, -1px 1px 0px #fff, 1px -1px 0px #fff, -1px -1px 0px #fff;">'+n.text+"</div>",i.style.fontSize="1em",i.style.fontWeight="bold",i.style.textTransform="uppercase",i.style.textAlign="center",i.style.whiteSpace="nowrap",n.bgPos){var o=t.point(n.bgPos);i.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(i,"icon"),i}});function T(e){return new $(e)}var L=t.Marker.extend({options:{properties:{},labelingInfo:{},offset:[0,0]},initialize:function(e,i){t.setOptions(this,i),this._latlng=t.latLng(e);var n=this._createLabelText(this.options.properties,this.options.labelingInfo);this._setLabelIcon(n,this.options.offset)},_createLabelText:function(e,t){var i=/\[([^\]]*)\]/g,n=t[0].labelExpression;return n=n.replace(i,function(t){var n=i.exec(t);return e[n[1]]})},_setLabelIcon:function(e,t){var i=T({text:e,iconAnchor:t});this.setIcon(i)}});function I(e,t){return new L(e,t)}function P(e){var t={position:[],offset:[]};return t.position=e.reverse(),t.offset=[20,20],t}function O(e){var t,i={position:[],offset:[]};return t=Math.round(e.length/2),i.position=e[t].reverse(),i.offset=[0,0],i}function N(e,t){var i={position:[],offset:[]};return i.position=e.getBounds().getCenter(),i.offset=[0,0],i}function F(e){return moment(e).format("MM/DD/YYYY")}function A(e,t){var i=/\{([^\]]*)\}/g,n="",o="";void 0!==e.title&&(n=e.title),n=n.replace(i,function(e){var n=i.exec(e);return t[n[1]]}),o='<div class="leaflet-popup-content-title text-center"><h4>'+n+'</h4></div><div class="leaflet-popup-content-description" style="max-height:200px;overflow:auto;">';var r,a,s,l='<div style="font-weight:bold;color:#999;margin-top:5px;word-break:break-all;">',c='</div><p style="margin-top:0;margin-bottom:5px;word-break:break-all;">';if(void 0!==e.fieldInfos){for(var u=0;u<e.fieldInfos.length;u++)!0===e.fieldInfos[u].visible&&(null===t[e.fieldInfos[u].fieldName]?o+=l+e.fieldInfos[u].label+c+"none</p>":"URL"===e.fieldInfos[u].fieldName||"CODE_SEC_1"===e.fieldInfos[u].fieldName||"WEBSITE"===e.fieldInfos[u].fieldName||"FINAL_LINK_COPY"===e.fieldInfos[u].fieldName||"LINK"===e.fieldInfos[u].fieldName||"CODE_SECTION_LINK"===e.fieldInfos[u].fieldName?o+=l+e.fieldInfos[u].label+c+'<a target="_blank" href="'+t[e.fieldInfos[u].fieldName]+'">'+t[e.fieldInfos[u].fieldName]+"</a></p>":e.fieldInfos[u].fieldName.includes("EMAIL")?o+=l+e.fieldInfos[u].label+c+'<a href="mailto:'+t[e.fieldInfos[u].fieldName]+'">'+t[e.fieldInfos[u].fieldName]+"</a></p>":e.fieldInfos[u].fieldName.includes("PHONE")?o+=l+e.fieldInfos[u].label+c+(r=t[e.fieldInfos[u].fieldName],a=void 0,s=void 0,a=(""+r).replace(/\D/g,""),(s=a.match(/^(\d{3})(\d{3})(\d{4})$/))?"("+s[1]+") "+s[2]+"-"+s[3]:null)+"</p>":e.fieldInfos[u].fieldName.includes("DATE")?o+=l+e.fieldInfos[u].label+c+F(t[e.fieldInfos[u].fieldName])+"</p>":o+=l+e.fieldInfos[u].label+c+t[e.fieldInfos[u].fieldName]+"</p>");o+="</div>"}else if(void 0!==e.description){var p=e.description.replace(i,function(e){var n=i.exec(e);return t[n[1]]});o+=p+"</div>"}return o}function D(e,i,n,o,r){return function(e,i,n,o,r){var a,s,l,c,u,p,d=[],h=r+"-label";if("Feature Collection"===e.type||void 0!==e.featureCollection){var f,m;if(n.createPane(h),void 0===e.itemId)for(l=0,c=e.featureCollection.layers.length;l<c;l++)e.featureCollection.layers[l].featureSet.features.length>0&&(void 0!==e.featureCollection.layers[l].popupInfo&&null!==e.featureCollection.layers[l].popupInfo&&(f=e.featureCollection.layers[l].popupInfo),void 0!==e.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo&&null!==e.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo&&(m=e.featureCollection.layers[l].layerDefinition.drawingInfo.labelingInfo));s=t.featureGroup(d);var y=M(null,{data:e.itemId||e.featureCollection,opacity:e.opacity,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==y&&(f=y.popupInfo,m=y.labelingInfo),null!=f){var n=A(f,t.properties);i.feature.popupHtml=n}if(null!=m){var o,r=i.feature.geometry.coordinates,a=I((o="Point"===i.feature.geometry.type?P(r):"LineString"===i.feature.geometry.type?O(r):"MultiLineString"===i.feature.geometry.type?O(r[Math.round(r.length/2)]):N(i)).position,{zIndexOffset:1,properties:t.properties,labelingInfo:m,offset:o.offset,pane:h});s.addLayer(a)}}});return a=t.layerGroup([y,s]),i.push({type:"FC",title:e.title||"",layer:a}),a}if("ArcGISFeatureLayer"===e.layerType&&void 0!==e.layerDefinition){var g="1=1";if(void 0!==e.layerDefinition.drawingInfo){if("heatmap"===e.layerDefinition.drawingInfo.renderer.type){var v={};return e.layerDefinition.drawingInfo.renderer.colorStops.map(function(e){v[(Math.round(100*e.ratio)/100+6)/7]="rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")"}),a=t.esri.Heat.heatmapFeatureLayer({url:e.url,token:o.token||null,minOpacity:.5,max:e.layerDefinition.drawingInfo.renderer.maxPixelIntensity,blur:e.layerDefinition.drawingInfo.renderer.blurRadius,radius:1.3*e.layerDefinition.drawingInfo.renderer.blurRadius,gradient:v,pane:r}),i.push({type:"HL",title:e.title||"",layer:a}),a}var b=e.layerDefinition.drawingInfo;return b.transparency=100-100*e.opacity,void 0!==e.layerDefinition.definitionExpression&&(g=e.layerDefinition.definitionExpression),n.createPane(h),s=t.featureGroup(d),a=t.esri.featureLayer({url:e.url,where:g,token:o.token||null,drawingInfo:b,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==e.popupInfo){var n=A(e.popupInfo,t.properties);i.feature.popupHtml=n}if(void 0!==e.layerDefinition.drawingInfo.labelingInfo&&null!==e.layerDefinition.drawingInfo.labelingInfo){var o,r=e.layerDefinition.drawingInfo.labelingInfo,a=i.feature.geometry.coordinates,l=I((o="Point"===i.feature.geometry.type?P(a):"LineString"===i.feature.geometry.type?O(a):"MultiLineString"===i.feature.geometry.type?O(a[Math.round(a.length/2)]):N(i)).position,{zIndexOffset:1,properties:t.properties,labelingInfo:r,offset:o.offset,pane:h});s.addLayer(l)}}}),a=t.layerGroup([a,s]),i.push({type:"FL",title:e.title||"",layer:a}),a}return void 0!==e.layerDefinition.definitionExpression&&(g=e.layerDefinition.definitionExpression),a=t.esri.featureLayer({url:e.url,token:o.token||null,where:g,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==e.popupInfo){var n=A(e.popupInfo,t.properties);i.feature.popupHtml=n}}}),i.push({type:"FL",title:e.title||"",layer:a}),a}if("ArcGISFeatureLayer"===e.layerType)return a=t.esri.featureLayer({url:e.url,token:o.token||null,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==e.popupInfo){var n=A(e.popupInfo,t.properties);i.feature.popupHtml=n}}}),i.push({type:"FL",title:e.title||"",layer:a}),a;if("CSV"===e.layerType)return s=t.featureGroup(d),u=null,p={url:e.url,layerDefinition:e.layerDefinition,locationInfo:e.locationInfo,opacity:e.opacity,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==e.popupInfo){var n=A(e.popupInfo,t.properties);i.feature.popupHtml=n}if(void 0!==e.layerDefinition.drawingInfo.labelingInfo&&null!==e.layerDefinition.drawingInfo.labelingInfo){var o,r=e.layerDefinition.drawingInfo.labelingInfo,a=i.feature.geometry.coordinates,l=I((o="Point"===i.feature.geometry.type?P(a):"LineString"===i.feature.geometry.type?O(a):"MultiLineString"===i.feature.geometry.type?O(a[Math.round(a.length/2)]):N(i)).position,{zIndexOffset:1,properties:t.properties,labelingInfo:r,offset:o.offset,pane:h});s.addLayer(l)}}},a=new E(u,p),a=t.layerGroup([a,s]),i.push({type:"CSV",title:e.title||"",layer:a}),a;if("KML"===e.layerType){s=t.featureGroup(d);var _=function(e,t){return new k(e,t)}(null,{url:e.url,opacity:e.opacity,pane:r,onEachFeature:function(t,i){if(i.feature.layerName=e.title.split("_")[1],void 0!==_.popupInfo&&null!==_.popupInfo){var n=A(_.popupInfo,t.properties);i.feature.popupHtml=n}if(void 0!==_.labelingInfo&&null!==_.labelingInfo){var o,r=_.labelingInfo,a=i.feature.geometry.coordinates,l=I((o="Point"===i.feature.geometry.type?P(a):"LineString"===i.feature.geometry.type?O(a):"MultiLineString"===i.feature.geometry.type?O(a[Math.round(a.length/2)]):N(i)).position,{zIndexOffset:1,properties:t.properties,labelingInfo:r,offset:o.offset,pane:h});s.addLayer(l)}}});return a=t.layerGroup([_,s]),i.push({type:"KML",title:e.title||"",layer:a}),a}if("ArcGISImageServiceLayer"===e.layerType)return a=t.esri.imageMapLayer({url:e.url,token:o.token||null,pane:r,opacity:e.opacity||1}),i.push({type:"IML",title:e.title||"",layer:a}),a;if("ArcGISMapServiceLayer"===e.layerType)return a=t.esri.dynamicMapLayer({url:e.url,token:o.token||null,pane:r,opacity:e.opacity||1}),i.push({type:"DML",title:e.title||"",layer:a}),a;if("ArcGISTiledMapServiceLayer"===e.layerType){try{a=t.esri.basemapLayer(e.title)}catch(i){a=t.esri.tiledMapLayer({url:e.url,token:o.token||null}),t.esri.request(e.url,{},function(e,t){if(e)console.log(e);else{var i=n.getSize().x-55,o='<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:'+i+'px;">'+t.copyrightText+"</span>";n.attributionControl.addAttribution(o)}})}return document.getElementsByClassName("leaflet-tile-pane")[0].style.opacity=e.opacity||1,i.push({type:"TML",title:e.title||"",layer:a}),a}if("VectorTileLayer"===e.layerType){var x={"World Street Map (with Relief)":"StreetsRelief","World Street Map (with Relief) (Mature Support)":"StreetsRelief","Hybrid Reference Layer":"Hybrid","Hybrid Reference Layer (Mature Support)":"Hybrid","World Street Map":"Streets","World Street Map (Mature Support)":"Streets","World Street Map (Night)":"StreetsNight","World Street Map (Night) (Mature Support)":"StreetsNight","Dark Gray Canvas":"DarkGray","Dark Gray Canvas (Mature Support)":"DarkGray","World Topographic Map":"Topographic","World Topographic Map (Mature Support)":"Topographic","World Navigation Map":"Navigation","World Navigation Map (Mature Support)":"Navigation","Light Gray Canvas":"Gray","Light Gray Canvas (Mature Support)":"Gray"};return x[e.title]?a=t.esri.Vector.basemap(x[e.title]):(console.error("Unsupported Vector Tile Layer: ",e),a=t.featureGroup([])),i.push({type:"VTL",title:e.title||e.id||"",layer:a}),a}if("OpenStreetMap"===e.layerType)return a=t.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),i.push({type:"TL",title:e.title||e.id||"",layer:a}),a;if("WebTiledLayer"===e.layerType){var w=e.templateUrl.replace(/\{level}/g,"{z}").replace(/\{col}/g,"{x}").replace(/\{row}/g,"{y}");return a=t.tileLayer(w,{attribution:e.copyright}),document.getElementsByClassName("leaflet-tile-pane")[0].style.opacity=e.opacity||1,i.push({type:"TL",title:e.title||e.id||"",layer:a}),a}if("WMS"===e.layerType){var C="";for(l=0,c=e.visibleLayers.length;l<c;l++)C+=e.visibleLayers[l],l<c-1&&(C+=",");return a=t.tileLayer.wms(e.url,{layers:String(C),format:"image/png",transparent:!0,attribution:e.copyright}),i.push({type:"WMS",title:e.title||e.id||"",layer:a}),a}return a=t.featureGroup([]),console.log("Unsupported Layer: ",e),a}(e,i,n,o,r)}var j=t.Evented.extend({options:{map:{},token:null,server:"www.arcgis.com"},initialize:function(e,i){t.setOptions(this,i),this._map=this.options.map,this._token=this.options.token,this._server=this.options.server,this._webmapId=e,this._loaded=!1,this._metadataLoaded=!1,this._loadedLayersNum=0,this._layersNum=0,this.layers=[],this.title="",this.bookmarks=[],this.portalItem={},this.VERSION="0.4.0",this._loadWebMapMetaData(e),this._loadWebMap(e)},_checkLoaded:function(){this._loadedLayersNum++,this._loadedLayersNum===this._layersNum&&(this._loaded=!0,this.fire("load"))},_operationalLayer:function(e,t,i,n,o){var r=D(e,t,i,n,o);void 0!==r&&!0===e.visibility&&r.addTo(i)},_loadWebMapMetaData:function(e){var i={},n=this._map,o=this,r="https://"+this._server+"/sharing/rest/content/items/"+e;this._token&&this._token.length>0&&(i.token=this._token),t.esri.request(r,i,function(e,t){e?console.log(e):(o.portalItem=t,o.title=t.title,o._metadataLoaded=!0,o.fire("metadataLoad"),n.fitBounds([t.extent[0].reverse(),t.extent[1].reverse()]))})},_loadWebMap:function(e){var i=this._map,n=this.layers,o=this._server,r={},a="https://"+o+"/sharing/rest/content/items/"+e+"/data";this._token&&this._token.length>0&&(r.token=this._token),t.esri.request(a,r,function(e,a){e?console.log("L.esri.request error:",e):(this._layersNum=a.baseMap.baseMapLayers.length+a.operationalLayers.length,a.baseMap.baseMapLayers.map(function(a){if(void 0!==a.itemId){var s="https://"+o+"/sharing/rest/content/items/"+a.itemId;t.esri.request(s,r,function(t,o){t?console.error(e):(console.log(o.access),"public"!==o.access?this._operationalLayer(a,n,i,r):this._operationalLayer(a,n,i,{})),this._checkLoaded()},this)}else this._operationalLayer(a,n,i,{}),this._checkLoaded()}.bind(this)),a.operationalLayers.map(function(a,s){var l="esri-webmap-layer"+s;if(i.createPane(l),void 0!==a.itemId){var c="https://"+o+"/sharing/rest/content/items/"+a.itemId;t.esri.request(c,r,function(t,o){t?console.error(e):(console.log(o.access),"public"!==o.access?this._operationalLayer(a,n,i,r,l):this._operationalLayer(a,n,i,{},l)),this._checkLoaded()},this)}else this._operationalLayer(a,n,i,{},l),this._checkLoaded()}.bind(this)),void 0!==a.bookmarks&&a.bookmarks.length>0&&a.bookmarks.map(function(e){var i=t.Projection.SphericalMercator.unproject(t.point(e.extent.xmax,e.extent.ymax)),n=t.Projection.SphericalMercator.unproject(t.point(e.extent.xmin,e.extent.ymin)),o=t.latLngBounds(n,i);this.bookmarks.push({name:e.name,bounds:o})}.bind(this)))}.bind(this))}});e.WebMap=j,e.webMap=function(e,t){return new j(e,t)},e.operationalLayer=D,e.FeatureCollection=S,e.featureCollection=M,e.LabelMarker=L,e.labelMarker=I,e.LabelIcon=$,e.labelIcon=T,e.createPopupContent=A,Object.defineProperty(e,"__esModule",{value:!0})}(t,i(39),i(358))},function(e,t,i){var n=i(359),o=i(360),r=i(362),a=i(363),s=i(364),l=i(365);function c(e,t){"setGeoJSON"in e?e.setGeoJSON(t):"addData"in e&&e.addData(t)}function u(e,t,i){var n="string"==typeof e?JSON.parse(e):e;for(var o in i=i||L.geoJson(),n.objects){var r=s.feature(n,n.objects[o]);r.features?c(i,r.features):c(i,r)}return i}function p(e,t,i){return i=i||L.geoJson(),t=t||{},o.csv2geojson(e,t,function(e,t){if(e)return i.fire("error",{error:e});c(i,t)}),i}function d(e,t,i){var n=y(e);return n?(c(i=i||L.geoJson(),l.gpx(n)),i):i.fire("error",{error:"Could not parse GPX"})}function h(e,t,i){var n=y(e);return n?(c(i=i||L.geoJson(),l.kml(n)),i):i.fire("error",{error:"Could not parse KML"})}function f(e,t,i){i=i||L.geoJson(),t=t||{};for(var n=a.decode(e,t.precision),o={type:"LineString",coordinates:[]},r=0;r<n.length;r++)o.coordinates[r]=[n[r][1],n[r][0]];return c(i,o),i}function m(e,t,i){return c(i=i||L.geoJson(),r(e)),i}function y(e){return"string"==typeof e?(new DOMParser).parseFromString(e,"text/xml"):e}e.exports.polyline=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){if(e)return o.fire("error",{error:e});f(i.responseText,t,o),o.fire("ready")}),o},e.exports.polyline.parse=f,e.exports.geojson=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,t){if(e)return o.fire("error",{error:e});c(o,JSON.parse(t.responseText)),o.fire("ready")}),o},e.exports.topojson=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){if(e)return o.fire("error",{error:e});u(i.responseText,t,o),o.fire("ready")}),o},e.exports.topojson.parse=u,e.exports.csv=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){var n;if(e)return o.fire("error",{error:e});function r(){n=!0}o.on("error",r),p(i.responseText,t,o),o.off("error",r),n||o.fire("ready")}),o},e.exports.csv.parse=p,e.exports.gpx=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){var n;if(e)return o.fire("error",{error:e});function r(){n=!0}o.on("error",r),d(i.responseXML||i.responseText,t,o),o.off("error",r),n||o.fire("ready")}),o},e.exports.gpx.parse=d,e.exports.kml=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){var n;if(e)return o.fire("error",{error:e});function r(){n=!0}o.on("error",r),h(i.responseXML||i.responseText,t,o),o.off("error",r),n||o.fire("ready")}),o},e.exports.kml.parse=h,e.exports.wkt=function(e,t,i){var o=i||L.geoJson();return n(e,function(e,i){if(e)return o.fire("error",{error:e});m(i.responseText,t,o),o.fire("ready")}),o},e.exports.wkt.parse=m},function(e,t,i){e.exports=function(e,t,i){var n=!1;if(void 0===window.XMLHttpRequest)return t(Error("Browser not supported"));if(void 0===i){var o=e.match(/^\s*https?:\/\/[^\/]*/);i=o&&o[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var r=new window.XMLHttpRequest;if(i&&!("withCredentials"in r)){r=new window.XDomainRequest;var a=t;t=function(){if(n)a.apply(this,arguments);else{var e=this,t=arguments;setTimeout(function(){a.apply(e,t)},0)}}}function s(){var e;void 0===r.status||(e=r.status)>=200&&e<300||304===e?t.call(r,null,r):t.call(r,r,null)}return"onload"in r?r.onload=s:r.onreadystatechange=function(){4===r.readyState&&s()},r.onerror=function(e){t.call(this,e||!0,null),t=function(){}},r.onprogress=function(){},r.ontimeout=function(e){t.call(this,e,null),t=function(){}},r.onabort=function(e){t.call(this,e,null),t=function(){}},r.open("GET",e,!0),r.send(null),n=!0,r}},function(e,t,i){"use strict";var n=i(424),o=i(361),r=/(Lat)(itude)?/gi,a=/(L)(on|ng)(gitude)?/i;function s(e,t){var i,n,o;for(var r in e)(n=r.match(t))&&(!i||n[0].length/r.length>o)&&(o=n[0].length/r.length,i=r);return i}function l(e){return s(e,r)}function c(e){return s(e,a)}function u(e){return"object"==typeof e?Object.keys(e).length:0}function p(e){var t=[];return[",",";","\t","|"].forEach(function(i){var o=n.dsvFormat(i).parse(e);if(o.length>=1){for(var r=u(o[0]),a=0;a<o.length;a++)if(u(o[a])!==r)return;t.push({delimiter:i,arity:Object.keys(o[0]).length})}}),t.length?t.sort(function(e,t){return t.arity-e.arity})[0].delimiter:null}e.exports={isLon:function(e){return!!e.match(a)},isLat:function(e){return!!e.match(r)},guessLatHeader:l,guessLonHeader:c,csv:n.csvParse,tsv:n.tsvParse,dsv:n,auto:function(e){var t=p(e);return t?function(e){return delete e.columns,e}(n.dsvFormat(t).parse(e)):null},csv2geojson:function(e,t,i){i||(i=t,t={}),t.delimiter=t.delimiter||",";var r=t.latfield||"",a=t.lonfield||"",s=t.crs||"",u=[],d={type:"FeatureCollection",features:u};if(""!==s&&(d.crs={type:"name",properties:{name:s}}),"auto"!==t.delimiter||"string"!=typeof e||(t.delimiter=p(e),t.delimiter)){var h="string"==typeof e?n.dsvFormat(t.delimiter).parse(e):e;if(h.length){var f,m=[];if(r||(r=l(h[0])),a||(a=c(h[0])),r&&a){for(f=0;f<h.length;f++)if(void 0!==h[f][a]&&void 0!==h[f][r]){var y,g,v,b=h[f][a],_=h[f][r];(v=o(b,"EW"))&&(b=v),(v=o(_,"NS"))&&(_=v),y=parseFloat(b),g=parseFloat(_),isNaN(y)||isNaN(g)?m.push({message:"A row contained an invalid value for latitude or longitude",row:h[f],index:f}):(t.includeLatLon||(delete h[f][a],delete h[f][r]),u.push({type:"Feature",properties:h[f],geometry:{type:"Point",coordinates:[parseFloat(y),parseFloat(g)]}}))}i(m.length?m:null,d)}else{for(f=0;f<h.length;f++)u.push({type:"Feature",properties:h[f],geometry:null});i(m.length?m:null,d)}}else i(null,d)}else i({type:"Error",message:"Could not autodetect delimiter"})},toLine:function(e){for(var t=e.features,i={type:"Feature",geometry:{type:"LineString",coordinates:[]}},n=0;n<t.length;n++)i.geometry.coordinates.push(t[n].geometry.coordinates);return i.properties=t.reduce(function(e,t){for(var i in t.properties)e[i]||(e[i]=[]),e[i].push(t.properties[i]);return e},{}),{type:"FeatureCollection",features:[i]}},toPolygon:function(e){for(var t=e.features,i={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},n=0;n<t.length;n++)i.geometry.coordinates[0].push(t[n].geometry.coordinates);return i.properties=t.reduce(function(e,t){for(var i in t.properties)e[i]||(e[i]=[]),e[i].push(t.properties[i]);return e},{}),{type:"FeatureCollection",features:[i]}}}},function(e,t){function i(e,t){var i=n(e,t);return i.whole+" "+(i.minutes?i.minutes+"' ":"")+(i.seconds?i.seconds+'" ':"")+i.dir}function n(e,t){var i=({lat:["N","S"],lon:["E","W"]}[t]||"")[e>=0?0:1],n=Math.abs(e),o=Math.floor(n),r=60*(n-o),a=Math.floor(r);return{whole:o,minutes:a,seconds:Math.floor(60*(r-a)),dir:i}}function o(e,t,i){if(t||(t="NSEW"),"string"!=typeof e)return{val:null,regex:i};var n=(i=i||/[\s\,]*([\-|\|\]?[0-9.]+)? *(?:([0-9.]+)['] *)?(?:([0-9.]+)(?:''|"||) *)?([NSEW])?/gi).exec(e);return n?n[4]&&-1===t.indexOf(n[4])?{val:null,regex:i}:{val:((n[1]?parseFloat(n[1]):0)+(n[2]?parseFloat(n[2])/60:0)+(n[3]?parseFloat(n[3])/3600:0))*(n[4]&&"S"===n[4]||"W"===n[4]?-1:1),regex:i,raw:n[0],dim:n[4]}:{val:null,regex:i}}e.exports=function(e,t){return o(e,t).val},e.exports.pair=function(e,t){var i=o(e=e.trim(),t);if(null===i.val)return null;var n=o(e,t,i.regex);if(null===n.val)return null;if(i.raw+n.raw!==e)return null;return i.dim?function(e,t,i){if("N"===i||"S"===i)return[e,t];if("W"===i||"E"===i)return[t,e]}(i.val,n.val,i.dim):[i.val,n.val]},e.exports.format=i,e.exports.formatPair=function(e){return i(e.lat,"lat")+" "+i(e.lon,"lon")},e.exports.coordToDMS=n},function(e,t){e.exports=o,e.exports.parse=o,e.exports.stringify=function e(t){"Feature"===t.type&&(t=t.geometry);function i(e){return e.join(" ")}function n(e){return e.map(i).join(", ")}function o(e){return e.map(n).map(r).join(", ")}function r(e){return"("+e+")"}switch(t.type){case"Point":return"POINT ("+i(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+o(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+t.coordinates.map(o).map(r).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+o(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(e).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var i=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,n=new RegExp("^"+i.source+"(\\s"+i.source+"){1,}");function o(e){var t,i=e.split(";"),o=i.pop(),r=(i.shift()||"").split("=").pop(),a=0;function s(e){var t=o.substring(a).match(e);return t?(a+=t[0].length,t[0]):null}function l(){s(/^\s*/)}function c(){l();for(var e,t=0,i=[],o=[i],r=i;e=s(/^(\()/)||s(/^(\))/)||s(/^(\,)/)||s(n);){if("("===e)o.push(r),r=[],o[o.length-1].push(r),t++;else if(")"===e){if(0===r.length)return null;if(!(r=o.pop()))return null;if(0===--t)break}else if(","===e)r=[],o[o.length-1].push(r);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(r,e.split(/\s/g).map(parseFloat))}l()}return 0!==t?null:i}function u(){for(var e,t,i=[];t=s(n)||s(/^(\,)/);)","===t?(i.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),l();return e?(i.push(e),i.length?i:null):null}function p(){return function(){if(!s(/^(point)/i))return null;if(l(),!s(/^(\()/))return null;var e=u();return e?(l(),s(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function(){if(!s(/^(linestring)/i))return null;if(l(),!s(/^(\()/))return null;var e=u();return e&&s(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function(){if(!s(/^(polygon)/i))return null;l();var e=c();return e?{type:"Polygon",coordinates:e}:null}()||function(){if(!s(/^(multipoint)/i))return null;l();var e=o.substring(o.indexOf("(")+1,o.length-1).replace(/\(/g,"").replace(/\)/g,"");o="MULTIPOINT ("+e+")";var t=c();return t?(l(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!s(/^(multilinestring)/i))return null;l();var e=c();return e?(l(),{type:"MultiLineString",coordinates:e}):null}()||function(){if(!s(/^(multipolygon)/i))return null;l();var e=c();return e?{type:"MultiPolygon",coordinates:e}:null}()||function(){var e,t=[];if(!s(/^(geometrycollection)/i))return null;if(l(),!s(/^(\()/))return null;for(;e=p();)t.push(e),l(),s(/^(\,)/),l();return s(/^(\))/)?{type:"GeometryCollection",geometries:t}:null}()}return(t=p())&&r.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),t}},function(e,t,i){"use strict";var n={};function o(e,t){e=Math.round(e*t),(e<<=1)<0&&(e=~e);for(var i="";e>=32;)i+=String.fromCharCode(63+(32|31&e)),e>>=5;return i+=String.fromCharCode(e+63)}function r(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].slice().reverse());return t}n.decode=function(e,t){for(var i,n=0,o=0,r=0,a=[],s=0,l=0,c=null,u=Math.pow(10,t||5);n<e.length;){c=null,s=0,l=0;do{l|=(31&(c=e.charCodeAt(n++)-63))<<s,s+=5}while(c>=32);i=1&l?~(l>>1):l>>1,s=l=0;do{l|=(31&(c=e.charCodeAt(n++)-63))<<s,s+=5}while(c>=32);o+=i,r+=1&l?~(l>>1):l>>1,a.push([o/u,r/u])}return a},n.encode=function(e,t){if(!e.length)return"";for(var i=Math.pow(10,t||5),n=o(e[0][0],i)+o(e[0][1],i),r=1;r<e.length;r++){var a=e[r],s=e[r-1];n+=o(a[0]-s[0],i),n+=o(a[1]-s[1],i)}return n},n.fromGeoJSON=function(e,t){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return n.encode(r(e.coordinates),t)},n.toGeoJSON=function(e,t){return{type:"LineString",coordinates:r(n.decode(e,t))}},e.exports&&(e.exports=n)},function(e,t,i){!function(e){"use strict";function t(){}function i(e){if(!e)return t;var i,n,o=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(i=n=0),e[0]=(i+=e[0])*o+a,e[1]=(n+=e[1])*r+s}}function n(e,t){for(var i=0,n=e.length;i<n;){var o=i+n>>>1;e[o]<t?i=o+1:n=o}return i}function o(e,t){var i={type:"Feature",id:t.id,properties:t.properties||{},geometry:r(e,t)};return null==t.id&&delete i.id,i}function r(e,t){var n=i(e.transform),o=e.arcs;function r(e,t){t.length&&t.pop();for(var i,r=o[e<0?~e:e],a=0,s=r.length;a<s;++a)t.push(i=r[a].slice()),n(i,a);e<0&&function(e,t){for(var i,n=e.length,o=n-t;o<--n;)i=e[o],e[o++]=e[n],e[n]=i}(t,s)}function a(e){return e=e.slice(),n(e,0),e}function s(e){for(var t=[],i=0,n=e.length;i<n;++i)r(e[i],t);return t.length<2&&t.push(t[0].slice()),t}function l(e){for(var t=s(e);t.length<4;)t.push(t[0].slice());return t}function c(e){return e.map(l)}var u={Point:function(e){return a(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(a)},LineString:function(e){return s(e.arcs)},MultiLineString:function(e){return e.arcs.map(s)},Polygon:function(e){return c(e.arcs)},MultiPolygon:function(e){return e.arcs.map(c)}};return function e(t){var i=t.type;return"GeometryCollection"===i?{type:i,geometries:t.geometries.map(e)}:i in u?{type:i,coordinates:u[i](t)}:null}(t)}function a(e,t){var i={},n={},o={},r=[],a=-1;function s(e,t){for(var n in e){var o=e[n];delete t[o.start],delete o.start,delete o.end,o.forEach(function(e){i[e<0?~e:e]=1}),r.push(o)}}return t.forEach(function(i,n){var o,r=e.arcs[i<0?~i:i];r.length<3&&!r[1][0]&&!r[1][1]&&(o=t[++a],t[a]=i,t[n]=o)}),t.forEach(function(t){var i,r,a=function(t){var i,n=e.arcs[t<0?~t:t],o=n[0];return e.transform?(i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})):i=n[n.length-1],t<0?[i,o]:[o,i]}(t),s=a[0],l=a[1];if(i=o[s])if(delete o[i.end],i.push(t),i.end=l,r=n[l]){delete n[r.start];var c=r===i?i:i.concat(r);n[c.start=i.start]=o[c.end=r.end]=c}else n[i.start]=o[i.end]=i;else if(i=n[l])if(delete n[i.start],i.unshift(t),i.start=s,r=o[s]){delete o[r.end];var u=r===i?i:r.concat(i);n[u.start=r.start]=o[u.end=i.end]=u}else n[i.start]=o[i.end]=i;else n[(i=[t]).start=s]=o[i.end=l]=i}),s(o,n),s(n,o),t.forEach(function(e){i[e<0?~e:e]||r.push([e])}),r}function s(e,t,i){var n=[];function o(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function r(e){e.forEach(o)}function s(e){e.forEach(r)}if(arguments.length>1){var l,c=[],u={LineString:r,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}};!function e(t){"GeometryCollection"===t.type?t.geometries.forEach(e):t.type in u&&(l=t,u[t.type](t.arcs))}(t),c.forEach(arguments.length<3?function(e){n.push(e[0].i)}:function(e){i(e[0].g,e[e.length-1].g)&&n.push(e[0].i)})}else for(var p=0,d=e.arcs.length;p<d;++p)n.push(p);return{type:"MultiLineString",arcs:a(e,n)}}function l(e){var t=e[0],i=e[1],n=e[2];return Math.abs((t[0]-n[0])*(i[1]-t[1])-(t[0]-i[0])*(n[1]-t[1]))}function c(e,t){var i={},n=[],o=[];function s(e){e.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(e)})}),n.push(e)}function l(t){return Math.abs(function(e){for(var t,i=-1,n=e.length,o=e[n-1],r=0;++i<n;)t=o,o=e[i],r+=t[0]*o[1]-t[1]*o[0];return r/2}(r(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}return t.forEach(function(e){"Polygon"===e.type?s(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(s)}),n.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,o.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),n.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:o.map(function(t){var n,o=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].length<2&&o.push(e)})})}),o=a(e,o),(n=o.length)>1)for(var r,s,c=1,u=l(o[0]);c<n;++c)(r=l(o[c]))>u&&(s=o[0],o[0]=o[c],o[c]=s,u=r);return o})}}function u(e,t){return e[1][2]-t[1][2]}e.version="1.6.26",e.mesh=function(e){return r(e,s.apply(this,arguments))},e.meshArcs=s,e.merge=function(e){return r(e,c.apply(this,arguments))},e.mergeArcs=c,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return o(e,t)})}:o(e,t)},e.neighbors=function(e){var t={},i=e.map(function(){return[]});function o(e,i){e.forEach(function(e){e<0&&(e=~e);var n=t[e];n?n.push(i):t[e]=[i]})}function r(e,t){e.forEach(function(e){o(e,t)})}var a={LineString:o,MultiLineString:r,Polygon:r,MultiPolygon:function(e,t){e.forEach(function(e){r(e,t)})}};for(var s in e.forEach(function e(t,i){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,i)}):t.type in a&&a[t.type](t.arcs,i)}),t)for(var l=t[s],c=l.length,u=0;u<c;++u)for(var p=u+1;p<c;++p){var d,h=l[u],f=l[p];(d=i[h])[s=n(d,f)]!==f&&d.splice(s,0,f),(d=i[f])[s=n(d,h)]!==h&&d.splice(s,0,h)}return i},e.presimplify=function(e,n){var o=i(e.transform),r=function(e){if(!e)return t;var i,n,o=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(i=n=0);var l=Math.round((e[0]-a)/o),c=Math.round((e[1]-s)/r);e[0]=l-i,e[1]=c-n,i=l,n=c}}(e.transform),a=function(){var e={},t=[],i=0;function n(e,i){for(;i>0;){var n=(i+1>>1)-1,o=t[n];if(u(e,o)>=0)break;t[o._=i]=o,t[e._=i=n]=e}}function o(e,n){for(;;){var o=n+1<<1,r=o-1,a=n,s=t[a];if(r<i&&u(t[r],s)<0&&(s=t[a=r]),o<i&&u(t[o],s)<0&&(s=t[a=o]),a===n)break;t[s._=n]=s,t[e._=n=a]=e}}return e.push=function(e){return n(t[e._=i]=e,i++),i},e.pop=function(){if(!(i<=0)){var e,n=t[0];return--i>0&&(e=t[i],o(t[e._=0]=e,0)),n}},e.remove=function(e){var r,a=e._;if(t[a]===e)return a!==--i&&(u(r=t[i],e)<0?n:o)(t[r._=a]=r,a),a},e}();function s(e){a.remove(e),e[1][2]=n(e),a.push(e)}return n||(n=l),e.arcs.forEach(function(e){var t,i,l,c,u=[],p=0;for(i=0,l=e.length;i<l;++i)c=e[i],o(e[i]=[c[0],c[1],1/0],i);for(i=1,l=e.length-1;i<l;++i)(t=e.slice(i-1,i+2))[1][2]=n(t),u.push(t),a.push(t);for(i=0,l=u.length;i<l;++i)(t=u[i]).previous=u[i-1],t.next=u[i+1];for(;t=a.pop();){var d=t.previous,h=t.next;t[1][2]<p?t[1][2]=p:p=t[1][2],d&&(d.next=h,d[2]=t[2],s(d)),h&&(h.previous=d,h[0]=t[0],s(h))}e.forEach(r)}),e}}(t)},function(e,t,i){(function(t){var n=function(){"use strict";var e,n=/\s*/g,o=/^\s*|\s*$/g,r=/\s+/;function a(e){if(!e||!e.length)return 0;for(var t=0,i=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t)|0;return i}function s(e,t){return e.getElementsByTagName(t)}function l(e,t){return e.getAttribute(t)}function c(e,t){return parseFloat(l(e,t))}function u(e,t){var i=s(e,t);return i.length?i[0]:null}function p(e){for(var t=0,i=[];t<e.length;t++)i[t]=parseFloat(e[t]);return i}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function h(e){return p(e.replace(n,"").split(","))}function f(e){for(var t=e.replace(o,"").split(r),i=[],n=0;n<t.length;n++)i.push(h(t[n]));return i}function m(e){var t,i=[c(e,"lon"),c(e,"lat")],n=u(e,"ele"),o=u(e,"gpxtpx:hr")||u(e,"hr"),r=u(e,"time");return n&&(t=parseFloat(d(n)),isNaN(t)||i.push(t)),{coordinates:i,time:r?d(r):null,heartRate:o?parseFloat(d(o)):null}}function y(t){return void 0!==t.xml?t.xml:e.serializeToString(t)}return"undefined"!=typeof XMLSerializer?e=new XMLSerializer:"object"!=typeof t||t.browser||(e=new(i(366).XMLSerializer)),{kml:function(e){for(var t={type:"FeatureCollection",features:[]},i={},n=["Polygon","LineString","Point","Track","gx:Track"],o=s(e,"Placemark"),r=s(e,"Style"),c=s(e,"StyleMap"),m=0;m<r.length;m++)i["#"+l(r[m],"id")]=a(y(r[m])).toString(16);for(var g=0;g<c.length;g++)i["#"+l(c[g],"id")]=a(y(c[g])).toString(16);for(var v=0;v<o.length;v++)t.features=t.features.concat(x(o[v]));function b(e){var t,i;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(i=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(2)),[t,isNaN(i)?void 0:i]}function _(e){var t=s(e,"coord"),i=[],n=[];0===t.length&&(t=s(e,"gx:coord"));for(var o=0;o<t.length;o++)i.push(p(d(t[o]).split(" ")));for(var r=s(e,"when"),a=0;a<r.length;a++)n.push(d(r[a]));return{coords:i,times:n}}function x(e){var t,o=function e(t){var i,o,r,a,l,c=[],p=[];if(u(t,"MultiGeometry"))return e(u(t,"MultiGeometry"));if(u(t,"MultiTrack"))return e(u(t,"MultiTrack"));if(u(t,"gx:MultiTrack"))return e(u(t,"gx:MultiTrack"));for(r=0;r<n.length;r++)if(o=s(t,n[r]))for(a=0;a<o.length;a++)if(i=o[a],"Point"===n[r])c.push({type:"Point",coordinates:h(d(u(i,"coordinates")))});else if("LineString"===n[r])c.push({type:"LineString",coordinates:f(d(u(i,"coordinates")))});else if("Polygon"===n[r]){var m=s(i,"LinearRing"),y=[];for(l=0;l<m.length;l++)y.push(f(d(u(m[l],"coordinates"))));c.push({type:"Polygon",coordinates:y})}else if("Track"===n[r]||"gx:Track"===n[r]){var g=_(i);c.push({type:"LineString",coordinates:g.coords}),g.times.length&&p.push(g.times)}return{geoms:c,coordTimes:p}}(e),r={},a=d(u(e,"name")),c=d(u(e,"styleUrl")),p=d(u(e,"description")),m=u(e,"TimeSpan"),y=u(e,"ExtendedData"),g=u(e,"LineStyle"),v=u(e,"PolyStyle");if(!o.geoms.length)return[];if(a&&(r.name=a),"#"!==c[0]&&(c="#"+c),c&&i[c]&&(r.styleUrl=c,r.styleHash=i[c]),p&&(r.description=p),m){var x=d(u(m,"begin")),w=d(u(m,"end"));r.timespan={begin:x,end:w}}if(g){var C=b(d(u(g,"color"))),S=C[0],M=C[1],E=parseFloat(d(u(g,"width")));S&&(r.stroke=S),isNaN(M)||(r["stroke-opacity"]=M),isNaN(E)||(r["stroke-width"]=E)}if(v){var k=b(d(u(v,"color"))),$=k[0],T=k[1],L=d(u(v,"fill")),I=d(u(v,"outline"));$&&(r.fill=$),isNaN(T)||(r["fill-opacity"]=T),L&&(r["fill-opacity"]="1"===L?1:0),I&&(r["stroke-opacity"]="1"===I?1:0)}if(y){var P=s(y,"Data"),O=s(y,"SimpleData");for(t=0;t<P.length;t++)r[P[t].getAttribute("name")]=d(u(P[t],"value"));for(t=0;t<O.length;t++)r[O[t].getAttribute("name")]=d(O[t])}o.coordTimes.length&&(r.coordTimes=1===o.coordTimes.length?o.coordTimes[0]:o.coordTimes);var N={type:"Feature",geometry:1===o.geoms.length?o.geoms[0]:{type:"GeometryCollection",geometries:o.geoms},properties:r};return l(e,"id")&&(N.id=l(e,"id")),[N]}return t},gpx:function(e){var t,i,n=s(e,"trk"),o=s(e,"rte"),r=s(e,"wpt"),a={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(i=c(n[t]))&&a.features.push(i);for(t=0;t<o.length;t++)(i=p(o[t]))&&a.features.push(i);for(t=0;t<r.length;t++)a.features.push(h(r[t]));function l(e,t){var i=s(e,t),n=[],o=[],r=[],a=i.length;if(a<2)return{};for(var l=0;l<a;l++){var c=m(i[l]);n.push(c.coordinates),c.time&&o.push(c.time),c.heartRate&&r.push(c.heartRate)}return{line:n,times:o,heartRates:r}}function c(e){for(var t,i=s(e,"trkseg"),n=[],o=[],r=[],a=0;a<i.length;a++)(t=l(i[a],"trkpt")).line&&n.push(t.line),t.times&&t.times.length&&o.push(t.times),t.heartRates&&t.heartRates.length&&r.push(t.heartRates);if(0!==n.length){var c=f(e);return o.length&&(c.coordTimes=1===n.length?o[0]:o),r.length&&(c.heartRates=1===n.length?r[0]:r),{type:"Feature",properties:c,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function p(e){var t=l(e,"rtept");if(t.line)return{type:"Feature",properties:f(e),geometry:{type:"LineString",coordinates:t.line}}}function h(e){var t=f(e);return t.sym=d(u(e,"sym")),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:m(e).coordinates}}}function f(e){var t,i=["name","desc","author","copyright","link","time","keywords"],n={};for(t=0;t<i.length;t++)n[i[t]]=d(u(e,i[t]));return function(e){var t={};for(var i in e)e[i]&&(t[i]=e[i]);return t}(n)}return a}}}();e.exports=n}).call(this,i(41))},,function(e,t,i){e.exports=function(e){"use strict";var t={iconSize:[100,100],iconAnchor:[50,50],popupAnchor:[2,-40],shadowAnchor:[39,45],shadowSize:[54,51],className:"vector-marker",prefix:"fa",spinClass:"fa-spin",extraIconClasses:"",extraDivClasses:"",icon:"home",markerColor:"red",iconColor:"white",viewBox:"0 0 32 52"};return function(i){function n(n){if(n.icon.size){var o=n.icon.size;n.iconSize=[2*o,2*o],n.iconAnchor=[o,o]}else n.icon.size=50;i.call(this,n),e.Util.setOptions(this,t),e.Util.setOptions(this,n)}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.createIcon=function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),i=this.options,n=i.icon;return t.innerHTML='<i class="'+n.prefix+" fa-"+n.icon+'" style="color:'+i.markerColor+"; width: "+n.size+"px; height: "+n.size+'px"></i>',i.className+=i.className.length>0?" "+i.extraDivClasses:i.extraDivClasses,this._setIconStyles(t,"icon"),this._setIconStyles(t,"icon-"+i.markerColor),t},n.prototype.createShadow=function(){if(1==this.options.icon.shadow){var e=document.createElement("div");return this._setIconStyles(e,"shadow"),e}},n.prototype._setIconStyles=function(e,t){var i,n,o=this.options;"shadow"===t?(i=o.shadowSize,n=o.shadowAnchor||o.iconAnchor):(i=o.iconSize,n=o.iconAnchor),!n&&i&&(n=i.map(function(e){return e/2})),e.className="vector-marker-"+t+" "+o.className,n&&(e.style.marginLeft=-n[0]+"px",e.style.marginTop=-n[1]+"px"),i&&(e.style.width=i[0]+"px",e.style.height=i[1]+"px")},n}(e.Icon)}(i(39))},function(e,t,i){e.exports=function(e,t,i,n){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i,n=n&&n.hasOwnProperty("default")?n.default:n;var o={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}};function r(e){if(e)return e.setAttribute("style","display:none;"),e}function a(e){if(e)return e.removeAttribute("style"),e}function s(n){n[n.length-1];var o=n.map(function(e){return[e.lat,e.lng]}),r=new e.Polyline(o),a=new e.Polygon(o);return{length:1e3*t(r.toGeoJSON(),{units:"kilometers"}),area:i(a.toGeoJSON())}}var l={activeColor:"#ABE67E",completedColor:"#C8F2BE"},c=function(e){this._options=L.extend({},l,this._options,e)};c.prototype.getSymbol=function(e){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:1,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[e]};var u=function(e,t){return t||(t=document),t.querySelector(e)};function p(e){return e.toLocaleString()}var d={imports:{numberFormat:p},interpolate:/{{([\s\S]+?)}}/g},h=n('<a class="{{ model.className }}-toggle js-toggle" href="#" title="Measure distances and areas">Measure</a>\r\n<div class="{{ model.className }}-interaction js-interaction">\r\n  <div class="js-startprompt startprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <ul class="tasks">\r\n      <a href="#" class="js-start start">Create a new measurement</a>\r\n    </ul>\r\n  </div>\r\n  <div class="js-measuringprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <p class="js-starthelp">Start creating a measurement by adding points to the map</p>\r\n    <div class="js-results results"></div>\r\n    <ul class="js-measuretasks tasks">\r\n      <li><a href="#" class="js-cancel cancel">Cancel</a></li>\r\n      <li><a href="#" class="js-undo undo">Undo</a></li>\r\n      <li><a href="#" class="js-finish finish">Finish measurement</a></li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n',d),f=n('<% if (model.pointCount > 0) { %>\r\n  <div class="group">\r\n      <table>\r\n        <tr>\r\n          <th style="padding-left:5px; padding-right:5px">Lat</th>\r\n          <th style="padding-left:5px; padding-right:5px">Lon</th>\r\n          <th style="padding-left:5px; padding-right:5px">Length (ft)</th>\r\n        </tr><tr>\r\n\r\n          <% for (i=0; i < model.points.length; i++) { %>\r\n            </tr><tr>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lat, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lng, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ model.lengths[i-1] }}\r\n              </td>\r\n            </tr>\r\n          <% } %>\r\n\r\n      </table>\r\n  </div>\r\n<% } %>\r\n\r\n<% if (model.pointCount > 1) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n</div>\r\n<% } %>\r\n<% if (model.pointCount > 2) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n</div>\r\n<% } %>\r\n',d),m=n('<h3>Point location</h3>\r\n<table>\r\n  <tr>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n  </tr>\r\n  <tr>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.y, 6) }}\r\n    </td>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.x, 6) }}\r\n    </td>\r\n  </tr>\r\n</table>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this location</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',d),y=n('<h3>Linear measurement</h3>\r\n<p>{{ model.lengthDisplay }} Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this line</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',d),g=n('<h3>Area measurement</h3>\r\n\r\n\r\n<% if (model.pointCount > 0) { %>\r\n  <p>\r\n    <table>\r\n      <tr>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Length (ft)</span></th>\r\n      </tr>\r\n      <tr>\r\n        <% for (i=0; i < model.points.length; i++) { %>\r\n          </tr><tr>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lat, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lng, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ model.lengths[i-1] }}\r\n            </td>\r\n          </tr>\r\n        <% } %>\r\n      </table>\r\n  </p>\r\n<% } %>\r\n<p>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n<p>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this area</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',d);return e.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet",activeColor:"#ABE67E",completedColor:"#74acbd",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(t){e.setOptions(this,t);var i=this.options,n=i.activeColor,r=i.completedColor;this._symbols=new c({activeColor:n,completedColor:r}),this.options.units=Object.assign({},o,this.options.units)},onAdd:function(t){return this._map=t,this._latlngs=[],this._lengths=[],this._lengthNotations=[],this._vertexCircleMarkers=[],this._measureFeatures=[],this._initLayout(),t.on("click",this._collapse,this),this._layer=e.layerGroup().addTo(t),this._container},onRemove:function(e){e.off("click",this._collapse,this),e.removeLayer(this._layer)},_initLayout:function(){var t=this._className,i=this._container=e.DomUtil.create("div",t+" leaflet-bar");i.innerHTML=h({model:{className:t}}),i.setAttribute("aria-haspopup",!0),e.DomEvent.disableClickPropagation(i),e.DomEvent.disableScrollPropagation(i);var n=this.$toggle=u(".js-toggle",i);this.$interaction=u(".js-interaction",i);var o=u(".js-start",i),r=u(".js-cancel",i),a=u(".js-undo",i),s=u(".js-finish",i);this.$startPrompt=u(".js-startprompt",i),this.$measuringPrompt=u(".js-measuringprompt",i),this.$startHelp=u(".js-starthelp",i),this.$results=u(".js-results",i),this.$measureTasks=u(".js-measuretasks",i),this._collapse(),this._updateMeasureNotStarted(),e.Browser.android||(e.DomEvent.on(i,"mouseenter",this._expand,this),e.DomEvent.on(i,"mouseleave",this._collapse,this)),e.DomEvent.on(n,"click",e.DomEvent.stop),e.Browser.touch?e.DomEvent.on(n,"click",this._expand,this):e.DomEvent.on(n,"focus",this._expand,this),e.DomEvent.on(o,"click",e.DomEvent.stop),e.DomEvent.on(o,"click",this._startMeasure,this),e.DomEvent.on(r,"click",e.DomEvent.stop),e.DomEvent.on(r,"click",this._finishMeasure,this),e.DomEvent.on(a,"click",e.DomEvent.stop),e.DomEvent.on(a,"click",this._undoMeasure,this),e.DomEvent.on(s,"click",e.DomEvent.stop),e.DomEvent.on(s,"click",this._handleMeasureDoubleClick,this)},_expand:function(){r(this.$toggle),a(this.$interaction)},_collapse:function(){this._locked||(r(this.$interaction),a(this.$toggle))},_updateMeasureNotStarted:function(){r(this.$startHelp),r(this.$results),r(this.$measureTasks),r(this.$measuringPrompt),a(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){r(this.$results),a(this.$startHelp),a(this.$measureTasks),r(this.$startPrompt),a(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){r(this.$startHelp),a(this.$results),a(this.$measureTasks),r(this.$startPrompt),a(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureLengths=e.featureGroup().addTo(this._layer),this._measureVertexes=e.featureGroup().addTo(this._layer),this._captureMarker=e.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),e.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_undoMeasure:function(){this._latlngs=this._latlngs.slice(0,-1),this._removeLastLengthNotation(),this._removeLastVertex(),this._latlngs.length>0&&(this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._updateResults()),0===this._latlngs.length&&this._updateMeasureStartedNoPoints()},_finishMeasure:function(t){var i;i=!0!==t;var n=Object.assign({},this._resultsModel,{points:this._latlngs});this._locked=!1,e.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(i),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",n,!1)},_clearMeasure:function(e){this._latlngs=[],this._resultsModel=null,e&&this._measureLengths.clearLayers(),this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(e.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(e){var t=this.options.units;return{lengthDisplay:i(e.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:i(e.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function i(e,i,o,r,a){var s;return i&&t[i]?(s=n(0,t[i]),s=o&&t[o]?s+" ("+n(0,t[o])+")":n(0,null)):n(0,null)}function n(e,t,i,n){var o=t.display;return[formattedNumber,{acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles"}[o]||o].join(" ")}},_getShorterMeasurementDisplayStrings:function(e){var t=this.options.units;return{lengthDisplay:i(e.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,".",this.options.thousandsSep),areaDisplay:i(e.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function i(e,i,o,r,a){var s;return i?(s=n(e,t[i]),o&&t[o]&&(s=s+" ("+n(e,t[o])+")")):s=n(e,null),s}function n(e,t,i,n){var o=Object.assign({factor:1,decimals:2},t);return p(e*o.factor,o.decimals)}},_updateResults:function(){var e=s(this._latlngs),t=this._resultsModel=Object.assign({},e,this._getShorterMeasurementDisplayStrings(e),{pointCount:this._latlngs.length,points:this._latlngs,lengths:this._lengths});this.$results.innerHTML=f({model:t})},_handleMeasureMove:function(t){this._measureDrag?this._measureDrag.setLatLng(t.latlng):this._measureDrag=e.circleMarker(t.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var t=this._latlngs,i=e.layerGroup();i.addTo(this._layer),this._measureFeatures.push(i),this._measureLengths.removeFrom(this._layer),this._measureLengths.addTo(i),this._finishMeasure(!0);for(var n=[],o=0;o<this._lengths.length;o++)n[o]=this._lengths[o];if(t.length){if(t.length>2){t.push((t||[])[0]);var r=t.length,a=t[r-2],l=t[r-1],c=e.latLngBounds(a,l).getCenter(),p=s([a,l]);this._addNewLengthNotation(c,p).addTo(this._measureLengths);var d=this._lengths.length;n[d-1]=this._lengths[d-1]}var h,f,v,b,_,x=s(t);if(1===t.length)h=e.circleMarker(t[0],this._symbols.getSymbol("resultPoint")),f=m({model:x});else if(2===t.length)h=e.polyline(t,this._symbols.getSymbol("resultLine")),f=y({model:Object.assign({},x,this._getShorterMeasurementDisplayStrings(x))});else{h=e.polygon(t,this._symbols.getSymbol("resultArea"));var w=Object.assign({},x,this._getShorterMeasurementDisplayStrings(x),{pointCount:t.length,points:t,lengths:this._lengths});f=g({model:w})}this._lengths=[],this._vertexCircleMarkers=[],(v=e.DomUtil.create("div","")).innerHTML=f,(b=u(".js-zoomto",v))&&(e.DomEvent.on(b,"click",e.DomEvent.stop),e.DomEvent.on(b,"click",function(){h.getBounds?this._map.fitBounds(h.getBounds(),{padding:[20,20],maxZoom:17}):h.getLatLng&&this._map.panTo(h.getLatLng())},this)),(_=u(".js-deletemarkup",v))&&(e.DomEvent.on(_,"click",e.DomEvent.stop),e.DomEvent.on(_,"click",function(){var e=this._measureFeatures.indexOf(i);this._measureFeatures[e].removeFrom(this._layer)},this)),h.addTo(i),h.bindPopup(v,this.options.popupOptions),h.getBounds?h.openPopup(h.getBounds().getCenter()):h.getLatLng&&h.openPopup(h.getLatLng())}},_handleMeasureClick:function(t){var i=this._map.mouseEventToLatLng(t.originalEvent),n=(this._latlngs||[]).slice(-1)[0],o=(this._latlngs||[])[0],r=this._symbols.getSymbol("measureVertex");if(!n||!i.equals(n)){if(this._latlngs.push(i),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(e){e.setStyle(r),e._path&&e._path.setAttribute("class",r.className)}),this._addNewVertex(i),o){var a=this._latlngs.length,l=this._latlngs[a-2],c=e.latLngBounds(l,i).getCenter(),u=s([l,i]);this._addNewLengthNotation(c,u).addTo(this._measureLengths)}this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()}this._updateResults(),this._updateMeasureStartedWithPoints()},_addNewLengthNotation:function(t,i){var n=this._getShorterMeasurementDisplayStrings(i),o=e.divIcon({className:"my-div-icon",html:n.lengthDisplay}),r=e.marker(t,{icon:o});return this._lengths.push(n.lengthDisplay),this._lengthNotations.push(r),r},_removeLastLengthNotation:function(){var e=this._lengthNotations.length;this._lengthNotations.length>0&&this._lengthNotations[e-1].removeFrom(this._measureLengths),this._lengthNotations=this._lengthNotations.slice(0,-1),this._lengths=this._lengths.slice(0,-1)},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(t){var i=e.circleMarker(t,this._symbols.getSymbol("measureVertexActive"));this._vertexCircleMarkers.push(i),i.addTo(this._measureVertexes)},_removeLastVertex:function(){var e=this._vertexCircleMarkers.length;this._vertexCircleMarkers.length>0&&this._vertexCircleMarkers[e-1].removeFrom(this._measureVertexes),this._vertexCircleMarkers=this._vertexCircleMarkers.slice(0,-1)},_addMeasureArea:function(t){t.length<3?this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null):this._measureArea?this._measureArea.setLatLngs(t):this._measureArea=e.polygon(t,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(t){t.length<2?this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null):this._measureBoundary?this._measureBoundary.setLatLngs(t):this._measureBoundary=e.polyline(t,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}})}(i(39),i(425),i(369),i(370))},function(e,t,i){"use strict";i.r(t);var n=i(296);var o=6378137;function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var i=1;i<e.length;i++)t-=Math.abs(a(e[i]))}return t}function a(e){var t,i,n,r,a,l,c=0,u=e.length;if(u>2){for(l=0;l<u;l++)l===u-2?(n=u-2,r=u-1,a=0):l===u-1?(n=u-1,r=0,a=1):(n=l,r=l+1,a=l+2),t=e[n],i=e[r],c+=(s(e[a][0])-s(t[0]))*Math.sin(s(i[1]));c=c*o*o/2}return c}function s(e){return e*Math.PI/180}t.default=function(e){return Object(n.a)(e,function(e,t){return e+function e(t){var i,n=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(i=0;i<t.coordinates.length;i++)n+=r(t.coordinates[i]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<t.geometries.length;i++)n+=e(t.geometries[i]);return n}}(t)},0)}},function(e,t,i){var n=i(371),o=i(400),r=i(403),a=i(404),s=i(405),l=i(311),c=i(304),u=i(406),p=i(314),d=i(409),h=i(315),f=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,v=/($^)/,b=/['\n\r\u2028\u2029\\]/g;e.exports=function(e,t,i){var _=d.imports._.templateSettings||d;i&&c(e,t,i)&&(t=void 0),e=h(e),t=n({},t,_,a);var x,w,C=n({},t.imports,_.imports,a),S=u(C),M=r(C,S),E=0,k=t.interpolate||v,$="__p += '",T=RegExp((t.escape||v).source+"|"+k.source+"|"+(k===p?g:v).source+"|"+(t.evaluate||v).source+"|$","g"),L="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(T,function(t,i,n,o,r,a){return n||(n=o),$+=e.slice(E,a).replace(b,s),i&&(x=!0,$+="' +\n__e("+i+") +\n'"),r&&(w=!0,$+="';\n"+r+";\n__p += '"),n&&($+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),E=a+t.length,t}),$+="';\n";var I=t.variable;I||($="with (obj) {\n"+$+"\n}\n"),$=(w?$.replace(f,""):$).replace(m,"$1").replace(y,"$1;"),$="function("+(I||"obj")+") {\n"+(I?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(x?", __e = _.escape":"")+(w?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+$+"return __p\n}";var P=o(function(){return Function(S,L+"return "+$).apply(void 0,M)});if(P.source=$,l(P))throw P;return P}},function(e,t,i){var n=i(372),o=i(382),r=i(388),a=o(function(e,t,i,o){n(t,r(t),e,o)});e.exports=a},function(e,t,i){var n=i(373),o=i(297);e.exports=function(e,t,i,r){var a=!i;i||(i={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=r?r(i[c],e[c],c,i,e):void 0;void 0===u&&(u=e[c]),a?o(i,c,u):n(i,c,u)}return i}},function(e,t,i){var n=i(297),o=i(283),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var a=e[t];r.call(e,t)&&o(a,i)&&(void 0!==i||t in e)||n(e,t,i)}},function(e,t,i){var n=i(375),o=i(381);e.exports=function(e,t){var i=o(e,t);return n(i)?i:void 0}},function(e,t,i){var n=i(299),o=i(378),r=i(262),a=i(380),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,p=c.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!r(e)||o(e))&&(n(e)?d:s).test(a(e))}},function(e,t,i){var n=i(281),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=r.call(e,s),i=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=i:delete e[s]),o}},function(e,t){var i=Object.prototype.toString;e.exports=function(e){return i.call(e)}},function(e,t,i){var n,o=i(379),r=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!r&&r in e}},function(e,t,i){var n=i(282)["__core-js_shared__"];e.exports=n},function(e,t){var i=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,i){var n=i(301),o=i(304);e.exports=function(e){return n(function(t,i){var n=-1,r=i.length,a=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(i[0],i[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++n<r;){var l=i[n];l&&e(t,l,n,a)}return t})}},function(e,t,i){var n=i(303),o=Math.max;e.exports=function(e,t,i){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),l=Array(s);++a<s;)l[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=i(l),n(e,this,c)}}},function(e,t,i){var n=i(385),o=i(387)(n);e.exports=o},function(e,t,i){var n=i(386),o=i(298),r=i(302),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var i=800,n=16,o=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=o(),s=n-(a-r);if(r=a,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,i){var n=i(307),o=i(398),r=i(284);e.exports=function(e){return r(e)?n(e,!0):o(e)}},function(e,t){e.exports=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}},function(e,t,i){var n=i(391),o=i(259),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,i){var n=i(258),o=i(259),r="[object Arguments]";e.exports=function(e){return o(e)&&n(e)==r}},function(e,t,i){(function(e){var n=i(282),o=i(393),r=t&&!t.nodeType&&t,a=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===r?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;e.exports=l}).call(this,i(309)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,i){var n=i(395),o=i(396),r=i(397),a=r&&r.isTypedArray,s=a?o(a):n;e.exports=s},function(e,t,i){var n=i(258),o=i(305),r=i(259),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return r(e)&&o(e.length)&&!!a[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,i){(function(e){var n=i(300),o=t&&!t.nodeType&&t,r=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=r&&r.exports===o&&n.process,s=function(){try{var e=r&&r.require&&r.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,i(309)(e))},function(e,t,i){var n=i(262),o=i(310),r=i(399),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=o(e),i=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&i.push(s);return i}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},function(e,t,i){var n=i(303),o=i(301),r=i(311),a=o(function(e,t){try{return n(e,void 0,t)}catch(e){return r(e)?e:new Error(e)}});e.exports=a},function(e,t,i){var n=i(258),o=i(402),r=i(259),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,p=c.call(Object);e.exports=function(e){if(!r(e)||n(e)!=a)return!1;var t=o(e);if(null===t)return!0;var i=u.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&c.call(i)==p}},function(e,t,i){var n=i(312)(Object.getPrototypeOf,Object);e.exports=n},function(e,t,i){var n=i(313);e.exports=function(e,t){return n(t,function(t){return e[t]})}},function(e,t,i){var n=i(283),o=Object.prototype,r=o.hasOwnProperty;e.exports=function(e,t,i,a){return void 0===e||n(e,o[i])&&!r.call(a,i)?t:e}},function(e,t){var i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=function(e){return"\\"+i[e]}},function(e,t,i){var n=i(307),o=i(407),r=i(284);e.exports=function(e){return r(e)?n(e):o(e)}},function(e,t,i){var n=i(310),o=i(408),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var i in Object(e))r.call(e,i)&&"constructor"!=i&&t.push(i);return t}},function(e,t,i){var n=i(312)(Object.keys,Object);e.exports=n},function(e,t,i){var n=i(410),o={escape:i(415),evaluate:i(416),interpolate:i(314),variable:"",imports:{_:{escape:n}}};e.exports=o},function(e,t,i){var n=i(411),o=i(315),r=/[&<>"']/g,a=RegExp(r.source);e.exports=function(e){return(e=o(e))&&a.test(e)?e.replace(r,n):e}},function(e,t,i){var n=i(412)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=n},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,i){var n=i(281),o=i(313),r=i(308),a=i(414),s=1/0,l=n?n.prototype:void 0,c=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var i=t+"";return"0"==i&&1/t==-s?"-0":i}},function(e,t,i){var n=i(258),o=i(259),r="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==r}},function(e,t){e.exports=/<%-([\s\S]+?)%>/g},function(e,t){e.exports=/<%([\s\S]+?)%>/g},function(e,t,i){"use strict";var n=i(285);i.n(n).a},function(e,t,i){(e.exports=i(9)(!1)).push([e.i,"\n.mb-panel-map[data-v-3788299f] {\n  /*this allows the loading mask to fill the div*/\n  position: relative;\n}\n.mb-map-with-widget[data-v-3788299f] {\n  height: 50%;\n}\n.widget-slot[data-v-3788299f] {\n  display: inline-block;\n  float: left;\n}\n.mb-map-loading-mask[data-v-3788299f] {\n  /*display: inline;*/\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background: rgba(0, 0 ,0 , 0.25);\n  z-index: 1000;\n  text-align: center;\n  vertical-align: middle;\n}\n.mb-map-loading-mask-inner[data-v-3788299f] {\n  position: absolute;\n  top: 40%;\n  left: 40%;\n}\n\n/*small retina*/\n/*@media\n(-webkit-min-device-pixel-ratio: 2),\n(min-resolution: 192dpi),\n(max-width: 39.9375em) {\n  .mb-search-control-input {\n    max-width: 250px;\n  }\n}*/\n\n",""])},,,,,,function(e,t,i){"use strict";function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}i.r(t);var o=function(e){var t=new RegExp('["'+e+"\n]"),i=e.charCodeAt(0);function o(e,t){var n,o,r={},a={},s=[],l=e.length,c=0,u=0;function p(){if(c>=l)return a;if(o)return o=!1,r;var t,n=c;if(34===e.charCodeAt(n)){for(var s=n;s++<l;)if(34===e.charCodeAt(s)){if(34!==e.charCodeAt(s+1))break;++s}return c=s+2,13===(t=e.charCodeAt(s+1))?(o=!0,10===e.charCodeAt(s+2)&&++c):10===t&&(o=!0),e.slice(n+1,s).replace(/""/g,'"')}for(;c<l;){var u=1;if(10===(t=e.charCodeAt(c++)))o=!0;else if(13===t)o=!0,10===e.charCodeAt(c)&&(++c,++u);else if(t!==i)continue;return e.slice(n,c-u)}return e.slice(n)}for(;(n=p())!==a;){for(var d=[];n!==r&&n!==a;)d.push(n),n=p();t&&null==(d=t(d,u++))||s.push(d)}return s}function r(t){return t.map(a).join(e)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}return{parse:function(e,t){var i,r,a=o(e,function(e,o){if(i)return i(e,o-1);r=e,i=t?function(e,t){var i=n(e);return function(n,o){return t(i(n),o,e)}}(e,t):n(e)});return a.columns=r,a},parseRows:o,format:function(t,i){return null==i&&(i=function(e){var t=Object.create(null),i=[];return e.forEach(function(e){for(var n in e)n in t||i.push(t[n]=n)}),i}(t)),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(r).join("\n")}}},r=o(","),a=r.parse,s=r.parseRows,l=r.format,c=r.formatRows,u=o("\t"),p=u.parse,d=u.parseRows,h=u.format,f=u.formatRows;i.d(t,"dsvFormat",function(){return o}),i.d(t,"csvParse",function(){return a}),i.d(t,"csvParseRows",function(){return s}),i.d(t,"csvFormat",function(){return l}),i.d(t,"csvFormatRows",function(){return c}),i.d(t,"tsvParse",function(){return p}),i.d(t,"tsvParseRows",function(){return d}),i.d(t,"tsvFormat",function(){return h}),i.d(t,"tsvFormatRows",function(){return f})},function(e,t,i){"use strict";i.r(t);var n=i(261);function o(e){if(!e)throw new Error("coord is required");if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates;if(Array.isArray(e)&&e.length>=2&&void 0===e[0].length&&void 0===e[1].length)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var r=function(e,t,i){if(i=i||{},!Object(n.d)(i))throw new Error("options is invalid");var r=i.units,a=o(e),s=o(t),l=Object(n.a)(s[1]-a[1]),c=Object(n.a)(s[0]-a[0]),u=Object(n.a)(a[1]),p=Object(n.a)(s[1]),d=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(u)*Math.cos(p);return Object(n.g)(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),r)},a=i(296);t.default=function(e,t){if(t=t||{},!Object(n.d)(t))throw new Error("options is invalid");if(!e)throw new Error("geojson is required");return Object(a.b)(e,function(e,i){var n=i.geometry.coordinates;return e+r(n[0],n[1],t)},0)}},function(e,t,i){"use strict";i.r(t);var n=[function(){var e=this.$createElement;return(this._self._c||e)("full-screen-map-toggle-tab")},function(){var e=this.$createElement;return(this._self._c||e)("basemap-toggle-control",{attrs:{position:"topright"}})},function(){var e=this.$createElement;return(this._self._c||e)("div",[this.shouldShowImageryToggle?this._m(1):this._e()],1)},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("basemap-select-control",{attrs:{position:this.basemapSelectControlPosition}})],1)},function(){var e=this.$createElement;return(this._self._c||e)("pictometry-button",{attrs:{position:"topright",link:"pictometry",imgSrc:"images/pictometry.png"}})},function(){var e=this.$createElement;return(this._self._c||e)("div",[this.shouldShowPictometryButton?this._m(4):this._e()],1)},function(){var e=this.$createElement;return(this._self._c||e)("cyclomedia-button",{attrs:{position:"topright",link:"cyclomedia",imgSrc:"images/cyclomedia.png"},on:{click:this.handleCyclomediaButtonClick}})},function(){var e=this.$createElement;return(this._self._c||e)("div",[this.shouldShowCyclomediaButton?this._m(6):this._e()],1)},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("measure-control",{attrs:{position:"bottomleft"}})],1)},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(Object.keys(e.legendControls),function(t){return i("legend-control",{key:t,attrs:{position:"bottomleft",options:e.legendControls[t].options,items:e.legendControls[t].data}})}),1)},function(){var e=this.$createElement;return(this._self._c||e)("location-control",{attrs:{position:"bottomright"}})},function(){var e=this.$createElement;return(this._self._c||e)("div",[this.geolocationEnabled?this._m(10):this._e()],1)},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("map-address-input",{attrs:{position:this.addressInputPosition,placeholder:this.addressInputPlaceholder,widthFromConfig:this.addressInputWidth}})],1)}],o=i(39),r=i.n(o),a={watch:{activeFeature(e,t){const i=this.$store.state.map.map._layers,n=Object.values(i);let o,r,a,s,l,c,u;t&&t.tableId&&t.featureId&&(a=(o=t).tableId,s=o.featureId,u=n.filter(e=>{const t=(e.options||{}).data;if(!t)return;const i=t.featureId,n=t.tableId;return i===s&&n===a})[0],this.updateMarkerFillColor(u)),e&&e.tableId&&e.featureId&&(a=(r=e).tableId,l=r.featureId,c=n.filter(e=>{const t=(e.options||{}).data;if(!t)return;const i=t.featureId,n=t.tableId;return i===l&&n===a})[0],this.updateMarkerFillColor(c),this.bringMarkerToFront(c))}},computed:{locationMarker(){return{latlng:[this.$store.state.map.location.lat,this.$store.state.map.location.lng],radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1}},markersForAddress(){const e=[],t=this.geocodeGeom;if("address-marker"===this.identifyFeature&&t){const i={latlng:[...t.coordinates].reverse(),key:this.geocodeResult.properties.street_address,color:"#2176d2",markerType:"geocode",icon:{prefix:"fas",icon:"map-marker-alt",shadow:!0,size:50}};e.push(i)}return e},markersForTopic(){const e=[],t=this.activeTopicConfig.markersForTopic;if(t){const i=this.$store.state,n=t.data(i);if(null!==n){const i={latlng:[n[t.lat],n[t.lng]],key:n[t.key],color:t.color||"green",markerType:"overlay",icon:t.icon};e.push(i)}}return e},reactiveCircleMarkers(){const e=this.$store.state.horizontalTables.filteredData;let t=[];const i=this.$store.getters.visibleTableIds;for(let n of i){const i=((this.getConfigForTable(n)||{}).options||{}).mapOverlay;if(!i||"circle"!==i.marker)continue;const o=e[n];if(o.length<1)continue;const r=i.style;for(let e of o){let i;if(e.geometry){const[t,n]=e.geometry.coordinates;i=[n,t]}else e.lat&&(i=[e.lat,e.lng]);let o=Object.assign({},r);o.latlng=i,o.featureId=e._featureId,o.tableId=n,t.push(o)}}return t},geojsonParcels(){const e=[],t=this.identifyFeature,i=this.activeParcelLayer;if("pwd-parcel"===t&&"pwd"===i&&this.pwdParcel){let t={};t.geojson=this.pwdParcel,t.color="blue",t.fillColor="blue",t.weight=2,t.opacity=1,t.fillOpacity=.3,t.key=t.geojson.properties.PARCELID,e.push(t)}else if("dor-parcel"===t&&"dor"===i){const t=this.dorParcels.map(e=>{let t={};return t.geojson=e,t.color="blue",t.fillColor="blue",t.weight=2,t.opacity=1,t.fillOpacity=.3,t.key=e.properties.OBJECTID,t});e.push.apply(e,t)}return e},geojsonForTopic(){const e=[],t=this.activeTopicConfig.geojsonForTopic;if(t){const i=this.$store.state,n=t.data(i);if(null!==n)for(let i of n){let n=Object.assign({},t.style);n.key=i[t.key],n.geojson=i,e.push(n)}}return e},reactiveGeojsonFeatures(){const e=[],t=this.$store.state.horizontalTables.filteredData,i=this.$store.getters.visibleTableIds;for(let n of i){const i=((this.getConfigForTable(n)||{}).options||{}).mapOverlay;if(!i||"geojson"!==i.marker)continue;const o=t[n];if(o.length<1)continue;const r=i.style;o.push(n);for(let t of o){let i=Object.assign({},r);i.geojson=t.geometry,i.key=t.id,i.featureId=t._featureId||null,i.tableId=o[o.length-1],e.push(i)}}return e},leafletMarkers(){const e=[];return e.push.apply(e,this.markers),e.push.apply(e,this.geojsonParcels),e}},methods:{getTableFromComps:(e,t)=>(e.filter(e=>"horizontal-table"===e.type&&e._id==t)||[])[0],getConfigForTable(e){const t=this.$config.topics||[];for(let i of t){const t=i.components||[],n=this.getTableFromComps(t,e);if(n)return n;for(let i of t){const t=i.options||{},n=t.components||t.tables||[];if(n.length>0){const t=this.getTableFromComps(n,e);if(t)return t}}}},bringMarkerToFront(e){const t=e._path,i=e._renderer._rootGroup;i.removeChild(t),i.appendChild(t)},handleMarkerMouseover(e){if(!this.isMobileOrTablet){const{target:t}=e,{featureId:i,tableId:n}=t.options.data;this.$store.commit("setActiveFeature",{featureId:i,tableId:n})}},handleMarkerClick(e){if(this.isMobileOrTablet){const{target:t}=e,{featureId:i,tableId:n}=t.options.data;this.$store.commit("setActiveFeature",{featureId:i,tableId:n})}},handleMarkerMouseout(e){const{target:t}=e;this.$store.commit("setActiveFeature",null)},updateMarkerFillColor(e){const{featureId:t,tableId:i}=e.options.data,n=this.fillColorForOverlayMarker(t,i),o=Object.assign({},e.options);o.fillColor=n,e.setStyle(o)}}},s=i(356);const l=r.a.featureGroup,c=r.a.geoJSON,u=r.a.marker;var p={name:"MapPanel",mixins:[a,s.cyclomediaMixin,s.pictometryMixin],components:{Map_:s.Map_,Control:s.Control,MapAddressInput:s.MapAddressInput,MapAddressCandidateList:s.MapAddressCandidateList,EsriTiledMapLayer:s.EsriTiledMapLayer,EsriTiledOverlay:s.EsriTiledOverlay,EsriDynamicMapLayer:s.EsriDynamicMapLayer,EsriFeatureLayer:s.EsriFeatureLayer,Geojson:s.Geojson,CircleMarker:s.CircleMarker,VectorMarker:s.VectorMarker,PngMarker:s.PngMarker,BasemapToggleControl:s.BasemapToggleControl,BasemapSelectControl:s.BasemapSelectControl,FullScreenMapToggleTab:s.FullScreenMapToggleTab,LocationControl:s.LocationControl,PictometryButton:s.PictometryButton,CyclomediaButton:s.CyclomediaButton,CyclomediaRecordingCircle:s.CyclomediaRecordingCircle,SvgViewConeMarker:s.SvgViewConeMarker,MeasureControl:s.MeasureControl,LegendControl:s.LegendControl,BasemapTooltip:s.BasemapTooltip,ControlCorner:s.ControlCorner},data:()=>({zoomToShape:{geojsonParcels:[],geojsonForTopic:[],markersForAddress:[],markersForTopic:[]}}),created(){const e=this.$config.defaultAddress;e&&this.$controller.goToDefaultAddress(e),(this.$config.cyclomedia||{}).enabled&&(this.$cyclomediaRecordingsClient=new s.CyclomediaRecordingsClient(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326))},computed:{addressAutocompleteEnabled(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},addressInputPosition(){return this.isMobileOrTablet?"topleft":"topalmostleft"},addressInputWidth(){return this.$config.addressInput?this.$config.addressInput.mapWidth:415},addressInputPlaceholder(){return this.$config.addressInput?this.$config.addressInput.placeholder:null},basemapSelectControlPosition(){return this.isMobileOrTablet?"topright":"topalmostright"},shouldShowAddressCandidateList(){return this.$store.state.shouldShowAddressCandidateList},measureControlEnabled(){return!1!==this.$config.measureControlEnabled},fullScreenMapEnabled(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled(){return this.$store.state.fullScreenTopicsEnabled},mapPanelContainerClass(){return this.fullScreenMapEnabled?"medium-24 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":this.fullScreenMapOnly?"medium-1 small-order-1 small-1 medium-order-2 mb-panel mb-panel-map":this.fullScreenTopicsEnabled?"medium-1 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":"medium-12 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map"},cycloLatlng(){if(null!==this.$store.state.cyclomedia.orientation.xyz){const e=this.$store.state.cyclomedia.orientation.xyz;return[e[1],e[0]]}return this.$config.map.center},cycloRotationAngle(){return 57.29577951307855*this.$store.state.cyclomedia.orientation.yaw},cycloHFov(){return this.$store.state.cyclomedia.orientation.hFov},isMobileOrTablet(){return this.$store.state.isMobileOrTablet},shouldShowCyclomediaButton(){return this.$config.cyclomedia.enabled&&!this.isMobileOrTablet},shouldShowPictometryButton(){return this.$config.pictometry.enabled&&!this.isMobileOrTablet},geolocationEnabled(){return!!this.$config.geolocation&&this.$config.geolocation.enabled},activeDorParcel(){return this.$store.state.parcels.dor.activeParcel},legendControls(){return this.$config.legendControls||{}},imageOverlay(){return this.$store.state.map.imageOverlay},imageOverlayItems(){if(this.activeTopicConfig.imageOverlayGroup){const e=this.activeTopicConfig.imageOverlayGroup,t=this.$store.state;return this.$config.imageOverlayGroups[e].items(t)}return[]},imageOverlayInfo(){return this.$config.map.dynamicMapLayers.regmaps},activeBasemap(){if(this.$store.state.map.shouldShowImagery)return this.$store.state.map.imagery;const e=this.$config.map.defaultBasemap;return this.$store.state.map.basemap||e},tiledLayers(){const e=this.activeBasemap;return this.configForBasemap(e).tiledLayers||[]},activeTiledOverlays(){return this.activeTopicConfig&&this.activeTopicConfig.tiledOverlays?this.activeTopicConfig.tiledOverlays:[]},activeDynamicMaps(){return this.activeTopicConfig&&this.activeTopicConfig.dynamicMapLayers?this.activeTopicConfig.dynamicMapLayers:[]},activeFeatureLayers(){return this.activeTopicConfig&&this.activeTopicConfig.featureLayers?this.activeTopicConfig.featureLayers:[]},activeFeature(){return this.$store.state.activeFeature},basemaps(){return Object.values(this.$config.map.basemaps)},imageryBasemaps(){return this.basemaps.filter(e=>"imagery"===e.type)},hasImageryBasemaps(){return this.imageryBasemaps.length>0},shouldShowImageryToggle(){return this.$config.map.imagery?this.hasImageryBasemaps&&this.$config.map.imagery.enabled:this.hasImageryBasemaps},identifyFeature(){let e;return"intersection"===this.geocodeType?e="address-marker":this.activeTopicConfig.identifyFeature?e=this.activeTopicConfig.identifyFeature:this.$config&&(e=this.$config.map.defaultIdentifyFeature),e},activeTopic(){return this.$store.state.activeTopic},activeTopicConfig(){const e=this.activeTopic;let t;return e&&(t=this.$config.topics.filter(t=>t.key===e)[0]),t||{}},activeParcelLayer(){return this.activeTopicConfig.parcels},dorParcels(){return this.$store.state.parcels.dor.data},pwdParcel(){return this.$store.state.parcels.pwd},geocodeResult(){return this.$store.state.geocode.data||{}},geocodeGeom(){return this.geocodeResult.geometry},geocodeType(){return this.geocodeResult.ais_feature_type},streetAddress(){return this.geocodeResult.properties.street_address},picOrCycloActive(){return!(!this.cyclomediaActive&&!this.pictometryActive)},mapBounds(){},boundsBasedOnShape(){return this.$store.state.map.boundsBasedOnShape},isGeocoding(){return"waiting"===this.$store.state.geocode.status}},watch:{picOrCycloActive(e){this.$nextTick(()=>{this.$store.state.map.map.invalidateSize()})},geojsonForTopic(e){let t=this.activeTopicConfig.zoomToShape,i=this.$data.zoomToShape;t&&t.includes("geojsonForTopic")?(i.geojsonForTopic=e,this.checkBoundsChanges()):i.geojsonForTopic=[]},geojsonParcels(e){let t=this.activeTopicConfig.zoomToShape,i=this.$data.zoomToShape;t&&t.includes("geojsonParcels")?(i.geojsonParcels=e,this.checkBoundsChanges()):i.geojsonParcels=[]},markersForAddress(e){let t=this.activeTopicConfig.zoomToShape,i=this.$data.zoomToShape;t&&t.includes("markersForAddress")?(i.markersForAddress=e,this.checkBoundsChanges()):i.markersForAddress=[]},markersForTopic(e){let t=this.activeTopicConfig.zoomToShape,i=this.$data.zoomToShape;t&&t.includes("markersForTopic")?(i.markersForTopic=e,this.checkBoundsChanges()):i.markersForTopic=[]},fullScreenTopicsEnabled(){this.$nextTick(()=>{this.$store.state.map.map.invalidateSize()})}},methods:{checkBoundsChanges(){let e=this.activeTopicConfig.zoomToShape;if(!e)return;let t=this.$data.zoomToShape,i=[];for(let n of e)!1!==t[n]&&t[n].length>0?i.push(!0):i.push(!1);i.includes(!1)||this.setMapToBounds()},setMapToBounds(){let e=[],t=this.activeTopicConfig.zoomToShape;if(t){if(t.includes("geojsonParcels"))for(let t of this.geojsonParcels)e.push(c(t.geojson));if(t.includes("geojsonForTopic"))for(let t of this.geojsonForTopic)e.push(c(t.geojson));if(t.includes("markersForAddress"))for(let t of this.markersForAddress)e.push(u(t.latlng));if(t.includes("markersForTopic"))for(let t of this.markersForTopic)e.push(u(t.latlng));const i=new l(e).getBounds();this.$store.commit("setMapBounds",i)}},configForBasemap(e){return this.$config.map.basemaps[e]||{}},shouldShowGeojson(e){return"pwd"===this.activeTopicConfig.basemap||e===this.activeDorParcel},shouldShowImageOverlay(e){return e===this.imageOverlay},shouldShowFeatureLayer(e){return!!this.activeFeatureLayers.includes(e)},handleMapClick(e){this.$controller.handleMapClick(e)},handleMapMove(e){const t=this.$store.state.map.map,i=this.$config.pictometry||{},n=t.getCenter(),{lat:o,lng:r}=n,a=[r,o];if(i.enabled){this.$store.commit("setPictometryMapCenter",a);const e=t.getZoom();this.$store.commit("setPictometryMapZoom",e)}(this.$config.cyclomedia||{}).enabled&&(this.updateCyclomediaRecordings(),this.$store.commit("setCyclomediaLatLngFromMap",[o,r]))},fillColorForOverlayMarker(e,t){const i=this.getConfigForTable(t).options.mapOverlay,{style:n,hoverStyle:o}=i,r=this.activeFeature;return(e===r.featureId&&t===r.tableId?o:n).fillColor}}},d=(i(417),i(8)),h=Object(d.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:this.mapPanelContainerClass,attrs:{id:"map-panel-container"}},[e._m(0),e._v(" "),i("map_",{class:{"mb-map-with-widget":this.$store.state.cyclomedia.active||this.$store.state.pictometry.active},attrs:{id:"map-tag",center:this.$store.state.map.center,zoom:this.$store.state.map.zoom,"zoom-control-position":"bottomright","min-zoom":this.$config.map.minZoom,"max-zoom":this.$config.map.maxZoom},on:{"l-click":e.handleMapClick,"l-moveend":e.handleMapMove}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isGeocoding,expression:"isGeocoding"}],staticClass:"mb-map-loading-mask"},[i("div",{staticClass:"mb-map-loading-mask-inner"},[i("i",{staticClass:"fa fa-spinner fa-4x spin"}),e._v(" "),i("h1",[e._v("Finding address...")])])]),e._v(" "),e._l(this.$config.map.basemaps,function(t,n){return e.activeBasemap===n?i("esri-tiled-map-layer",{key:n,attrs:{url:t.url,"max-zoom":t.maxZoom,attribution:t.attribution}}):e._e()}),e._v(" "),e._l(this.$config.map.tiledLayers,function(t,n){return e.tiledLayers.includes(n)?i("esri-tiled-map-layer",{key:n,attrs:{url:t.url,zIndex:t.zIndex,attribution:t.attribution}}):e._e()}),e._v(" "),e._l(this.$config.map.tiledOverlays,function(t,n){return e.activeTiledOverlays.includes(n)?i("esri-tiled-overlay",{key:n,attrs:{url:t.url,zIndex:t.zIndex,opacity:t.opacity}}):e._e()}),e._v(" "),e._l(this.$config.map.dynamicMapLayers,function(t,n){return e.activeDynamicMaps.includes(n)?i("esri-dynamic-map-layer",{key:n,attrs:{url:t.url,attribution:t.attribution,transparent:!0,opacity:t.opacity}}):e._e()}),e._v(" "),e._l(this.$config.map.featureLayers,function(t,n){return e.shouldShowFeatureLayer(n,t.minZoom)?i("esri-feature-layer",{key:n,attrs:{layerName:n,url:t.url,color:t.color,fillColor:t.color,fillOpacity:t.fillOpacity,weight:t.weight,style_:t.style,minZoom:t.minZoom,maxZoom:t.maxZoom,zIndex:t.zIndex,markerType:t.markerType,radius:t.radius,interactive:t.interactive}}):e._e()}),e._v(" "),e._l(this.imageOverlayItems,function(t,n){return e.shouldShowImageOverlay(t.properties.RECMAP)?i("esri-dynamic-map-layer",{key:n,attrs:{url:"//gis.phila.gov/arcgis/rest/services/Atlas/RegMaps/MapServer",layers:[0],layerDefs:"0:NAME='g"+t.properties.RECMAP.toLowerCase()+".tif'",transparent:!0,opacity:.5}}):e._e()}),e._v(" "),e._l(e.markersForAddress,function(e,t){return i("vector-marker",{key:e.key,attrs:{latlng:e.latlng,markerColor:e.color,icon:e.icon}})}),e._v(" "),e._l(e.markersForTopic,function(e,t){return i("vector-marker",{key:e.key,attrs:{latlng:e.latlng,markerColor:e.color,icon:e.icon}})}),e._v(" "),this.cyclomediaActive?i("png-marker",{attrs:{icon:"images/camera.png",latlng:e.cycloLatlng,rotationAngle:e.cycloRotationAngle}}):e._e(),e._v(" "),this.cyclomediaActive?i("svg-view-cone-marker",{attrs:{latlng:e.cycloLatlng,rotationAngle:e.cycloRotationAngle,hFov:e.cycloHFov}}):e._e(),e._v(" "),e._l(e.geojsonParcels,function(t){return e.shouldShowGeojson(t.key)?i("geojson",{key:t.key,attrs:{geojson:t.geojson,fillColor:t.fillColor,color:t.color,weight:t.weight,opacity:t.opacity,fillOpacity:t.fillOpacity,data:{featureId:t.featureId,tableId:t.tableId}}}):e._e()}),e._v(" "),e._l(e.geojsonForTopic,function(t){return e.shouldShowGeojson(t.key)?i("geojson",{key:t.key,attrs:{geojson:t.geojson,fillColor:t.fillColor,color:t.color,weight:t.weight,opacity:t.opacity,fillOpacity:t.fillOpacity,data:{featureId:t.featureId,tableId:t.tableId}}}):e._e()}),e._v(" "),e._l(e.reactiveGeojsonFeatures,function(t){return e.shouldShowGeojson(t.key)?i("geojson",{key:t.key,attrs:{geojson:t.geojson,fillColor:t.fillColor,color:t.color,weight:t.weight,opacity:t.opacity,fillOpacity:t.fillOpacity,data:{featureId:t.featureId,tableId:t.tableId}},on:{"l-mouseover":e.handleMarkerMouseover,"l-click":e.handleMarkerClick,"l-mouseout":e.handleMarkerMouseout}}):e._e()}),e._v(" "),null!=this.$store.state.map.location.lat?i("circle-marker",{key:Math.random(),attrs:{latlng:this.locationMarker.latlng,radius:this.locationMarker.radius,fillColor:this.locationMarker.fillColor,color:this.locationMarker.color,weight:this.locationMarker.weight,opacity:this.locationMarker.opacity,fillOpacity:this.locationMarker.fillOpacity}}):e._e(),e._v(" "),e._l(e.reactiveCircleMarkers,function(t){return i("circle-marker",{key:Math.random(),attrs:{latlng:t.latlng,radius:t.radius,fillColor:t.fillColor,color:t.color,weight:t.weight,opacity:t.opacity,fillOpacity:t.fillOpacity,data:{featureId:t.featureId,tableId:t.tableId}},on:{"l-mouseover":e.handleMarkerMouseover,"l-click":e.handleMarkerClick,"l-mouseout":e.handleMarkerMouseout}})}),e._v(" "),i("control-corner",{attrs:{vSide:"top",hSide:"almostright"}}),e._v(" "),i("control-corner",{attrs:{vSide:"top",hSide:"almostleft"}}),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(5),e._v(" "),e._m(7),e._v(" "),this.measureControlEnabled?e._m(8):e._e(),e._v(" "),e._m(9),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),this.addressAutocompleteEnabled?i("map-address-candidate-list",{attrs:{position:this.addressInputPosition,widthFromConfig:this.addressInputWidth}}):e._e(),e._v(" "),e._l(e.cyclomediaRecordings,function(t){return e.cyclomediaActive?i("cyclomedia-recording-circle",{key:t.imageId,attrs:{imageId:t.imageId,latlng:[t.lat,t.lng],size:1.2,color:"#3388ff",weight:1},on:{"l-click":e.handleCyclomediaRecordingClick}}):e._e()})],2),e._v(" "),e._t("cycloWidget"),e._v(" "),e._t("pictWidget")],2)},n,!1,null,"3788299f",null);t.default=h.exports}])]);